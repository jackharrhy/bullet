!function e(t,r,o){function n(s,c){if(!r[s]){if(!t[s]){var p="function"==typeof require&&require;if(!c&&p)return p(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,o)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=this,r=t.constructor;return t.callbacks={},t.directMap={},t.sequenceLevels={},t.resetTimer,t.ignoreNextKeyup=!1,t.ignoreNextKeypress=!1,t.nextExpectedAction=!1,t.element=e,t.addEvents(),r.instances.push(t),t},t.exports.prototype.bind=e("./prototype/bind"),t.exports.prototype.bindMultiple=e("./prototype/bindMultiple"),t.exports.prototype.unbind=e("./prototype/unbind"),t.exports.prototype.trigger=e("./prototype/trigger"),t.exports.prototype.reset=e("./prototype/reset.js"),t.exports.prototype.stopCallback=e("./prototype/stopCallback"),t.exports.prototype.handleKey=e("./prototype/handleKey"),t.exports.prototype.addEvents=e("./prototype/addEvents"),t.exports.prototype.bindSingle=e("./prototype/bindSingle"),t.exports.prototype.getKeyInfo=e("./prototype/getKeyInfo"),t.exports.prototype.pickBestAction=e("./prototype/pickBestAction"),t.exports.prototype.getReverseMap=e("./prototype/getReverseMap"),t.exports.prototype.getMatches=e("./prototype/getMatches"),t.exports.prototype.resetSequences=e("./prototype/resetSequences"),t.exports.prototype.fireCallback=e("./prototype/fireCallback"),t.exports.prototype.bindSequence=e("./prototype/bindSequence"),t.exports.prototype.resetSequenceTimer=e("./prototype/resetSequenceTimer"),t.exports.prototype.detach=e("./prototype/detach"),t.exports.instances=[],t.exports.reset=e("./reset"),t.exports.REVERSE_MAP=null},{"./prototype/addEvents":2,"./prototype/bind":3,"./prototype/bindMultiple":4,"./prototype/bindSequence":5,"./prototype/bindSingle":6,"./prototype/detach":7,"./prototype/fireCallback":9,"./prototype/getKeyInfo":10,"./prototype/getMatches":11,"./prototype/getReverseMap":12,"./prototype/handleKey":13,"./prototype/pickBestAction":16,"./prototype/reset.js":17,"./prototype/resetSequenceTimer":18,"./prototype/resetSequences":19,"./prototype/stopCallback":20,"./prototype/trigger":21,"./prototype/unbind":22,"./reset":23}],2:[function(e,t,r){"use strict";t.exports=function(){var t=this,r=e("./dom-event"),o=t.element;t.eventHandler=e("./handleKeyEvent").bind(t),r(o,"keypress",t.eventHandler),r(o,"keydown",t.eventHandler),r(o,"keyup",t.eventHandler)}},{"./dom-event":8,"./handleKeyEvent":14}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r){var o=this;return e=e instanceof Array?e:[e],o.bindMultiple(e,t,r),o}},{}],4:[function(e,t,r){"use strict";t.exports=function(e,t,r){for(var o=this,n=0;n<e.length;++n)o.bindSingle(e[n],t,r)}},{}],5:[function(e,t,r){"use strict";t.exports=function(t,r,o,n){function i(e){return function(){c.nextExpectedAction=e,++c.sequenceLevels[t],c.resetSequenceTimer()}}function s(r){var i;c.fireCallback(o,r,t),"keyup"!==n&&(i=e("../../helpers/characterFromEvent"),c.ignoreNextKeyup=i(r)),setTimeout(function(){c.resetSequences()},10)}var c=this;c.sequenceLevels[t]=0;for(var p=0;p<r.length;++p){var a=p+1===r.length,u=a?s:i(n||c.getKeyInfo(r[p+1]).action);c.bindSingle(r[p],u,n,t,p)}}},{"../../helpers/characterFromEvent":24}],6:[function(e,t,r){"use strict";t.exports=function(e,t,r,o,n){var i=this;i.directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var s,c=e.split(" ");return c.length>1?void i.bindSequence(e,c,t,r):(s=i.getKeyInfo(e,r),i.callbacks[s.key]=i.callbacks[s.key]||[],i.getMatches(s.key,s.modifiers,{type:s.action},o,e,n),void i.callbacks[s.key][o?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:o,level:n,combo:e}))}},{}],7:[function(e,t,r){var o=e("./dom-event").off;t.exports=function(){var e=this,t=e.element;o(t,"keypress",e.eventHandler),o(t,"keydown",e.eventHandler),o(t,"keyup",e.eventHandler)}},{"./dom-event":8}],8:[function(e,t,r){function o(e,t,r,o){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,r,o),r}function n(e,t,r,o){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,r,o),r}t.exports=o,t.exports.on=o,t.exports.off=n},{}],9:[function(e,t,r){"use strict";t.exports=function(t,r,o,n){var i,s,c=this;c.stopCallback(r,r.target||r.srcElement,o,n)||t(r,o)===!1&&(i=e("../../helpers/preventDefault"),i(r),(s=e("../../helpers/stopPropagation"))(r))}},{"../../helpers/preventDefault":28,"../../helpers/stopPropagation":33}],10:[function(e,t,r){"use strict";t.exports=function(t,r){var o,n,i,s,c,p,a,u=this,l=[];for(o=e("../../helpers/keysFromString"),n=o(t),c=e("../../helpers/special-aliases"),p=e("../../helpers/shift-map"),a=e("../../helpers/isModifier"),s=0;s<n.length;++s)i=n[s],c[i]&&(i=c[i]),r&&"keypress"!==r&&p[i]&&(i=p[i],l.push("shift")),a(i)&&l.push(i);return r=u.pickBestAction(i,l,r),{key:i,modifiers:l,action:r}}},{"../../helpers/isModifier":26,"../../helpers/keysFromString":27,"../../helpers/shift-map":29,"../../helpers/special-aliases":30}],11:[function(e,t,r){"use strict";t.exports=function(t,r,o,n,i,s){var c,p,a,u,l=this,f=[],d=o.type;if("keypress"===d&&(!o.code||"Arrow"!==o.code.slice(0,5))){var y=l.callbacks["any-character"]||[];y.forEach(function(e){f.push(e)})}if(!l.callbacks[t])return f;for(a=e("../../helpers/isModifier"),"keyup"===d&&a(t)&&(r=[t]),c=0;c<l.callbacks[t].length;++c)if(p=l.callbacks[t][c],(n||!p.seq||l.sequenceLevels[p.seq]===p.level)&&d===p.action&&(u=e("./modifiersMatch"),"keypress"===d&&!o.metaKey&&!o.ctrlKey||u(r,p.modifiers))){var h=!n&&p.combo===i,v=n&&p.seq===n&&p.level===s;(h||v)&&l.callbacks[t].splice(c,1),f.push(p)}return f}},{"../../helpers/isModifier":26,"./modifiersMatch":15}],12:[function(e,t,r){"use strict";t.exports=function(){var t,r=this,o=r.constructor;if(!o.REVERSE_MAP){o.REVERSE_MAP={},t=e("../../helpers/special-keys-map");for(var n in t)n>95&&n<112||t.hasOwnProperty(n)&&(o.REVERSE_MAP[t[n]]=n)}return o.REVERSE_MAP}},{"../../helpers/special-keys-map":32}],13:[function(e,t,r){"use strict";t.exports=function(t,r,o){var n,i,s,c,p=this,a={},u=0,l=!1;for(n=p.getMatches(t,r,o),i=0;i<n.length;++i)n[i].seq&&(u=Math.max(u,n[i].level));for(i=0;i<n.length;++i)if(n[i].seq){if(n[i].level!==u)continue;l=!0,a[n[i].seq]=1,p.fireCallback(n[i].callback,o,n[i].combo,n[i].seq)}else l||p.fireCallback(n[i].callback,o,n[i].combo);c="keypress"===o.type&&p.ignoreNextKeypress,s=e("../../helpers/isModifier"),o.type!==p.nextExpectedAction||s(t)||c||p.resetSequences(a),p.ignoreNextKeypress=l&&"keydown"===o.type}},{"../../helpers/isModifier":26}],14:[function(e,t,r){"use strict";t.exports=function(t){var r,o,n=this;"number"!=typeof t.which&&(t.which=t.keyCode),r=e("../../helpers/characterFromEvent");var i=r(t);if(i){if("keyup"===t.type&&n.ignoreNextKeyup===i)return void(n.ignoreNextKeyup=!1);o=e("../../helpers/eventModifiers"),n.handleKey(i,o(t),t)}}},{"../../helpers/characterFromEvent":24,"../../helpers/eventModifiers":25}],15:[function(e,t,r){"use strict";t.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},{}],16:[function(e,t,r){"use strict";t.exports=function(e,t,r){var o=this;return r||(r=o.getReverseMap()[e]?"keydown":"keypress"),"keypress"===r&&t.length&&(r="keydown"),r}},{}],17:[function(e,t,r){"use strict";t.exports=function(){var e=this;return e.callbacks={},e.directMap={},this}},{}],18:[function(e,t,r){"use strict";t.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout(function(){e.resetSequences()},1e3)}},{}],19:[function(e,t,r){"use strict";t.exports=function(e){var t=this;e=e||{};var r,o=!1;for(r in t.sequenceLevels)e[r]?o=!0:t.sequenceLevels[r]=0;o||(t.nextExpectedAction=!1)}},{}],20:[function(e,t,r){"use strict";t.exports=function(e,t){if((" "+t.className+" ").indexOf(" combokeys ")>-1)return!1;var r=t.tagName.toLowerCase();return"input"===r||"select"===r||"textarea"===r||t.isContentEditable}},{}],21:[function(e,t,r){"use strict";t.exports=function(e,t){var r=this;return r.directMap[e+":"+t]&&r.directMap[e+":"+t]({},e),this}},{}],22:[function(e,t,r){"use strict";t.exports=function(e,t){var r=this;return r.bind(e,function(){},t)}},{}],23:[function(e,t,r){"use strict";t.exports=function(){var e=this;e.instances.forEach(function(e){e.reset()})}},{}],24:[function(e,t,r){"use strict";t.exports=function(t){var r,o;if(r=e("./special-keys-map"),o=e("./special-characters-map"),"keypress"===t.type){var n=String.fromCharCode(t.which);return t.shiftKey||(n=n.toLowerCase()),n}return r[t.which]?r[t.which]:o[t.which]?o[t.which]:String.fromCharCode(t.which).toLowerCase()}},{"./special-characters-map":31,"./special-keys-map":32}],25:[function(e,t,r){"use strict";t.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},{}],26:[function(e,t,r){"use strict";t.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},{}],27:[function(e,t,r){"use strict";t.exports=function(e){return"+"===e?["+"]:e.split("+")}},{}],28:[function(e,t,r){"use strict";t.exports=function(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}},{}],29:[function(e,t,r){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},{}],30:[function(e,t,r){"use strict";t.exports={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},{}],31:[function(e,t,r){"use strict";t.exports={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},{}],32:[function(e,t,r){"use strict";t.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",187:"plus",189:"minus",224:"meta"};for(var o=1;o<20;++o)t.exports[111+o]="f"+o;for(o=0;o<=9;++o)t.exports[o+96]=o},{}],33:[function(e,t,r){"use strict";t.exports=function(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}},{}],34:[function(e,t,r){var o=e("./fab/vec2"),n=e("./fab/randInt"),i=document.getElementById("canvas"),s=i.getContext("2d");t.exports={getSize:function(){return o(window.innerWidth,window.innerHeight)},getCenter:function(){return o(window.innerWidth/2,window.innerHeight/2)},getRandomBoundPoint:function(){return Math.random()>=.5?o(n(0,window.innerWidth),0):o(0,n(0,window.innerHeight))},resize:function(){i.width=window.innerWidth,i.height=window.innerHeight},circle:function(e){s.fillStyle=e.color,s.beginPath(),s.arc(e.pos.x,e.pos.y,e.radius,0,2*Math.PI),s.fill()},clear:function(){s.fillStyle="white",s.fillRect(0,0,i.width,i.height)},text:function(e,t,r,o){s.fillStyle=o,s.font=r.toString()+"px Helvetica",s.fillStyle(t,e.x,e.y)}}},{"./fab/randInt":37,"./fab/vec2":38}],35:[function(e,t,r){function o(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function n(e,t){var r=o(e.pos,t.pos);return r<e.radius+t.radius}function i(e,t){return!(e.pos.x+e.radius<t.pos.x-t.radius||e.pos.y+e.radius<t.pos.y-t.radius||e.pos.x-e.radius>t.pos.x+t.radius||e.pos.y-e.radius>t.pos.y+t.radius)}var s=e("./fab/vec2");t.exports={create:function(e){return{radius:e.radius||4,color:e.color||"black",pos:e.pos||s(0,0),posOffset:e.posOffset||s(0,0),vel:e.vel||s(0,0),maxVel:e.maxVel||s(1,1),acel:e.acel||s(0,0)}},checkCollision:function(e,t){return!(!i(e,t)||!n(e,t))},acel:function(e){e.vel.y+=e.acel.y,e.vel.x+=e.acel.x},move:function(e){e.vel.y>0?(e.vel.y=e.vel.y>=e.maxVel.y?e.maxVel.y:e.vel.y,e.pos.y+=e.vel.y):(e.vel.y=e.vel.y<=-e.maxVel.y?-e.maxVel.y:e.vel.y,e.pos.y+=e.vel.y),e.vel.x>0?(e.vel.x=e.vel.x>=e.maxVel.x?e.maxVel.x:e.vel.x,e.pos.x+=e.vel.x):(e.vel.x=e.vel.x<=-e.maxVel.x?-e.maxVel.x:e.vel.x,e.pos.x+=e.vel.x)},moveWithKeyboard:function(e,t){t.up&&(e.vel.y-=e.acel.y),t.down&&(e.vel.y+=e.acel.y),t.left&&(e.vel.x-=e.acel.x),t.right&&(e.vel.x+=e.acel.x),this.move(e)},moveWithPlayer:function(e,t){e.pos=s.sub(t.pos,e.posOffset)},swapAround:function(e,t){e.pos.y>t.y?e.pos.y-=t.y:e.pos.y<0&&(e.pos.y+=t.y),e.pos.x>t.x?e.pos.x-=t.x:e.pos.x<0&&(e.pos.x+=t.x)}}},{"./fab/vec2":38}],36:[function(e,t,r){t.exports=function(){return"#"+Math.random().toString(16).substr(-6)}},{}],37:[function(e,t,r){t.exports=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{}],38:[function(e,t,r){var o=function(e,t){return{x:e,y:t}};o.add=function(e,t){return o(e.x+t.x,e.y+t.y)},o.sub=function(e,t){return o(e.x-t.x,e.y-t.y)},o.multi=function(e,t){return o(e.x*t.x,e.y*t.y)},t.exports=o},{}],39:[function(e,t,r){var o=e("./update");o.renderLoop(),o.secondsLoop()},{"./update":41}],40:[function(e,t,r){var o=e("combokeys"),n=new o(document.documentElement),i={up:!1,down:!1,left:!1,right:!1};n.bind("up",function(){i.up=!0},"keydown"),n.bind("up",function(){i.up=!1},"keyup"),n.bind("down",function(){i.down=!0},"keydown"),n.bind("down",function(){i.down=!1},"keyup"),n.bind("left",function(){i.left=!0},"keydown"),n.bind("left",function(){i.left=!1},"keyup"),n.bind("right",function(){i.right=!0},"keydown"),n.bind("right",function(){i.right=!1},"keyup"),t.exports=i},{combokeys:1}],41:[function(e,t,r){function o(e){for(var t=0,r=l.length;t<r;t++)if(l[t]&&c.checkCollision(e,l[t])){var o=Object.create(l[t]);Object.create(e);u.push(c.create({radius:o.radius,color:o.color,pos:o.pos,posOffset:n.sub(y.pos,o.pos)})),p.circle(l[t]),delete l[t]}}var n=e("./fab/vec2"),i=e("./fab/randInt"),s=e("./fab/randHex"),c=e("./entity"),p=e("./canvas"),a=e("./keyboard"),u=[],l=[],f=-1,d=-1;p.resize();var y=c.create({radius:5,color:"red",pos:p.getCenter(),maxVel:n(3,3),acel:n(.4,.4)});t.exports={renderLoop:function(){f++,p.clear(),c.moveWithKeyboard(y,a),c.swapAround(y,p.getSize()),p.circle(y),o(y);for(var e=0,t=u.length;e<t;e++){var r=u[e];c.moveWithPlayer(r,y),c.swapAround(r,p.getSize()),p.circle(r),o(r)}for(var n=0,i=l.length;n<i;n++)if(l[n]){var s=l[n];c.move(s),c.acel(s),c.swapAround(s,p.getSize()),p.circle(s)}requestAnimationFrame(this.renderLoop.bind(this))},secondsLoop:function(){d++,l.length<=130&&l.push(c.create({radius:i(7,14),color:s(),pos:p.getRandomBoundPoint(),maxVel:n(Math.random()*d/7+1,Math.random()*d/7+1),acel:n(Math.random()<.5?-.005:.005,Math.random()<.5?-.005:.005)})),setTimeout(this.secondsLoop.bind(this),1e3)}}},{"./canvas":34,"./entity":35,"./fab/randHex":36,"./fab/randInt":37,"./fab/vec2":38,"./keyboard":40}]},{},[39]);