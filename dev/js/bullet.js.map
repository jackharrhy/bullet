{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/combokeys/Combokeys/index.js","node_modules/combokeys/Combokeys/prototype/addEvents.js","node_modules/combokeys/Combokeys/prototype/bind.js","node_modules/combokeys/Combokeys/prototype/bindMultiple.js","node_modules/combokeys/Combokeys/prototype/bindSequence.js","node_modules/combokeys/Combokeys/prototype/bindSingle.js","node_modules/combokeys/Combokeys/prototype/detach.js","node_modules/combokeys/Combokeys/prototype/dom-event.js","node_modules/combokeys/Combokeys/prototype/fireCallback.js","node_modules/combokeys/Combokeys/prototype/getKeyInfo.js","node_modules/combokeys/Combokeys/prototype/getMatches.js","node_modules/combokeys/Combokeys/prototype/getReverseMap.js","node_modules/combokeys/Combokeys/prototype/handleKey.js","node_modules/combokeys/Combokeys/prototype/handleKeyEvent.js","node_modules/combokeys/Combokeys/prototype/modifiersMatch.js","node_modules/combokeys/Combokeys/prototype/pickBestAction.js","node_modules/combokeys/Combokeys/prototype/reset.js","node_modules/combokeys/Combokeys/prototype/resetSequenceTimer.js","node_modules/combokeys/Combokeys/prototype/resetSequences.js","node_modules/combokeys/Combokeys/prototype/stopCallback.js","node_modules/combokeys/Combokeys/prototype/trigger.js","node_modules/combokeys/Combokeys/prototype/unbind.js","node_modules/combokeys/Combokeys/reset.js","node_modules/combokeys/helpers/characterFromEvent.js","node_modules/combokeys/helpers/eventModifiers.js","node_modules/combokeys/helpers/isModifier.js","node_modules/combokeys/helpers/keysFromString.js","node_modules/combokeys/helpers/preventDefault.js","node_modules/combokeys/helpers/shift-map.js","node_modules/combokeys/helpers/special-aliases.js","node_modules/combokeys/helpers/special-characters-map.js","node_modules/combokeys/helpers/special-keys-map.js","node_modules/combokeys/helpers/stopPropagation.js","src/js/canvas.js","src/js/entity.js","src/js/fab/distanceCheck.js","src/js/fab/pytha.js","src/js/fab/randHex.js","src/js/fab/randInt.js","src/js/fab/squareCheck.js","src/js/index.js","src/js/keyboard.js","src/js/scoreBoard.js","src/js/state.js","src/js/update.js","src/js/vec2.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA,IAAI,UAAU,QAAQ,eAAR,CAAd;;AAEA,IAAI,SAAS,SAAS,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAI,IAAI,OAAO,UAAP,CAAkB,IAAlB,CAAR;;AAEA,IAAI,OAAO;AACT,aAAW,SAAS,cAAT,CAAwB,cAAxB;AADF,CAAX;;AAIA,OAAO,OAAP,GAAiB;AACf,WAAS,YAAW;AAClB,WAAO,EAAE,GAAG,OAAO,UAAZ,EAAwB,GAAG,OAAO,WAAlC,EAAP;AACD,GAHc;AAIf,aAAW,YAAW;AACpB,WAAO,EAAE,GAAG,OAAO,UAAP,GAAkB,CAAvB,EAA0B,GAAG,OAAO,WAAP,GAAmB,CAAhD,EAAP;AACD,GANc;AAOf,uBAAqB,YAAW;AAC9B,QAAG,KAAK,MAAL,MAAiB,GAApB,EAAyB;AACvB,aAAO,EAAE,GAAG,QAAQ,CAAR,EAAU,OAAO,UAAjB,CAAL,EAAmC,GAAG,CAAtC,EAAP;AACD;AACD,WAAO,EAAE,GAAG,CAAL,EAAQ,GAAG,QAAQ,CAAR,EAAU,OAAO,WAAjB,CAAX,EAAP;AACD,GAZc;;AAcf,UAAQ,YAAW;AACjB,WAAO,KAAP,GAAe,OAAO,UAAtB;AACA,WAAO,MAAP,GAAgB,OAAO,WAAvB;AACD,GAjBc;;AAmBf,QAAM,YAAW;AACf,WAAO,KAAP,CAAa,OAAb,GAAuB,MAAvB;AACD,GArBc;;AAuBf,OAAK,UAAS,MAAT,EAAiB,CAAjB,EAAmB,CAAnB,EAAsB;AACzB,MAAE,SAAF,CAAY,KAAK,MAAL,CAAZ,EAAyB,CAAzB,EAA2B,CAA3B;AACD,GAzBc;;AA2Bf,UAAQ,UAAS,MAAT,EAAiB;AACvB,MAAE,SAAF,GAAc,OAAO,KAArB;AACA,MAAE,SAAF;AACA,MAAE,GAAF,CAAM,OAAO,GAAP,CAAW,CAAjB,EAAoB,OAAO,GAAP,CAAW,CAA/B,EAAkC,OAAO,MAAzC,EAAiD,CAAjD,EAAoD,IAAE,KAAK,EAA3D;AACA,MAAE,IAAF;AACD,GAhCc;;AAkCf,iBAAe,UAAS,MAAT,EAAiB;AAC9B,MAAE,SAAF,GAAc,OAAO,KAArB;AACA,MAAE,WAAF,GAAgB,OAAO,WAAvB;AACA,MAAE,SAAF;AACA,MAAE,GAAF,CAAM,OAAO,GAAP,CAAW,CAAjB,EAAoB,OAAO,GAAP,CAAW,CAA/B,EAAkC,OAAO,MAAzC,EAAiD,CAAjD,EAAoD,IAAE,KAAK,EAA3D;AACA,MAAE,IAAF;AACA,MAAE,MAAF;AACD,GAzCc;;AA2Cf,SAAO,YAAW;AAChB,MAAE,SAAF,GAAc,OAAd;AACA,MAAE,QAAF,CAAW,CAAX,EAAa,CAAb,EAAe,OAAO,KAAtB,EAA4B,OAAO,MAAnC;AACD,GA9Cc;;AAgDf,QAAM,UAAS,GAAT,EAAa,IAAb,EAAkB,IAAlB,EAAuB,KAAvB,EAA8B;AAClC,MAAE,SAAF,GAAc,KAAd;AACA,MAAE,IAAF,GAAS,KAAK,QAAL,KAAkB,cAA3B;AACA,MAAE,SAAF,CAAY,IAAZ,EAAkB,IAAI,CAAtB,EAAyB,IAAI,CAA7B;AACD;AApDc,CAAjB;;;ACTA,IAAI,OAAO,QAAQ,QAAR,CAAX;;AAEA,IAAI,gBAAgB,QAAQ,qBAAR,CAApB;;AAEA,IAAI,cAAc,QAAQ,mBAAR,CAAlB;;AAEA,SAAS,UAAT,CAAoB,GAApB,EAAyB,MAAzB,EAAiC;AAC/B,MAAG,MAAM,CAAT,EAAY;AACV,WAAO,OAAO,MAAP,GAAgB,MAAhB,GAAyB,GAAhC;AACD;AACD,SAAO,OAAO,CAAC,MAAR,GAAiB,CAAC,MAAlB,GAA0B,GAAjC;AACD;;AAED,SAAS,QAAT,CAAkB,MAAlB,EAA0B;AACxB,SAAO;AACL,OAAG,WAAW,OAAO,GAAP,CAAW,CAAtB,EAAyB,OAAO,MAAP,CAAc,CAAvC,CADE;AAEL,OAAG,WAAW,OAAO,GAAP,CAAW,CAAtB,EAAyB,OAAO,MAAP,CAAc,CAAvC;AAFE,GAAP;AAID;;AAED,OAAO,OAAP,GAAiB;AACf,UAAQ,UAAS,IAAT,EAAe;AACrB,WAAO;AACL,cAAQ,KAAK,MAAL,IAAe,CADlB;AAEL,aAAO,KAAK,KAAL,IAAc,OAFhB;;AAIL,WAAK,KAAK,GAAL,IAAY,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV,EAJZ;AAKL,iBAAW,KAAK,SAAL,IAAkB,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV,EALxB;;AAOL,WAAK,KAAK,GAAL,IAAY,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV,EAPZ;AAQL,cAAQ,KAAK,MAAL,IAAe,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV,EARlB;;AAUL,YAAM,KAAK,IAAL,IAAa,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV;AAVd,KAAP;AAYD,GAdc;;AAgBf,cAAY,UAAS,MAAT,EAAiB;AAC3B,WAAO,KAAK,MAAL,CAAY;AACjB,cAAQ,CADS;AAEjB,aAAO,OAFU;AAGjB,oBAAc,OAHG;;AAKjB,WAAK,MALY;;AAOjB,cAAQ,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV,EAPS;AAQjB,YAAM,EAAC,GAAG,GAAJ,EAAS,GAAG,GAAZ;AARW,KAAZ,CAAP;AAUD,GA3Bc;;AA6Bf,kBAAgB,UAAS,IAAT,EAAe,IAAf,EAAqB;AACnC,WAAO,YAAY,IAAZ,EAAkB,IAAlB,KAA2B,cAAc,IAAd,EAAoB,IAApB,CAAlC;AACD,GA/Bc;;AAiCf,QAAM,UAAS,MAAT,EAAiB;AACrB,WAAO,GAAP,CAAW,CAAX,IAAgB,OAAO,IAAP,CAAY,CAA5B;AACA,WAAO,GAAP,CAAW,CAAX,IAAgB,OAAO,IAAP,CAAY,CAA5B;AACD,GApCc;;AAsCf,QAAM,UAAS,MAAT,EAAiB;AACrB,WAAO,GAAP,GAAa,SAAS,MAAT,CAAb;;AAEA,WAAO,GAAP,GAAa,KAAK,GAAL,CAAS,OAAO,GAAhB,EAAqB,OAAO,GAA5B,CAAb;AACD,GA1Cc;;AA4Cf,oBAAkB,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AAC3C,QAAG,SAAS,EAAZ,EAAgB;AACd,aAAO,GAAP,CAAW,CAAX,IAAgB,OAAO,IAAP,CAAY,CAA5B;AACD;AACD,QAAG,SAAS,IAAZ,EAAkB;AAChB,aAAO,GAAP,CAAW,CAAX,IAAgB,OAAO,IAAP,CAAY,CAA5B;AACD;AACD,QAAG,SAAS,IAAZ,EAAkB;AAChB,aAAO,GAAP,CAAW,CAAX,IAAgB,OAAO,IAAP,CAAY,CAA5B;AACD;AACD,QAAG,SAAS,KAAZ,EAAmB;AACjB,aAAO,GAAP,CAAW,CAAX,IAAgB,OAAO,IAAP,CAAY,CAA5B;AACD;;AAED,SAAK,IAAL,CAAU,MAAV;AACD,GA3Dc;;AA6Df,kBAAgB,UAAS,MAAT,EAAiB,UAAjB,EAA6B;AAC3C,WAAO,GAAP,GAAa,KAAK,GAAL,CAAS,WAAW,GAApB,EAAyB,OAAO,SAAhC,CAAb;AACD,GA/Dc;;AAiEf,cAAY,UAAS,MAAT,EAAiB,UAAjB,EAA6B;AACvC;AACA,QAAG,OAAO,GAAP,CAAW,CAAX,GAAe,WAAW,CAA7B,EAAgC;AAC9B,aAAO,GAAP,CAAW,CAAX,IAAgB,WAAW,CAA3B;AACD,KAFD,MAGK,IAAG,OAAO,GAAP,CAAW,CAAX,GAAe,CAAlB,EAAqB;AACxB,aAAO,GAAP,CAAW,CAAX,IAAgB,WAAW,CAA3B;AACD;;AAED;AACA,QAAG,OAAO,GAAP,CAAW,CAAX,GAAe,WAAW,CAA7B,EAAgC;AAC9B,aAAO,GAAP,CAAW,CAAX,IAAgB,WAAW,CAA3B;AACD,KAFD,MAGK,IAAG,OAAO,GAAP,CAAW,CAAX,GAAe,CAAlB,EAAqB;AACxB,aAAO,GAAP,CAAW,CAAX,IAAgB,WAAW,CAA3B;AACD;AACF;AAjFc,CAAjB;;;ACpBA,IAAI,QAAQ,QAAQ,SAAR,CAAZ;;AAEA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAe,IAAf,EAAqB;AACpC,MAAI,WAAW,MAAM,KAAK,GAAX,EAAgB,KAAK,GAArB,CAAf;AACA,SAAO,WAAY,KAAK,MAAL,GAAc,KAAK,MAAtC;AACD,CAHD;;;ACFA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAe,IAAf,EAAqB;AACpC,SAAO,KAAK,IAAL,CACJ,CAAC,KAAK,CAAL,GAAS,KAAK,CAAf,KAAqB,KAAK,CAAL,GAAS,KAAK,CAAnC,CAAD,GACC,CAAC,KAAK,CAAL,GAAS,KAAK,CAAf,KAAqB,KAAK,CAAL,GAAS,KAAK,CAAnC,CAFI,CAAP;AAID,CALD;;;ACAA,OAAO,OAAP,GAAiB,YAAW;AAC1B,SAAO,MAAI,KAAK,MAAL,GAAc,QAAd,CAAuB,EAAvB,EAA2B,MAA3B,CAAkC,CAAC,CAAnC,CAAX;AACD,CAFD;;;ACAA,OAAO,OAAP,GAAiB,UAAS,GAAT,EAAa,GAAb,EAAkB;AACjC,SAAO,KAAK,KAAL,CAAW,KAAK,MAAL,MAAiB,MAAM,GAAN,GAAY,CAA7B,IAAkC,GAA7C,CAAP;AACD,CAFD;;;ACAA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAe,IAAf,EAAqB;AACpC,SAAO,EACJ,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MAAnB,GAA8B,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MAAhD,IACC,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MAAnB,GAA8B,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MADhD,IAEC,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MAAnB,GAA8B,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MAFhD,IAGC,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MAAnB,GAA8B,KAAK,GAAL,CAAS,CAAT,GAAa,KAAK,MAJ3C,CAAP;AAMD,CAPD;;;ACAA,SAAS,gBAAT,CAA0B,kBAA1B,EAA8C,UAAS,KAAT,EAAgB;AAC5D,MAAI,SAAS,QAAQ,UAAR,CAAb;;AAEA,MAAI,OAAO,SAAS,cAAT,CAAwB,MAAxB,CAAX;AACA,MAAI,cAAc,SAAS,cAAT,CAAwB,OAAxB,CAAlB;AACA,MAAI,cAAc,SAAS,cAAT,CAAwB,aAAxB,CAAlB;;AAEA,cAAY,OAAZ,GAAsB,YAAW;AAC/B,SAAK,KAAL,CAAW,OAAX,GAAqB,MAArB;AACA,gBAAY,KAAZ,CAAkB,OAAlB,GAA4B,OAA5B;;AAEA,WAAO,UAAP;AACA,WAAO,WAAP;AACD,GAND;AAOD,CAdD;;;ACAA,IAAI,YAAY,QAAQ,WAAR,CAAhB;AACA,IAAI,cAAc,IAAI,SAAJ,CAAc,SAAS,eAAvB,CAAlB;;AAEA,IAAI,KAAK;AACP,MAAI,KADG,EACI,MAAM,KADV,EACiB,MAAM,KADvB,EAC8B,OAAO;AADrC,CAAT;;AAIA,YAAY,IAAZ,CAAiB,IAAjB,EAAuB,YAAc;AAAE,KAAG,EAAH,GAAQ,IAAR;AAAmB,CAA1D,EAA4D,SAA5D;AACA,YAAY,IAAZ,CAAiB,IAAjB,EAAuB,YAAc;AAAE,KAAG,EAAH,GAAQ,KAAR;AAAmB,CAA1D,EAA4D,OAA5D;AACA,YAAY,IAAZ,CAAiB,MAAjB,EAAyB,YAAY;AAAE,KAAG,IAAH,GAAU,IAAV;AAAmB,CAA1D,EAA4D,SAA5D;AACA,YAAY,IAAZ,CAAiB,MAAjB,EAAyB,YAAY;AAAE,KAAG,IAAH,GAAU,KAAV;AAAmB,CAA1D,EAA4D,OAA5D;AACA,YAAY,IAAZ,CAAiB,MAAjB,EAAyB,YAAY;AAAE,KAAG,IAAH,GAAU,IAAV;AAAmB,CAA1D,EAA4D,SAA5D;AACA,YAAY,IAAZ,CAAiB,MAAjB,EAAyB,YAAY;AAAE,KAAG,IAAH,GAAU,KAAV;AAAmB,CAA1D,EAA4D,OAA5D;AACA,YAAY,IAAZ,CAAiB,OAAjB,EAA0B,YAAW;AAAE,KAAG,KAAH,GAAW,IAAX;AAAmB,CAA1D,EAA4D,SAA5D;AACA,YAAY,IAAZ,CAAiB,OAAjB,EAA0B,YAAW;AAAE,KAAG,KAAH,GAAW,KAAX;AAAmB,CAA1D,EAA4D,OAA5D;;AAEA,OAAO,OAAP,GAAiB,EAAjB;;;AChBA,IAAI,MAAM;AACR,eAAa,SAAS,cAAT,CAAwB,aAAxB,CADL;AAER,mBAAiB,SAAS,cAAT,CAAwB,gBAAxB,CAFT;AAGR,eAAa,SAAS,cAAT,CAAwB,aAAxB,CAHL;AAIR,mBAAiB,SAAS,cAAT,CAAwB,iBAAxB;AAJT,CAAV;;AAOA,OAAO,OAAP,GAAiB;AACf,mBAAiB,CADF;AAEf,eAAa,EAFE;AAGf,mBAAiB,CAHF;;AAKf,aAAW,YAAW;AACpB,QAAI,eAAJ,CAAoB,SAApB,GAAgC,KAAK,eAArC;AACA,QAAI,WAAJ,CAAgB,SAAhB,GAA4B,KAAK,WAAjC;AACA,QAAI,eAAJ,CAAoB,SAApB,GAAgC,KAAK,eAArC;AACD,GATc;;AAWf,QAAM,YAAW;AACf,QAAI,WAAJ,CAAgB,KAAhB,CAAsB,OAAtB,GAAgC,MAAhC;AACD;AAbc,CAAjB;;;ACPA,OAAO,OAAP,GAAiB;AACf,YAAU,IADK;AAEf,YAAU,KAFK;;AAIf,YAAU;AAJK,CAAjB;;;ACAA,IAAI,OAAO,QAAQ,WAAR,CAAX;AACA,IAAI,UAAU,QAAQ,eAAR,CAAd;AACA,IAAI,UAAU,QAAQ,eAAR,CAAd;;AAEA,IAAI,SAAS,QAAQ,UAAR,CAAb;AACA,IAAI,SAAS,QAAQ,UAAR,CAAb;AACA,IAAI,WAAW,QAAQ,YAAR,CAAf;;AAEA,IAAI,QAAQ,QAAQ,SAAR,CAAZ;;AAEA,IAAI,aAAa,QAAQ,cAAR,CAAjB;;AAEA,IAAI,cAAc,EAAlB;AACA,IAAI,cAAc,EAAlB;;AAEA,IAAI,QAAQ,CAAC,CAAb;AACA,IAAI,UAAU,CAAC,CAAf;;AAEA,OAAO,MAAP;;AAEA,IAAI,aAAa,OAAO,UAAP,CAAkB,OAAO,SAAP,EAAlB,CAAjB;;AAEA,SAAS,cAAT,CAAwB,YAAxB,EAAsC;AACpC,OAAI,IAAI,IAAE,CAAN,EAAS,OAAK,YAAY,MAA9B,EAAsC,IAAI,IAA1C,EAAgD,GAAhD,EAAqD;AACnD,QAAG,YAAY,CAAZ,KAAkB,OAAO,cAAP,CAAsB,YAAtB,EAAmC,YAAY,CAAZ,CAAnC,CAArB,EAAyE;AACvE,UAAI,eAAe,YAAY,CAAZ,CAAnB;;AAEA,kBAAY,IAAZ,CAAiB,OAAO,MAAP,CAAc;AAC7B,gBAAQ,aAAa,MADQ;AAE7B,eAAO,aAAa,KAFS;AAG7B,aAAK,aAAa,GAHW;AAI7B,mBAAW,KAAK,GAAL,CAAS,WAAW,GAApB,EAAyB,aAAa,GAAtC;AAJkB,OAAd,CAAjB;;AAOA,kBAAY,MAAZ,CAAmB,CAAnB,EAAqB,CAArB;;AAEA,UAAG,MAAM,QAAT,EAAmB;AACjB,cAAM,QAAN,GAAiB,KAAjB;AACA,iBAAS,cAAT,CAAwB,YAAxB,EAAsC,KAAtC,CAA4C,OAA5C,GAAsD,MAAtD;AACA,iBAAS,cAAT,CAAwB,cAAxB,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,OAAxD;AACD;;AAED,iBAAW,eAAX;AACA,iBAAW,SAAX;AACD;AACF;AACF;;AAED,SAAS,UAAT,GAAsB;AACpB;AACA,SAAO,KAAP;;AAEA,MAAI,aAAa,OAAO,OAAP,EAAjB;;AAEA,MAAG,CAAC,MAAM,QAAV,EAAoB;AAClB,WAAO,GAAP,CAAW,WAAX,EAAuB,WAAW,CAAX,GAAe,CAAf,GAAoB,EAA3C,EAA+C,WAAW,CAAX,GAAe,CAAf,GAAoB,GAAnE;AACA,QAAG,SAAS,EAAT,IAAe,SAAS,IAAxB,IAAgC,SAAS,IAAzC,IAAiD,SAAS,KAA7D,EAAoE;AAClE,YAAM,QAAN,GAAiB,IAAjB;AACD;AACF;;AAED,OAAI,IAAI,IAAE,CAAV,EAAa,IAAI,YAAY,MAA7B,EAAqC,GAArC,EAA0C;AACxC,QAAG,YAAY,CAAZ,CAAH,EAAmB;AACjB,UAAI,eAAe,YAAY,CAAZ,CAAnB;;AAEA,aAAO,IAAP,CAAY,YAAZ;AACA,aAAO,IAAP,CAAY,YAAZ;AACA,aAAO,UAAP,CAAkB,YAAlB,EAAgC,UAAhC;;AAEA,aAAO,MAAP,CAAc,YAAd;AACD;AACF;;AAED,SAAO,gBAAP,CAAwB,UAAxB,EAAoC,QAApC;AACA,SAAO,UAAP,CAAkB,UAAlB,EAA8B,UAA9B;AACA,SAAO,aAAP,CAAqB,UAArB;AACA,iBAAe,UAAf;;AAEA,OAAI,IAAI,IAAE,CAAV,EAAa,IAAI,YAAY,MAA7B,EAAqC,GAArC,EAA0C;AACxC,QAAI,eAAe,YAAY,CAAZ,CAAnB;;AAEA,WAAO,cAAP,CAAsB,YAAtB,EAAoC,UAApC;AACA,WAAO,UAAP,CAAkB,YAAlB,EAAgC,UAAhC;;AAEA,WAAO,MAAP,CAAc,YAAd;AACA,mBAAe,YAAf;AACD;;AAED,MAAG,CAAC,MAAM,QAAV,EAAoB;AAClB,WAAO,qBAAP,CAA6B,UAA7B;AACD;AACF;;AAED,SAAS,WAAT,GAAuB;AACrB;;AAEA,MAAG,MAAM,QAAT,EAAmB;AACjB,QAAG,MAAM,QAAT,EAAmB;AACjB,iBAAW,eAAX;AACD,KAFD,MAEO;AACL,iBAAW,WAAX;;AAEA,UAAG,WAAW,WAAX,IAA0B,CAA7B,EAAgC;AAC9B,cAAM,QAAN,GAAiB,IAAjB;AACD;AACF;;AAED,eAAW,SAAX;;AAEA,QAAG,YAAY,MAAZ,IAAsB,GAAzB,EAA8B;AAC5B,kBAAY,IAAZ,CAAiB,OAAO,MAAP,CAAc;AAC7B,gBAAQ,QAAQ,CAAR,EAAU,EAAV,CADqB;AAE7B,eAAO,SAFsB;;AAI7B,aAAK,OAAO,mBAAP,EAJwB;AAK7B,gBAAQ;AACN,aAAK,KAAK,MAAL,KAAgB,OAAhB,GAAwB,CAAzB,GAA8B,CAD5B;AAEN,aAAK,KAAK,MAAL,KAAgB,OAAhB,GAAwB,CAAzB,GAA8B;AAF5B,SALqB;AAS7B,cAAM;AACJ,aAAG,KAAK,MAAL,KAAgB,GAAhB,GAAsB,CAAC,KAAvB,GAA+B,KAD9B;AAEJ,aAAG,KAAK,MAAL,KAAgB,GAAhB,GAAsB,CAAC,KAAvB,GAA+B;AAF9B;AATuB,OAAd,CAAjB;AAcD;AACF;;AAED,MAAG,CAAC,MAAM,QAAV,EAAoB;AAClB,eAAW,WAAX,EAAwB,IAAxB;AACA;AACD,GAHD,MAGO;AACL;AACD;AACF;;AAED,SAAS,MAAT,GAAkB;AAChB,aAAW,IAAX;AACA,SAAO,IAAP;AACA,WAAS,cAAT,CAAwB,eAAxB,EAAyC,KAAzC,CAA+C,OAA/C,GAAyD,MAAzD;AACA,WAAS,cAAT,CAAwB,QAAxB,EAAkC,KAAlC,CAAwC,OAAxC,GAAkD,OAAlD;AACD;;AAED,OAAO,OAAP,GAAiB;AACf,cAAY,UADG;AAEf,eAAa;AAFE,CAAjB;;;AC9IA,SAAS,GAAT,CAAa,QAAb,EAAuB,SAAvB,EAAkC;AAChC,SAAO,EAAE,GAAG,SAAS,CAAT,GAAa,UAAU,CAA5B,EAA+B,GAAG,SAAS,CAAT,GAAa,UAAU,CAAzD,EAAP;AACD;;AAED,SAAS,GAAT,CAAa,QAAb,EAAuB,SAAvB,EAAkC;AAChC,SAAO,EAAE,GAAG,SAAS,CAAT,GAAa,UAAU,CAA5B,EAA+B,GAAG,SAAS,CAAT,GAAa,UAAU,CAAzD,EAAP;AACD;;AAED,SAAS,KAAT,CAAe,QAAf,EAAyB,SAAzB,EAAoC;AAClC,SAAO,EAAE,GAAG,SAAS,CAAT,GAAa,UAAU,CAA5B,EAA+B,GAAG,SAAS,CAAT,GAAa,UAAU,CAAzD,EAAP;AACD;;AAED,OAAO,OAAP,GAAiB;AACf,OAAK,GADU;AAEf,OAAK,GAFU;AAGf,SAAO;AAHQ,CAAjB","file":"bullet.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function (element) {\n  var self = this\n  var Combokeys = self.constructor\n\n  /**\n   * a list of all the callbacks setup via Combokeys.bind()\n   *\n   * @type {Object}\n   */\n  self.callbacks = {}\n\n  /**\n   * direct map of string combinations to callbacks used for trigger()\n   *\n   * @type {Object}\n   */\n  self.directMap = {}\n\n  /**\n   * keeps track of what level each sequence is at since multiple\n   * sequences can start out with the same sequence\n   *\n   * @type {Object}\n   */\n  self.sequenceLevels = {}\n\n  /**\n   * variable to store the setTimeout call\n   *\n   * @type {null|number}\n   */\n  self.resetTimer = null\n\n  /**\n   * temporary state where we will ignore the next keyup\n   *\n   * @type {boolean|string}\n   */\n  self.ignoreNextKeyup = false\n\n  /**\n   * temporary state where we will ignore the next keypress\n   *\n   * @type {boolean}\n   */\n  self.ignoreNextKeypress = false\n\n  /**\n   * are we currently inside of a sequence?\n   * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n   *\n   * @type {boolean|string}\n   */\n  self.nextExpectedAction = false\n\n  self.element = element\n\n  self.addEvents()\n\n  Combokeys.instances.push(self)\n  return self\n}\n\nmodule.exports.prototype.bind = require('./prototype/bind')\nmodule.exports.prototype.bindMultiple = require('./prototype/bindMultiple')\nmodule.exports.prototype.unbind = require('./prototype/unbind')\nmodule.exports.prototype.trigger = require('./prototype/trigger')\nmodule.exports.prototype.reset = require('./prototype/reset.js')\nmodule.exports.prototype.stopCallback = require('./prototype/stopCallback')\nmodule.exports.prototype.handleKey = require('./prototype/handleKey')\nmodule.exports.prototype.addEvents = require('./prototype/addEvents')\nmodule.exports.prototype.bindSingle = require('./prototype/bindSingle')\nmodule.exports.prototype.getKeyInfo = require('./prototype/getKeyInfo')\nmodule.exports.prototype.pickBestAction = require('./prototype/pickBestAction')\nmodule.exports.prototype.getReverseMap = require('./prototype/getReverseMap')\nmodule.exports.prototype.getMatches = require('./prototype/getMatches')\nmodule.exports.prototype.resetSequences = require('./prototype/resetSequences')\nmodule.exports.prototype.fireCallback = require('./prototype/fireCallback')\nmodule.exports.prototype.bindSequence = require('./prototype/bindSequence')\nmodule.exports.prototype.resetSequenceTimer = require('./prototype/resetSequenceTimer')\nmodule.exports.prototype.detach = require('./prototype/detach')\n\nmodule.exports.instances = []\nmodule.exports.reset = require('./reset')\n\n/**\n * variable to store the flipped version of MAP from above\n * needed to check if we should use keypress or not when no action\n * is specified\n *\n * @type {Object|undefined}\n */\nmodule.exports.REVERSE_MAP = null\n","/* eslint-env node, browser */\n'use strict'\nmodule.exports = function () {\n  var self = this\n  var on = require('./dom-event')\n  var element = self.element\n\n  self.eventHandler = require('./handleKeyEvent').bind(self)\n\n  on(element, 'keypress', self.eventHandler)\n  on(element, 'keydown', self.eventHandler)\n  on(element, 'keyup', self.eventHandler)\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * binds an event to Combokeys\n *\n * can be a single key, a combination of keys separated with +,\n * an array of keys, or a sequence of keys separated by spaces\n *\n * be sure to list the modifier keys first to make sure that the\n * correct key ends up getting bound (the last key in the pattern)\n *\n * @param {string|Array} keys\n * @param {Function} callback\n * @param {string=} action - \"keypress\", \"keydown\", or \"keyup\"\n * @returns void\n */\nmodule.exports = function (keys, callback, action) {\n  var self = this\n\n  keys = keys instanceof Array ? keys : [keys]\n  self.bindMultiple(keys, callback, action)\n  return self\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds multiple combinations to the same callback\n *\n * @param {Array} combinations\n * @param {Function} callback\n * @param {string|undefined} action\n * @returns void\n */\nmodule.exports = function (combinations, callback, action) {\n  var self = this\n\n  for (var j = 0; j < combinations.length; ++j) {\n    self.bindSingle(combinations[j], callback, action)\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a key sequence to an event\n *\n * @param {string} combo - combo specified in bind call\n * @param {Array} keys\n * @param {Function} callback\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (combo, keys, callback, action) {\n  var self = this\n\n  // start off by adding a sequence level record for this combination\n  // and setting the level to 0\n  self.sequenceLevels[combo] = 0\n\n  /**\n   * callback to increase the sequence level for this sequence and reset\n   * all other sequences that were active\n   *\n   * @param {string} nextAction\n   * @returns {Function}\n   */\n  function increaseSequence (nextAction) {\n    return function () {\n      self.nextExpectedAction = nextAction\n      ++self.sequenceLevels[combo]\n      self.resetSequenceTimer()\n    }\n  }\n\n  /**\n   * wraps the specified callback inside of another function in order\n   * to reset all sequence counters as soon as this sequence is done\n   *\n   * @param {Event} e\n   * @returns void\n   */\n  function callbackAndReset (e) {\n    var characterFromEvent\n    self.fireCallback(callback, e, combo)\n\n    // we should ignore the next key up if the action is key down\n    // or keypress.  this is so if you finish a sequence and\n    // release the key the final key will not trigger a keyup\n    if (action !== 'keyup') {\n      characterFromEvent = require('../../helpers/characterFromEvent')\n      self.ignoreNextKeyup = characterFromEvent(e)\n    }\n\n    // weird race condition if a sequence ends with the key\n    // another sequence begins with\n    setTimeout(\n      function () {\n        self.resetSequences()\n      },\n      10\n    )\n  }\n\n  // loop through keys one at a time and bind the appropriate callback\n  // function.  for any key leading up to the final one it should\n  // increase the sequence. after the final, it should reset all sequences\n  //\n  // if an action is specified in the original bind call then that will\n  // be used throughout.  otherwise we will pass the action that the\n  // next key in the sequence should match.  this allows a sequence\n  // to mix and match keypress and keydown events depending on which\n  // ones are better suited to the key provided\n  for (var j = 0; j < keys.length; ++j) {\n    var isFinal = j + 1 === keys.length\n    var wrappedCallback = isFinal ? callbackAndReset : increaseSequence(action || self.getKeyInfo(keys[j + 1]).action)\n    self.bindSingle(keys[j], wrappedCallback, action, combo, j)\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a single keyboard combination\n *\n * @param {string} combination\n * @param {Function} callback\n * @param {string=} action\n * @param {string=} sequenceName - name of sequence if part of sequence\n * @param {number=} level - what part of the sequence the command is\n * @returns void\n */\nmodule.exports = function (combination, callback, action, sequenceName, level) {\n  var self = this\n\n  // store a direct mapped reference for use with Combokeys.trigger\n  self.directMap[combination + ':' + action] = callback\n\n  // make sure multiple spaces in a row become a single space\n  combination = combination.replace(/\\s+/g, ' ')\n\n  var sequence = combination.split(' ')\n  var info\n\n  // if this pattern is a sequence of keys then run through this method\n  // to reprocess each pattern one key at a time\n  if (sequence.length > 1) {\n    self.bindSequence(combination, sequence, callback, action)\n    return\n  }\n\n  info = self.getKeyInfo(combination, action)\n\n  // make sure to initialize array if this is the first time\n  // a callback is added for this key\n  self.callbacks[info.key] = self.callbacks[info.key] || []\n\n  // remove an existing match if there is one\n  self.getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level)\n\n  // add this call back to the array\n  // if it is a sequence put it at the beginning\n  // if not put it at the end\n  //\n  // this is important because the way these are processed expects\n  // the sequence ones to come first\n  self.callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n    callback: callback,\n    modifiers: info.modifiers,\n    action: info.action,\n    seq: sequenceName,\n    level: level,\n    combo: combination\n  })\n}\n","var off = require('./dom-event').off\nmodule.exports = function () {\n  var self = this\n  var element = self.element\n\n  off(element, 'keypress', self.eventHandler)\n  off(element, 'keydown', self.eventHandler)\n  off(element, 'keyup', self.eventHandler)\n}\n","module.exports = on\nmodule.exports.on = on\nmodule.exports.off = off\n\nfunction on (element, event, callback, capture) {\n  !element.addEventListener && (event = 'on' + event)\n  ;(element.addEventListener || element.attachEvent).call(element, event, callback, capture)\n  return callback\n}\n\nfunction off (element, event, callback, capture) {\n  !element.removeEventListener && (event = 'on' + event)\n  ;(element.removeEventListener || element.detachEvent).call(element, event, callback, capture)\n  return callback\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * actually calls the callback function\n *\n * if your callback function returns false this will use the jquery\n * convention - prevent default and stop propogation on the event\n *\n * @param {Function} callback\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (callback, e, combo, sequence) {\n  var self = this\n  var preventDefault\n  var stopPropagation\n\n  // if this event should not happen stop here\n  if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n    return\n  }\n\n  if (callback(e, combo) === false) {\n    preventDefault = require('../../helpers/preventDefault')\n    preventDefault(e)\n    stopPropagation = require('../../helpers/stopPropagation')\n    stopPropagation(e)\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Gets info for a specific key combination\n *\n * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n * @param  {string=} action\n * @returns {Object}\n */\nmodule.exports = function (combination, action) {\n  var self = this\n  var keysFromString\n  var keys\n  var key\n  var j\n  var modifiers = []\n  var SPECIAL_ALIASES\n  var SHIFT_MAP\n  var isModifier\n\n  keysFromString = require('../../helpers/keysFromString')\n  // take the keys from this pattern and figure out what the actual\n  // pattern is all about\n  keys = keysFromString(combination)\n\n  SPECIAL_ALIASES = require('../../helpers/special-aliases')\n  SHIFT_MAP = require('../../helpers/shift-map')\n  isModifier = require('../../helpers/isModifier')\n  for (j = 0; j < keys.length; ++j) {\n    key = keys[j]\n\n    // normalize key names\n    if (SPECIAL_ALIASES[key]) {\n      key = SPECIAL_ALIASES[key]\n    }\n\n    // if this is not a keypress event then we should\n    // be smart about using shift keys\n    // this will only work for US keyboards however\n    if (action && action !== 'keypress' && SHIFT_MAP[key]) {\n      key = SHIFT_MAP[key]\n      modifiers.push('shift')\n    }\n\n    // if this key is a modifier then add it to the list of modifiers\n    if (isModifier(key)) {\n      modifiers.push(key)\n    }\n  }\n\n  // depending on what the key combination is\n  // we will try to pick the best event for it\n  action = self.pickBestAction(key, modifiers, action)\n\n  return {\n    key: key,\n    modifiers: modifiers,\n    action: action\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * finds all callbacks that match based on the keycode, modifiers,\n * and action\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event|Object} e\n * @param {string=} sequenceName - name of the sequence we are looking for\n * @param {string=} combination\n * @param {number=} level\n * @returns {Array}\n */\nmodule.exports = function (character, modifiers, e, sequenceName, combination, level) {\n  var self = this\n  var j\n  var callback\n  var matches = []\n  var action = e.type\n  var isModifier\n  var modifiersMatch\n\n  if (\n      action === 'keypress' &&\n      // Firefox fires keypress for arrows\n      !(e.code && e.code.slice(0, 5) === 'Arrow')\n  ) {\n    // 'any-character' callbacks are only on `keypress`\n    var anyCharCallbacks = self.callbacks['any-character'] || []\n    anyCharCallbacks.forEach(function (callback) {\n      matches.push(callback)\n    })\n  }\n\n  if (!self.callbacks[character]) { return matches }\n\n  isModifier = require('../../helpers/isModifier')\n  // if a modifier key is coming up on its own we should allow it\n  if (action === 'keyup' && isModifier(character)) {\n    modifiers = [character]\n  }\n\n  // loop through all callbacks for the key that was pressed\n  // and see if any of them match\n  for (j = 0; j < self.callbacks[character].length; ++j) {\n    callback = self.callbacks[character][j]\n\n    // if a sequence name is not specified, but this is a sequence at\n    // the wrong level then move onto the next match\n    if (!sequenceName && callback.seq && self.sequenceLevels[callback.seq] !== callback.level) {\n      continue\n    }\n\n    // if the action we are looking for doesn't match the action we got\n    // then we should keep going\n    if (action !== callback.action) {\n      continue\n    }\n\n    // if this is a keypress event and the meta key and control key\n    // are not pressed that means that we need to only look at the\n    // character, otherwise check the modifiers as well\n    //\n    // chrome will not fire a keypress if meta or control is down\n    // safari will fire a keypress if meta or meta+shift is down\n    // firefox will fire a keypress if meta or control is down\n    modifiersMatch = require('./modifiersMatch')\n    if ((action === 'keypress' && !e.metaKey && !e.ctrlKey) || modifiersMatch(modifiers, callback.modifiers)) {\n      // when you bind a combination or sequence a second time it\n      // should overwrite the first one.  if a sequenceName or\n      // combination is specified in this call it does just that\n      //\n      // @todo make deleting its own method?\n      var deleteCombo = !sequenceName && callback.combo === combination\n      var deleteSequence = sequenceName && callback.seq === sequenceName && callback.level === level\n      if (deleteCombo || deleteSequence) {\n        self.callbacks[character].splice(j, 1)\n      }\n\n      matches.push(callback)\n    }\n  }\n\n  return matches\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * reverses the map lookup so that we can look for specific keys\n * to see what can and can't use keypress\n *\n * @return {Object}\n */\nmodule.exports = function () {\n  var self = this\n  var constructor = self.constructor\n  var SPECIAL_KEYS_MAP\n\n  if (!constructor.REVERSE_MAP) {\n    constructor.REVERSE_MAP = {}\n    SPECIAL_KEYS_MAP = require('../../helpers/special-keys-map')\n    for (var key in SPECIAL_KEYS_MAP) {\n      // pull out the numeric keypad from here cause keypress should\n      // be able to detect the keys from the character\n      if (key > 95 && key < 112) {\n        continue\n      }\n\n      if (SPECIAL_KEYS_MAP.hasOwnProperty(key)) {\n        constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]] = key\n      }\n    }\n  }\n  return constructor.REVERSE_MAP\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a character key event\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (character, modifiers, e) {\n  var self = this\n  var callbacks\n  var j\n  var doNotReset = {}\n  var maxLevel = 0\n  var processedSequenceCallback = false\n  var isModifier\n  var ignoreThisKeypress\n\n  callbacks = self.getMatches(character, modifiers, e)\n  // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n  for (j = 0; j < callbacks.length; ++j) {\n    if (callbacks[j].seq) {\n      maxLevel = Math.max(maxLevel, callbacks[j].level)\n    }\n  }\n\n  // loop through matching callbacks for this key event\n  for (j = 0; j < callbacks.length; ++j) {\n    // fire for all sequence callbacks\n    // this is because if for example you have multiple sequences\n    // bound such as \"g i\" and \"g t\" they both need to fire the\n    // callback for matching g cause otherwise you can only ever\n    // match the first one\n    if (callbacks[j].seq) {\n      // only fire callbacks for the maxLevel to prevent\n      // subsequences from also firing\n      //\n      // for example 'a option b' should not cause 'option b' to fire\n      // even though 'option b' is part of the other sequence\n      //\n      // any sequences that do not match here will be discarded\n      // below by the resetSequences call\n      if (callbacks[j].level !== maxLevel) {\n        continue\n      }\n\n      processedSequenceCallback = true\n\n      // keep a list of which sequences were matches for later\n      doNotReset[callbacks[j].seq] = 1\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo, callbacks[j].seq)\n      continue\n    }\n\n    // if there were no sequence matches but we are still here\n    // that means this is a regular match so we should fire that\n    if (!processedSequenceCallback) {\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo)\n    }\n  }\n\n  // if the key you pressed matches the type of sequence without\n  // being a modifier (ie \"keyup\" or \"keypress\") then we should\n  // reset all sequences that were not matched by this event\n  //\n  // this is so, for example, if you have the sequence \"h a t\" and you\n  // type \"h e a r t\" it does not match.  in this case the \"e\" will\n  // cause the sequence to reset\n  //\n  // modifier keys are ignored because you can have a sequence\n  // that contains modifiers such as \"enter ctrl+space\" and in most\n  // cases the modifier key will be pressed before the next key\n  //\n  // also if you have a sequence such as \"ctrl+b a\" then pressing the\n  // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n  //\n  // the \"keydown\" is expected when there is a modifier, but the\n  // \"keypress\" ends up matching the nextExpectedAction since it occurs\n  // after and that causes the sequence to reset\n  //\n  // we ignore keypresses in a sequence that directly follow a keydown\n  // for the same character\n  ignoreThisKeypress = e.type === 'keypress' && self.ignoreNextKeypress\n  isModifier = require('../../helpers/isModifier')\n  if (e.type === self.nextExpectedAction && !isModifier(character) && !ignoreThisKeypress) {\n    self.resetSequences(doNotReset)\n  }\n\n  self.ignoreNextKeypress = processedSequenceCallback && e.type === 'keydown'\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a keydown event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  var self = this\n  var characterFromEvent\n  var eventModifiers\n\n  // normalize e.which for key events\n  // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n  if (typeof e.which !== 'number') {\n    e.which = e.keyCode\n  }\n  characterFromEvent = require('../../helpers/characterFromEvent')\n  var character = characterFromEvent(e)\n\n  // no character found then stop\n  if (character === undefined) {\n    return\n  }\n\n  // need to use === for the character check because the character can be 0\n  if (e.type === 'keyup' && self.ignoreNextKeyup === character) {\n    self.ignoreNextKeyup = false\n    return\n  }\n\n  eventModifiers = require('../../helpers/eventModifiers')\n  self.handleKey(character, eventModifiers(e), e)\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * checks if two arrays are equal\n *\n * @param {Array} modifiers1\n * @param {Array} modifiers2\n * @returns {boolean}\n */\nmodule.exports = function (modifiers1, modifiers2) {\n  return modifiers1.sort().join(',') === modifiers2.sort().join(',')\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * picks the best action based on the key combination\n *\n * @param {string} key - character for key\n * @param {Array} modifiers\n * @param {string=} action passed in\n */\nmodule.exports = function (key, modifiers, action) {\n  var self = this\n\n  // if no action was picked in we should try to pick the one\n  // that we think would work best for this key\n  if (!action) {\n    action = self.getReverseMap()[key] ? 'keydown' : 'keypress'\n  }\n\n  // modifier keys don't work as expected with keypress,\n  // switch to keydown\n  if (action === 'keypress' && modifiers.length) {\n    action = 'keydown'\n  }\n\n  return action\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets the library back to its initial state. This is useful\n * if you want to clear out the current keyboard shortcuts and bind\n * new ones - for example if you switch to another page\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n  self.callbacks = {}\n  self.directMap = {}\n  return this\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * called to set a 1 second timeout on the specified sequence\n *\n * this is so after each key press in the sequence you have 1 second\n * to press the next key before you have to start over\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n\n  clearTimeout(self.resetTimer)\n  self.resetTimer = setTimeout(\n    function () {\n      self.resetSequences()\n    },\n    1000\n  )\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets all sequence counters except for the ones passed in\n *\n * @param {Object} doNotReset\n * @returns void\n */\nmodule.exports = function (doNotReset) {\n  var self = this\n\n  doNotReset = doNotReset || {}\n\n  var activeSequences = false\n  var key\n\n  for (key in self.sequenceLevels) {\n    if (doNotReset[key]) {\n      activeSequences = true\n      continue\n    }\n    self.sequenceLevels[key] = 0\n  }\n\n  if (!activeSequences) {\n    self.nextExpectedAction = false\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n* should we stop this event before firing off callbacks\n*\n* @param {Event} e\n* @param {Element} element\n* @return {boolean}\n*/\nmodule.exports = function (e, element) {\n  // if the element has the class \"combokeys\" then no need to stop\n  if ((' ' + element.className + ' ').indexOf(' combokeys ') > -1) {\n    return false\n  }\n\n  var tagName = element.tagName.toLowerCase()\n\n  // stop for input, select, and textarea\n  return tagName === 'input' || tagName === 'select' || tagName === 'textarea' || element.isContentEditable\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * triggers an event that has already been bound\n *\n * @param {string} keys\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n  if (self.directMap[keys + ':' + action]) {\n    self.directMap[keys + ':' + action]({}, keys)\n  }\n  return this\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * unbinds an event to Combokeys\n *\n * the unbinding sets the callback function of the specified key combo\n * to an empty function and deletes the corresponding key in the\n * directMap dict.\n *\n * TODO: actually remove this from the callbacks dictionary instead\n * of binding an empty function\n *\n * the keycombo+action has to be exactly the same as\n * it was defined in the bind method\n *\n * @param {string|Array} keys\n * @param {string} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n\n  return self.bind(keys, function () {}, action)\n}\n","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function () {\n  var self = this\n\n  self.instances.forEach(function (combokeys) {\n    combokeys.reset()\n  })\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes the event and returns the key character\n *\n * @param {Event} e\n * @return {string}\n */\nmodule.exports = function (e) {\n  var SPECIAL_KEYS_MAP,\n    SPECIAL_CHARACTERS_MAP\n  SPECIAL_KEYS_MAP = require('./special-keys-map')\n  SPECIAL_CHARACTERS_MAP = require('./special-characters-map')\n\n  // for keypress events we should return the character as is\n  if (e.type === 'keypress') {\n    var character = String.fromCharCode(e.which)\n\n    // if the shift key is not pressed then it is safe to assume\n    // that we want the character to be lowercase.  this means if\n    // you accidentally have caps lock on then your key bindings\n    // will continue to work\n    //\n    // the only side effect that might not be desired is if you\n    // bind something like 'A' cause you want to trigger an\n    // event when capital A is pressed caps lock will no longer\n    // trigger the event.  shift+a will though.\n    if (!e.shiftKey) {\n      character = character.toLowerCase()\n    }\n\n    return character\n  }\n\n  // for non keypress events the special maps are needed\n  if (SPECIAL_KEYS_MAP[e.which] !== undefined) {\n    return SPECIAL_KEYS_MAP[e.which]\n  }\n\n  if (SPECIAL_CHARACTERS_MAP[e.which] !== undefined) {\n    return SPECIAL_CHARACTERS_MAP[e.which]\n  }\n\n  // if it is not in the special map\n\n  // with keydown and keyup events the character seems to always\n  // come in as an uppercase character whether you are pressing shift\n  // or not.  we should make sure it is always lowercase for comparisons\n  return String.fromCharCode(e.which).toLowerCase()\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes a key event and figures out what the modifiers are\n *\n * @param {Event} e\n * @returns {Array}\n */\nmodule.exports = function (e) {\n  var modifiers = []\n\n  if (e.shiftKey) {\n    modifiers.push('shift')\n  }\n\n  if (e.altKey) {\n    modifiers.push('alt')\n  }\n\n  if (e.ctrlKey) {\n    modifiers.push('ctrl')\n  }\n\n  if (e.metaKey) {\n    modifiers.push('meta')\n  }\n\n  return modifiers\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * determines if the keycode specified is a modifier key or not\n *\n * @param {string} key\n * @returns {boolean}\n */\nmodule.exports = function (key) {\n  return key === 'shift' || key === 'ctrl' || key === 'alt' || key === 'meta'\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Converts from a string key combination to an array\n *\n * @param  {string} combination like \"command+shift+l\"\n * @return {Array}\n */\nmodule.exports = function (combination) {\n  if (combination === '+') {\n    return ['+']\n  }\n\n  return combination.split('+')\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * prevents default for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.preventDefault) {\n    e.preventDefault()\n    return\n  }\n\n  e.returnValue = false\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a mapping of keys that require shift on a US keypad\n * back to the non shift equivelents\n *\n * this is so you can use keyup events with these keys\n *\n * note that this will only work reliably on US keyboards\n *\n * @type {Object}\n */\nmodule.exports = {\n  '~': '`',\n  '!': '1',\n  '@': '2',\n  '#': '3',\n  '$': '4',\n  '%': '5',\n  '^': '6',\n  '&': '7',\n  '*': '8',\n  '(': '9',\n  ')': '0',\n  '_': '-',\n  '+': '=',\n  ':': ';',\n  '\"': \"'\",\n  '<': ',',\n  '>': '.',\n  '?': '/',\n  '|': '\\\\'\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a list of special strings you can use to map\n * to modifier keys when you specify your keyboard shortcuts\n *\n * @type {Object}\n */\nmodule.exports = {\n  'option': 'alt',\n  'command': 'meta',\n  'return': 'enter',\n  'escape': 'esc',\n  'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping for special characters so they can support\n *\n * this dictionary is only used incase you want to bind a\n * keyup or keydown event to one of these keys\n *\n * @type {Object}\n */\nmodule.exports = {\n  106: '*',\n  107: 'plus',\n  109: 'minus',\n  110: '.',\n  111: '/',\n  186: ';',\n  187: '=',\n  188: ',',\n  189: '-',\n  190: '.',\n  191: '/',\n  192: '`',\n  219: '[',\n  220: '\\\\',\n  221: ']',\n  222: \"'\"\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping of special keycodes to their corresponding keys\n *\n * everything in this dictionary cannot use keypress events\n * so it has to be here to map to the correct keycodes for\n * keyup/keydown events\n *\n * @type {Object}\n */\nmodule.exports = {\n  8: 'backspace',\n  9: 'tab',\n  13: 'enter',\n  16: 'shift',\n  17: 'ctrl',\n  18: 'alt',\n  20: 'capslock',\n  27: 'esc',\n  32: 'space',\n  33: 'pageup',\n  34: 'pagedown',\n  35: 'end',\n  36: 'home',\n  37: 'left',\n  38: 'up',\n  39: 'right',\n  40: 'down',\n  45: 'ins',\n  46: 'del',\n  91: 'meta',\n  93: 'meta',\n  173: 'minus',\n  187: 'plus',\n  189: 'minus',\n  224: 'meta'\n}\n\n/**\n * loop through the f keys, f1 to f19 and add them to the map\n * programatically\n */\nfor (var i = 1; i < 20; ++i) {\n  module.exports[111 + i] = 'f' + i\n}\n\n/**\n * loop through to map numbers on the numeric keypad\n */\nfor (i = 0; i <= 9; ++i) {\n  module.exports[i + 96] = i\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * stops propogation for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.stopPropagation) {\n    e.stopPropagation()\n    return\n  }\n\n  e.cancelBubble = true\n}\n","var randInt = require('./fab/randInt');\n\nvar canvas = document.getElementById('canvas');\nvar c = canvas.getContext('2d');\n\nvar imgs = {\n  thisIsYou: document.getElementById('imgthisIsYou')\n};\n\nmodule.exports = {\n  getSize: function() {\n    return { x: window.innerWidth, y: window.innerHeight };\n  },\n  getCenter: function() {\n    return { x: window.innerWidth/2, y: window.innerHeight/2 };\n  },\n  getRandomBoundPoint: function() {\n    if(Math.random() >= 0.5) {\n      return { x: randInt(0,window.innerWidth), y: 0 };\n    }\n    return { x: 0, y: randInt(0,window.innerHeight) };\n  },\n\n  resize: function() {\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n  },\n\n  hide: function() {\n    canvas.style.display = 'none';\n  },\n\n  img: function(imgStr, x,y) {\n    c.drawImage(imgs[imgStr],x,y);\n  },\n\n  circle: function(entity) {\n    c.fillStyle = entity.color;\n    c.beginPath();\n    c.arc(entity.pos.x, entity.pos.y, entity.radius, 0, 2*Math.PI);\n    c.fill();\n  },\n\n  outlineCircle: function(entity) {\n    c.fillStyle = entity.color;\n    c.strokeStyle = entity.strokeColor;\n    c.beginPath();\n    c.arc(entity.pos.x, entity.pos.y, entity.radius, 0, 2*Math.PI);\n    c.fill();\n    c.stroke();\n  },\n\n  clear: function() {\n    c.fillStyle = 'white';\n    c.fillRect(0,0,canvas.width,canvas.height);\n  },\n\n  text: function(pos,text,size,color) {\n    c.fillStyle = color;\n    c.font = size.toString() + 'px Helvetica';\n    c.fillStyle(text, pos.x, pos.y);\n  }\n};\n","var vec2 = require('./vec2');\n\nvar distanceCheck = require('./fab/distanceCheck');\n\nvar squareCheck = require('./fab/squareCheck');\n\nfunction limit1DVel(vel, maxVel) {\n  if(vel > 0) {\n    return vel >= maxVel ? maxVel : vel;\n  }\n  return vel <= -maxVel ? -maxVel: vel;\n}\n\nfunction limitVel(entity) {\n  return {\n    x: limit1DVel(entity.vel.x, entity.maxVel.x),\n    y: limit1DVel(entity.vel.y, entity.maxVel.y)\n  };\n}\n\nmodule.exports = {\n  create: function(frag) {\n    return {\n      radius: frag.radius || 4,\n      color: frag.color || 'black',\n\n      pos: frag.pos || {x: 0, y: 0},\n      posOffset: frag.posOffset || {x: 0, y: 0},\n\n      vel: frag.vel || {x: 0, y: 0},\n      maxVel: frag.maxVel || {x: 0, y: 0},\n\n      acel: frag.acel || {x: 0, y: 0}\n    };\n  },\n\n  basePlayer: function(center) {\n    return this.create({\n      radius: 5,\n      color: 'white',\n      outlineColor: 'black',\n\n      pos: center,\n\n      maxVel: {x: 3, y: 3},\n      acel: {x: 0.4, y: 0.4}\n    });\n  },\n\n  checkCollision: function(ent1, ent2) {\n    return squareCheck(ent1, ent2) && distanceCheck(ent1, ent2);\n  },\n\n  acel: function(entity) {\n    entity.vel.y += entity.acel.y;\n    entity.vel.x += entity.acel.x;\n  },\n\n  move: function(entity) {\n    entity.vel = limitVel(entity);\n\n    entity.pos = vec2.add(entity.pos, entity.vel);\n  },\n\n  moveWithKeyboard: function(entity, keyboard) {\n    if(keyboard.up) {\n      entity.vel.y -= entity.acel.y;\n    }\n    if(keyboard.down) {\n      entity.vel.y += entity.acel.y;\n    }\n    if(keyboard.left) {\n      entity.vel.x -= entity.acel.x;\n    }\n    if(keyboard.right) {\n      entity.vel.x += entity.acel.x;\n    }\n\n    this.move(entity);\n  },\n\n  moveWithPlayer: function(entity, basePlayer) {\n    entity.pos = vec2.sub(basePlayer.pos, entity.posOffset);\n  },\n\n  swapAround: function(entity, canvasSize) {\n    // Y Axis\n    if(entity.pos.y > canvasSize.y) {\n      entity.pos.y -= canvasSize.y;\n    }\n    else if(entity.pos.y < 0) {\n      entity.pos.y += canvasSize.y;\n    }\n\n    // X Axis\n    if(entity.pos.x > canvasSize.x) {\n      entity.pos.x -= canvasSize.x;\n    }\n    else if(entity.pos.x < 0) {\n      entity.pos.x += canvasSize.x;\n    }\n  }\n};\n","var pytha = require('./pytha');\n\nmodule.exports = function(ent1, ent2) {\n  var pythaSol = pytha(ent1.pos, ent2.pos);\n  return pythaSol < (ent1.radius + ent2.radius);\n};\n","module.exports = function(pos1, pos2) {\n  return Math.sqrt(\n    ((pos1.x - pos2.x) * (pos1.x - pos2.x)) +\n    ((pos1.y - pos2.y) * (pos1.y - pos2.y))\n  );\n};\n","module.exports = function() {\n  return '#'+Math.random().toString(16).substr(-6);\n};\n","module.exports = function(min,max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n};\n","module.exports = function(ent1, ent2) {\n  return !(\n    (ent1.pos.x + ent1.radius) < (ent2.pos.x - ent2.radius) ||\n    (ent1.pos.y + ent1.radius) < (ent2.pos.y - ent2.radius) ||\n    (ent1.pos.x - ent1.radius) > (ent2.pos.x + ent2.radius) ||\n    (ent1.pos.y - ent1.radius) > (ent2.pos.y + ent2.radius)\n  );\n};\n","document.addEventListener(\"DOMContentLoaded\", function(event) {\n  var update = require('./update');\n\n  var menu = document.getElementById('menu');\n  var startButton = document.getElementById('start');\n  var scoreBoards = document.getElementById('scoreBoards');\n\n  startButton.onclick = function() {\n    menu.style.display = 'none';\n    scoreBoards.style.display = 'block';\n\n    update.renderLoop();\n    update.secondsLoop();\n  };\n});\n","var Combokeys = require('combokeys');\nvar canvasInput = new Combokeys(document.documentElement);\n\nvar kb = {\n  up: false, down: false, left: false, right: false\n};\n\ncanvasInput.bind('up', function()    { kb.up = true;     }, 'keydown');\ncanvasInput.bind('up', function()    { kb.up = false;    }, 'keyup');\ncanvasInput.bind('down', function()  { kb.down = true;   }, 'keydown');\ncanvasInput.bind('down', function()  { kb.down = false;  }, 'keyup');\ncanvasInput.bind('left', function()  { kb.left = true;   }, 'keydown');\ncanvasInput.bind('left', function()  { kb.left = false;  }, 'keyup');\ncanvasInput.bind('right', function() { kb.right = true;  }, 'keydown');\ncanvasInput.bind('right', function() { kb.right = false; }, 'keyup');\n\nmodule.exports = kb;\n","var dom = {\n  scoreBoards: document.getElementById('scoreBoards'),\n  avoidingSeconds: document.getElementById('secondsAvoided'),\n  secondsLeft: document.getElementById('secondsLeft'),\n  amountCollected: document.getElementById('amountCollected')\n};\n\nmodule.exports = {\n  avoidingSeconds: 0,\n  secondsLeft: 20,\n  amountCollected: 0,\n\n  updateDOM: function() {\n    dom.avoidingSeconds.innerHTML = this.avoidingSeconds;\n    dom.secondsLeft.innerHTML = this.secondsLeft;\n    dom.amountCollected.innerHTML = this.amountCollected;\n  },\n\n  hide: function() {\n    dom.scoreBoards.style.display = 'none';\n  }\n};\n","module.exports = {\n  avoiding: true,\n  finished: false,\n\n  hasMoved: false\n};\n","var vec2 = require('./vec2.js');\nvar randInt = require('./fab/randInt');\nvar randHex = require('./fab/randHex');\n\nvar entity = require('./entity');\nvar canvas = require('./canvas');\nvar keyboard = require('./keyboard');\n\nvar state = require('./state');\n\nvar scoreBoard = require('./scoreBoard');\n\nvar playerArray = [];\nvar bulletArray = [];\n\nvar frame = -1;\nvar seconds = -1;\n\ncanvas.resize();\n\nvar basePlayer = entity.basePlayer(canvas.getCenter());\n\nfunction checkCollision(playerEntity) {\n  for(var b=0, bLen=bulletArray.length; b < bLen; b++) {\n    if(bulletArray[b] && entity.checkCollision(playerEntity,bulletArray[b])) {\n      let bulletToMove = bulletArray[b];\n\n      playerArray.push(entity.create({\n        radius: bulletToMove.radius,\n        color: bulletToMove.color,\n        pos: bulletToMove.pos,\n        posOffset: vec2.sub(basePlayer.pos, bulletToMove.pos)\n      }));\n\n      bulletArray.splice(b,1);\n\n      if(state.avoiding) {\n        state.avoiding = false;\n        document.getElementById('avoidBoard').style.opacity = '0.25';\n        document.getElementById('collectBoard').style.display = 'block';\n      }\n\n      scoreBoard.amountCollected++;\n      scoreBoard.updateDOM();\n    }\n  }\n}\n\nfunction renderLoop() {\n  frame++;\n  canvas.clear();\n\n  var canvasSize = canvas.getSize();\n\n  if(!state.hasMoved) {\n    canvas.img('thisIsYou',canvasSize.x / 2 - (70),canvasSize.y / 2 - (123));\n    if(keyboard.up || keyboard.down || keyboard.left || keyboard.right) {\n      state.hasMoved = true;\n    }\n  }\n\n  for(var i=0; i < bulletArray.length; i++) {\n    if(bulletArray[i]) {\n      let bulletEntity = bulletArray[i];\n\n      entity.move(bulletEntity);\n      entity.acel(bulletEntity);\n      entity.swapAround(bulletEntity, canvasSize);\n\n      canvas.circle(bulletEntity);\n    }\n  }\n\n  entity.moveWithKeyboard(basePlayer, keyboard);\n  entity.swapAround(basePlayer, canvasSize);\n  canvas.outlineCircle(basePlayer);\n  checkCollision(basePlayer);\n\n  for(var p=0; p < playerArray.length; p++) {\n    let playerEntity = playerArray[p];\n\n    entity.moveWithPlayer(playerEntity, basePlayer);\n    entity.swapAround(playerEntity, canvasSize);\n\n    canvas.circle(playerEntity);\n    checkCollision(playerEntity);\n  }\n\n  if(!state.finished) {\n    window.requestAnimationFrame(renderLoop);\n  }\n}\n\nfunction secondsLoop() {\n  seconds++;\n\n  if(state.hasMoved) {\n    if(state.avoiding) {\n      scoreBoard.avoidingSeconds++;\n    } else {\n      scoreBoard.secondsLeft--;\n\n      if(scoreBoard.secondsLeft <= 0) {\n        state.finished = true;\n      }\n    }\n\n    scoreBoard.updateDOM();\n\n    if(bulletArray.length <= 130) {\n      bulletArray.push(entity.create({\n        radius: randInt(7,14),\n        color: randHex(),\n\n        pos: canvas.getRandomBoundPoint(),\n        maxVel: {\n          x: ((Math.random() * seconds/7) + 1),\n          y: ((Math.random() * seconds/7) + 1)\n        },\n        acel: {\n          x: Math.random() < 0.5 ? -0.005 : 0.005,\n          y: Math.random() < 0.5 ? -0.005 : 0.005\n        }\n      }));\n    }\n  }\n\n  if(!state.finished) {\n    setTimeout(secondsLoop, 1000);\n    //finish();\n  } else {\n    finish();\n  }\n}\n\nfunction finish() {\n  scoreBoard.hide();\n  canvas.hide();\n  document.getElementById('menuContainer').style.display = 'none';\n  document.getElementById('finish').style.display = 'block';\n}\n\nmodule.exports = {\n  renderLoop: renderLoop,\n  secondsLoop: secondsLoop\n};\n","function add(firstVec, secondVec) {\n  return { x: firstVec.x + secondVec.x, y: firstVec.y + secondVec.y };\n}\n\nfunction sub(firstVec, secondVec) {\n  return { x: firstVec.x - secondVec.x, y: firstVec.y - secondVec.y };\n}\n\nfunction multi(firstVec, secondVec) {\n  return { x: firstVec.x * secondVec.x, y: firstVec.y * secondVec.y };\n}\n\nmodule.exports = {\n  add: add,\n  sub: sub,\n  multi: multi\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9hZGRFdmVudHMuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvYmluZC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9iaW5kTXVsdGlwbGUuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvYmluZFNlcXVlbmNlLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2JpbmRTaW5nbGUuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvZGV0YWNoLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2RvbS1ldmVudC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9maXJlQ2FsbGJhY2suanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvZ2V0S2V5SW5mby5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9nZXRNYXRjaGVzLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2dldFJldmVyc2VNYXAuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvaGFuZGxlS2V5LmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2hhbmRsZUtleUV2ZW50LmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL21vZGlmaWVyc01hdGNoLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL3BpY2tCZXN0QWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL3Jlc2V0LmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL3Jlc2V0U2VxdWVuY2VUaW1lci5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9yZXNldFNlcXVlbmNlcy5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9zdG9wQ2FsbGJhY2suanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvdHJpZ2dlci5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS91bmJpbmQuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9yZXNldC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9jaGFyYWN0ZXJGcm9tRXZlbnQuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvZXZlbnRNb2RpZmllcnMuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvaXNNb2RpZmllci5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9rZXlzRnJvbVN0cmluZy5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9wcmV2ZW50RGVmYXVsdC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9zaGlmdC1tYXAuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvc3BlY2lhbC1hbGlhc2VzLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9oZWxwZXJzL3NwZWNpYWwtY2hhcmFjdGVycy1tYXAuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvc3BlY2lhbC1rZXlzLW1hcC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9zdG9wUHJvcGFnYXRpb24uanMiLCJzcmMvanMvY2FudmFzLmpzIiwic3JjL2pzL2VudGl0eS5qcyIsInNyYy9qcy9mYWIvZGlzdGFuY2VDaGVjay5qcyIsInNyYy9qcy9mYWIvcHl0aGEuanMiLCJzcmMvanMvZmFiL3JhbmRIZXguanMiLCJzcmMvanMvZmFiL3JhbmRJbnQuanMiLCJzcmMvanMvZmFiL3NxdWFyZUNoZWNrLmpzIiwic3JjL2pzL2luZGV4LmpzIiwic3JjL2pzL2tleWJvYXJkLmpzIiwic3JjL2pzL3Njb3JlQm9hcmQuanMiLCJzcmMvanMvc3RhdGUuanMiLCJzcmMvanMvdXBkYXRlLmpzIiwic3JjL2pzL3ZlYzIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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V0FBUyxjQUFULENBQXdCLGVBQXhCLEVBQXlDLEtBQXpDLENBQStDLE9BQS9DLEdBQXlELE1BQXpEO0FBQ0EsV0FBUyxjQUFULENBQXdCLFFBQXhCLEVBQWtDLEtBQWxDLENBQXdDLE9BQXhDLEdBQWtELE9BQWxEO0FBQ0Q7O0FBRUQsT0FBTyxPQUFQLEdBQWlCO0FBQ2YsY0FBWSxVQURHO0FBRWYsZUFBYTtBQUZFLENBQWpCOzs7QUM5SUEsU0FBUyxHQUFULENBQWEsUUFBYixFQUF1QixTQUF2QixFQUFrQztBQUNoQyxTQUFPLEVBQUUsR0FBRyxTQUFTLENBQVQsR0FBYSxVQUFVLENBQTVCLEVBQStCLEdBQUcsU0FBUyxDQUFULEdBQWEsVUFBVSxDQUF6RCxFQUFQO0FBQ0Q7O0FBRUQsU0FBUyxHQUFULENBQWEsUUFBYixFQUF1QixTQUF2QixFQUFrQztBQUNoQyxTQUFPLEVBQUUsR0FBRyxTQUFTLENBQVQsR0FBYSxVQUFVLENBQTVCLEVBQStCLEdBQUcsU0FBUyxDQUFULEdBQWEsVUFBVSxDQUF6RCxFQUFQO0FBQ0Q7O0FBRUQsU0FBUyxLQUFULENBQWUsUUFBZixFQUF5QixTQUF6QixFQUFvQztBQUNsQyxTQUFPLEVBQUUsR0FBRyxTQUFTLENBQVQsR0FBYSxVQUFVLENBQTVCLEVBQStCLEdBQUcsU0FBUyxDQUFULEdBQWEsVUFBVSxDQUF6RCxFQUFQO0FBQ0Q7O0FBRUQsT0FBTyxPQUFQLEdBQWlCO0FBQ2YsT0FBSyxHQURVO0FBRWYsT0FBSyxHQUZVO0FBR2YsU0FBTztBQUhRLENBQWpCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBDb21ib2tleXMgPSBzZWxmLmNvbnN0cnVjdG9yXG5cbiAgLyoqXG4gICAqIGEgbGlzdCBvZiBhbGwgdGhlIGNhbGxiYWNrcyBzZXR1cCB2aWEgQ29tYm9rZXlzLmJpbmQoKVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc2VsZi5jYWxsYmFja3MgPSB7fVxuXG4gIC8qKlxuICAgKiBkaXJlY3QgbWFwIG9mIHN0cmluZyBjb21iaW5hdGlvbnMgdG8gY2FsbGJhY2tzIHVzZWQgZm9yIHRyaWdnZXIoKVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc2VsZi5kaXJlY3RNYXAgPSB7fVxuXG4gIC8qKlxuICAgKiBrZWVwcyB0cmFjayBvZiB3aGF0IGxldmVsIGVhY2ggc2VxdWVuY2UgaXMgYXQgc2luY2UgbXVsdGlwbGVcbiAgICogc2VxdWVuY2VzIGNhbiBzdGFydCBvdXQgd2l0aCB0aGUgc2FtZSBzZXF1ZW5jZVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc2VsZi5zZXF1ZW5jZUxldmVscyA9IHt9XG5cbiAgLyoqXG4gICAqIHZhcmlhYmxlIHRvIHN0b3JlIHRoZSBzZXRUaW1lb3V0IGNhbGxcbiAgICpcbiAgICogQHR5cGUge251bGx8bnVtYmVyfVxuICAgKi9cbiAgc2VsZi5yZXNldFRpbWVyID0gbnVsbFxuXG4gIC8qKlxuICAgKiB0ZW1wb3Jhcnkgc3RhdGUgd2hlcmUgd2Ugd2lsbCBpZ25vcmUgdGhlIG5leHQga2V5dXBcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW58c3RyaW5nfVxuICAgKi9cbiAgc2VsZi5pZ25vcmVOZXh0S2V5dXAgPSBmYWxzZVxuXG4gIC8qKlxuICAgKiB0ZW1wb3Jhcnkgc3RhdGUgd2hlcmUgd2Ugd2lsbCBpZ25vcmUgdGhlIG5leHQga2V5cHJlc3NcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBzZWxmLmlnbm9yZU5leHRLZXlwcmVzcyA9IGZhbHNlXG5cbiAgLyoqXG4gICAqIGFyZSB3ZSBjdXJyZW50bHkgaW5zaWRlIG9mIGEgc2VxdWVuY2U/XG4gICAqIHR5cGUgb2YgYWN0aW9uIChcImtleXVwXCIgb3IgXCJrZXlkb3duXCIgb3IgXCJrZXlwcmVzc1wiKSBvciBmYWxzZVxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbnxzdHJpbmd9XG4gICAqL1xuICBzZWxmLm5leHRFeHBlY3RlZEFjdGlvbiA9IGZhbHNlXG5cbiAgc2VsZi5lbGVtZW50ID0gZWxlbWVudFxuXG4gIHNlbGYuYWRkRXZlbnRzKClcblxuICBDb21ib2tleXMuaW5zdGFuY2VzLnB1c2goc2VsZilcbiAgcmV0dXJuIHNlbGZcbn1cblxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmJpbmQgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9iaW5kJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5iaW5kTXVsdGlwbGUgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9iaW5kTXVsdGlwbGUnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLnVuYmluZCA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL3VuYmluZCcpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUudHJpZ2dlciA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL3RyaWdnZXInKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLnJlc2V0ID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvcmVzZXQuanMnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLnN0b3BDYWxsYmFjayA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL3N0b3BDYWxsYmFjaycpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUuaGFuZGxlS2V5ID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvaGFuZGxlS2V5Jylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5hZGRFdmVudHMgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9hZGRFdmVudHMnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmJpbmRTaW5nbGUgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9iaW5kU2luZ2xlJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5nZXRLZXlJbmZvID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvZ2V0S2V5SW5mbycpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUucGlja0Jlc3RBY3Rpb24gPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9waWNrQmVzdEFjdGlvbicpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUuZ2V0UmV2ZXJzZU1hcCA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2dldFJldmVyc2VNYXAnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmdldE1hdGNoZXMgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9nZXRNYXRjaGVzJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5yZXNldFNlcXVlbmNlcyA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL3Jlc2V0U2VxdWVuY2VzJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5maXJlQ2FsbGJhY2sgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9maXJlQ2FsbGJhY2snKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmJpbmRTZXF1ZW5jZSA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2JpbmRTZXF1ZW5jZScpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUucmVzZXRTZXF1ZW5jZVRpbWVyID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvcmVzZXRTZXF1ZW5jZVRpbWVyJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5kZXRhY2ggPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9kZXRhY2gnKVxuXG5tb2R1bGUuZXhwb3J0cy5pbnN0YW5jZXMgPSBbXVxubW9kdWxlLmV4cG9ydHMucmVzZXQgPSByZXF1aXJlKCcuL3Jlc2V0JylcblxuLyoqXG4gKiB2YXJpYWJsZSB0byBzdG9yZSB0aGUgZmxpcHBlZCB2ZXJzaW9uIG9mIE1BUCBmcm9tIGFib3ZlXG4gKiBuZWVkZWQgdG8gY2hlY2sgaWYgd2Ugc2hvdWxkIHVzZSBrZXlwcmVzcyBvciBub3Qgd2hlbiBubyBhY3Rpb25cbiAqIGlzIHNwZWNpZmllZFxuICpcbiAqIEB0eXBlIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5tb2R1bGUuZXhwb3J0cy5SRVZFUlNFX01BUCA9IG51bGxcbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBvbiA9IHJlcXVpcmUoJy4vZG9tLWV2ZW50JylcbiAgdmFyIGVsZW1lbnQgPSBzZWxmLmVsZW1lbnRcblxuICBzZWxmLmV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJy4vaGFuZGxlS2V5RXZlbnQnKS5iaW5kKHNlbGYpXG5cbiAgb24oZWxlbWVudCwgJ2tleXByZXNzJywgc2VsZi5ldmVudEhhbmRsZXIpXG4gIG9uKGVsZW1lbnQsICdrZXlkb3duJywgc2VsZi5ldmVudEhhbmRsZXIpXG4gIG9uKGVsZW1lbnQsICdrZXl1cCcsIHNlbGYuZXZlbnRIYW5kbGVyKVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogYmluZHMgYW4gZXZlbnQgdG8gQ29tYm9rZXlzXG4gKlxuICogY2FuIGJlIGEgc2luZ2xlIGtleSwgYSBjb21iaW5hdGlvbiBvZiBrZXlzIHNlcGFyYXRlZCB3aXRoICssXG4gKiBhbiBhcnJheSBvZiBrZXlzLCBvciBhIHNlcXVlbmNlIG9mIGtleXMgc2VwYXJhdGVkIGJ5IHNwYWNlc1xuICpcbiAqIGJlIHN1cmUgdG8gbGlzdCB0aGUgbW9kaWZpZXIga2V5cyBmaXJzdCB0byBtYWtlIHN1cmUgdGhhdCB0aGVcbiAqIGNvcnJlY3Qga2V5IGVuZHMgdXAgZ2V0dGluZyBib3VuZCAodGhlIGxhc3Qga2V5IGluIHRoZSBwYXR0ZXJuKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5fSBrZXlzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtzdHJpbmc9fSBhY3Rpb24gLSBcImtleXByZXNzXCIsIFwia2V5ZG93blwiLCBvciBcImtleXVwXCJcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5cywgY2FsbGJhY2ssIGFjdGlvbikge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICBrZXlzID0ga2V5cyBpbnN0YW5jZW9mIEFycmF5ID8ga2V5cyA6IFtrZXlzXVxuICBzZWxmLmJpbmRNdWx0aXBsZShrZXlzLCBjYWxsYmFjaywgYWN0aW9uKVxuICByZXR1cm4gc2VsZlxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBiaW5kcyBtdWx0aXBsZSBjb21iaW5hdGlvbnMgdG8gdGhlIHNhbWUgY2FsbGJhY2tcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBjb21iaW5hdGlvbnNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGFjdGlvblxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjb21iaW5hdGlvbnMsIGNhbGxiYWNrLCBhY3Rpb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgZm9yICh2YXIgaiA9IDA7IGogPCBjb21iaW5hdGlvbnMubGVuZ3RoOyArK2opIHtcbiAgICBzZWxmLmJpbmRTaW5nbGUoY29tYmluYXRpb25zW2pdLCBjYWxsYmFjaywgYWN0aW9uKVxuICB9XG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIGJpbmRzIGEga2V5IHNlcXVlbmNlIHRvIGFuIGV2ZW50XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbWJvIC0gY29tYm8gc3BlY2lmaWVkIGluIGJpbmQgY2FsbFxuICogQHBhcmFtIHtBcnJheX0ga2V5c1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYWN0aW9uXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNvbWJvLCBrZXlzLCBjYWxsYmFjaywgYWN0aW9uKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIC8vIHN0YXJ0IG9mZiBieSBhZGRpbmcgYSBzZXF1ZW5jZSBsZXZlbCByZWNvcmQgZm9yIHRoaXMgY29tYmluYXRpb25cbiAgLy8gYW5kIHNldHRpbmcgdGhlIGxldmVsIHRvIDBcbiAgc2VsZi5zZXF1ZW5jZUxldmVsc1tjb21ib10gPSAwXG5cbiAgLyoqXG4gICAqIGNhbGxiYWNrIHRvIGluY3JlYXNlIHRoZSBzZXF1ZW5jZSBsZXZlbCBmb3IgdGhpcyBzZXF1ZW5jZSBhbmQgcmVzZXRcbiAgICogYWxsIG90aGVyIHNlcXVlbmNlcyB0aGF0IHdlcmUgYWN0aXZlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXh0QWN0aW9uXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICovXG4gIGZ1bmN0aW9uIGluY3JlYXNlU2VxdWVuY2UgKG5leHRBY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5uZXh0RXhwZWN0ZWRBY3Rpb24gPSBuZXh0QWN0aW9uXG4gICAgICArK3NlbGYuc2VxdWVuY2VMZXZlbHNbY29tYm9dXG4gICAgICBzZWxmLnJlc2V0U2VxdWVuY2VUaW1lcigpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHdyYXBzIHRoZSBzcGVjaWZpZWQgY2FsbGJhY2sgaW5zaWRlIG9mIGFub3RoZXIgZnVuY3Rpb24gaW4gb3JkZXJcbiAgICogdG8gcmVzZXQgYWxsIHNlcXVlbmNlIGNvdW50ZXJzIGFzIHNvb24gYXMgdGhpcyBzZXF1ZW5jZSBpcyBkb25lXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHJldHVybnMgdm9pZFxuICAgKi9cbiAgZnVuY3Rpb24gY2FsbGJhY2tBbmRSZXNldCAoZSkge1xuICAgIHZhciBjaGFyYWN0ZXJGcm9tRXZlbnRcbiAgICBzZWxmLmZpcmVDYWxsYmFjayhjYWxsYmFjaywgZSwgY29tYm8pXG5cbiAgICAvLyB3ZSBzaG91bGQgaWdub3JlIHRoZSBuZXh0IGtleSB1cCBpZiB0aGUgYWN0aW9uIGlzIGtleSBkb3duXG4gICAgLy8gb3Iga2V5cHJlc3MuICB0aGlzIGlzIHNvIGlmIHlvdSBmaW5pc2ggYSBzZXF1ZW5jZSBhbmRcbiAgICAvLyByZWxlYXNlIHRoZSBrZXkgdGhlIGZpbmFsIGtleSB3aWxsIG5vdCB0cmlnZ2VyIGEga2V5dXBcbiAgICBpZiAoYWN0aW9uICE9PSAna2V5dXAnKSB7XG4gICAgICBjaGFyYWN0ZXJGcm9tRXZlbnQgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL2NoYXJhY3RlckZyb21FdmVudCcpXG4gICAgICBzZWxmLmlnbm9yZU5leHRLZXl1cCA9IGNoYXJhY3RlckZyb21FdmVudChlKVxuICAgIH1cblxuICAgIC8vIHdlaXJkIHJhY2UgY29uZGl0aW9uIGlmIGEgc2VxdWVuY2UgZW5kcyB3aXRoIHRoZSBrZXlcbiAgICAvLyBhbm90aGVyIHNlcXVlbmNlIGJlZ2lucyB3aXRoXG4gICAgc2V0VGltZW91dChcbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5yZXNldFNlcXVlbmNlcygpXG4gICAgICB9LFxuICAgICAgMTBcbiAgICApXG4gIH1cblxuICAvLyBsb29wIHRocm91Z2gga2V5cyBvbmUgYXQgYSB0aW1lIGFuZCBiaW5kIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja1xuICAvLyBmdW5jdGlvbi4gIGZvciBhbnkga2V5IGxlYWRpbmcgdXAgdG8gdGhlIGZpbmFsIG9uZSBpdCBzaG91bGRcbiAgLy8gaW5jcmVhc2UgdGhlIHNlcXVlbmNlLiBhZnRlciB0aGUgZmluYWwsIGl0IHNob3VsZCByZXNldCBhbGwgc2VxdWVuY2VzXG4gIC8vXG4gIC8vIGlmIGFuIGFjdGlvbiBpcyBzcGVjaWZpZWQgaW4gdGhlIG9yaWdpbmFsIGJpbmQgY2FsbCB0aGVuIHRoYXQgd2lsbFxuICAvLyBiZSB1c2VkIHRocm91Z2hvdXQuICBvdGhlcndpc2Ugd2Ugd2lsbCBwYXNzIHRoZSBhY3Rpb24gdGhhdCB0aGVcbiAgLy8gbmV4dCBrZXkgaW4gdGhlIHNlcXVlbmNlIHNob3VsZCBtYXRjaC4gIHRoaXMgYWxsb3dzIGEgc2VxdWVuY2VcbiAgLy8gdG8gbWl4IGFuZCBtYXRjaCBrZXlwcmVzcyBhbmQga2V5ZG93biBldmVudHMgZGVwZW5kaW5nIG9uIHdoaWNoXG4gIC8vIG9uZXMgYXJlIGJldHRlciBzdWl0ZWQgdG8gdGhlIGtleSBwcm92aWRlZFxuICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyArK2opIHtcbiAgICB2YXIgaXNGaW5hbCA9IGogKyAxID09PSBrZXlzLmxlbmd0aFxuICAgIHZhciB3cmFwcGVkQ2FsbGJhY2sgPSBpc0ZpbmFsID8gY2FsbGJhY2tBbmRSZXNldCA6IGluY3JlYXNlU2VxdWVuY2UoYWN0aW9uIHx8IHNlbGYuZ2V0S2V5SW5mbyhrZXlzW2ogKyAxXSkuYWN0aW9uKVxuICAgIHNlbGYuYmluZFNpbmdsZShrZXlzW2pdLCB3cmFwcGVkQ2FsbGJhY2ssIGFjdGlvbiwgY29tYm8sIGopXG4gIH1cbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogYmluZHMgYSBzaW5nbGUga2V5Ym9hcmQgY29tYmluYXRpb25cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tYmluYXRpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZz19IGFjdGlvblxuICogQHBhcmFtIHtzdHJpbmc9fSBzZXF1ZW5jZU5hbWUgLSBuYW1lIG9mIHNlcXVlbmNlIGlmIHBhcnQgb2Ygc2VxdWVuY2VcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbGV2ZWwgLSB3aGF0IHBhcnQgb2YgdGhlIHNlcXVlbmNlIHRoZSBjb21tYW5kIGlzXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNvbWJpbmF0aW9uLCBjYWxsYmFjaywgYWN0aW9uLCBzZXF1ZW5jZU5hbWUsIGxldmVsKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIC8vIHN0b3JlIGEgZGlyZWN0IG1hcHBlZCByZWZlcmVuY2UgZm9yIHVzZSB3aXRoIENvbWJva2V5cy50cmlnZ2VyXG4gIHNlbGYuZGlyZWN0TWFwW2NvbWJpbmF0aW9uICsgJzonICsgYWN0aW9uXSA9IGNhbGxiYWNrXG5cbiAgLy8gbWFrZSBzdXJlIG11bHRpcGxlIHNwYWNlcyBpbiBhIHJvdyBiZWNvbWUgYSBzaW5nbGUgc3BhY2VcbiAgY29tYmluYXRpb24gPSBjb21iaW5hdGlvbi5yZXBsYWNlKC9cXHMrL2csICcgJylcblxuICB2YXIgc2VxdWVuY2UgPSBjb21iaW5hdGlvbi5zcGxpdCgnICcpXG4gIHZhciBpbmZvXG5cbiAgLy8gaWYgdGhpcyBwYXR0ZXJuIGlzIGEgc2VxdWVuY2Ugb2Yga2V5cyB0aGVuIHJ1biB0aHJvdWdoIHRoaXMgbWV0aG9kXG4gIC8vIHRvIHJlcHJvY2VzcyBlYWNoIHBhdHRlcm4gb25lIGtleSBhdCBhIHRpbWVcbiAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDEpIHtcbiAgICBzZWxmLmJpbmRTZXF1ZW5jZShjb21iaW5hdGlvbiwgc2VxdWVuY2UsIGNhbGxiYWNrLCBhY3Rpb24pXG4gICAgcmV0dXJuXG4gIH1cblxuICBpbmZvID0gc2VsZi5nZXRLZXlJbmZvKGNvbWJpbmF0aW9uLCBhY3Rpb24pXG5cbiAgLy8gbWFrZSBzdXJlIHRvIGluaXRpYWxpemUgYXJyYXkgaWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZVxuICAvLyBhIGNhbGxiYWNrIGlzIGFkZGVkIGZvciB0aGlzIGtleVxuICBzZWxmLmNhbGxiYWNrc1tpbmZvLmtleV0gPSBzZWxmLmNhbGxiYWNrc1tpbmZvLmtleV0gfHwgW11cblxuICAvLyByZW1vdmUgYW4gZXhpc3RpbmcgbWF0Y2ggaWYgdGhlcmUgaXMgb25lXG4gIHNlbGYuZ2V0TWF0Y2hlcyhpbmZvLmtleSwgaW5mby5tb2RpZmllcnMsIHt0eXBlOiBpbmZvLmFjdGlvbn0sIHNlcXVlbmNlTmFtZSwgY29tYmluYXRpb24sIGxldmVsKVxuXG4gIC8vIGFkZCB0aGlzIGNhbGwgYmFjayB0byB0aGUgYXJyYXlcbiAgLy8gaWYgaXQgaXMgYSBzZXF1ZW5jZSBwdXQgaXQgYXQgdGhlIGJlZ2lubmluZ1xuICAvLyBpZiBub3QgcHV0IGl0IGF0IHRoZSBlbmRcbiAgLy9cbiAgLy8gdGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUgd2F5IHRoZXNlIGFyZSBwcm9jZXNzZWQgZXhwZWN0c1xuICAvLyB0aGUgc2VxdWVuY2Ugb25lcyB0byBjb21lIGZpcnN0XG4gIHNlbGYuY2FsbGJhY2tzW2luZm8ua2V5XVtzZXF1ZW5jZU5hbWUgPyAndW5zaGlmdCcgOiAncHVzaCddKHtcbiAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgbW9kaWZpZXJzOiBpbmZvLm1vZGlmaWVycyxcbiAgICBhY3Rpb246IGluZm8uYWN0aW9uLFxuICAgIHNlcTogc2VxdWVuY2VOYW1lLFxuICAgIGxldmVsOiBsZXZlbCxcbiAgICBjb21ibzogY29tYmluYXRpb25cbiAgfSlcbn1cbiIsInZhciBvZmYgPSByZXF1aXJlKCcuL2RvbS1ldmVudCcpLm9mZlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgZWxlbWVudCA9IHNlbGYuZWxlbWVudFxuXG4gIG9mZihlbGVtZW50LCAna2V5cHJlc3MnLCBzZWxmLmV2ZW50SGFuZGxlcilcbiAgb2ZmKGVsZW1lbnQsICdrZXlkb3duJywgc2VsZi5ldmVudEhhbmRsZXIpXG4gIG9mZihlbGVtZW50LCAna2V5dXAnLCBzZWxmLmV2ZW50SGFuZGxlcilcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gb25cbm1vZHVsZS5leHBvcnRzLm9uID0gb25cbm1vZHVsZS5leHBvcnRzLm9mZiA9IG9mZlxuXG5mdW5jdGlvbiBvbiAoZWxlbWVudCwgZXZlbnQsIGNhbGxiYWNrLCBjYXB0dXJlKSB7XG4gICFlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgKGV2ZW50ID0gJ29uJyArIGV2ZW50KVxuICA7KGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciB8fCBlbGVtZW50LmF0dGFjaEV2ZW50KS5jYWxsKGVsZW1lbnQsIGV2ZW50LCBjYWxsYmFjaywgY2FwdHVyZSlcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG5cbmZ1bmN0aW9uIG9mZiAoZWxlbWVudCwgZXZlbnQsIGNhbGxiYWNrLCBjYXB0dXJlKSB7XG4gICFlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgKGV2ZW50ID0gJ29uJyArIGV2ZW50KVxuICA7KGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciB8fCBlbGVtZW50LmRldGFjaEV2ZW50KS5jYWxsKGVsZW1lbnQsIGV2ZW50LCBjYWxsYmFjaywgY2FwdHVyZSlcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIGFjdHVhbGx5IGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvblxuICpcbiAqIGlmIHlvdXIgY2FsbGJhY2sgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSB0aGlzIHdpbGwgdXNlIHRoZSBqcXVlcnlcbiAqIGNvbnZlbnRpb24gLSBwcmV2ZW50IGRlZmF1bHQgYW5kIHN0b3AgcHJvcG9nYXRpb24gb24gdGhlIGV2ZW50XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGUsIGNvbWJvLCBzZXF1ZW5jZSkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIHByZXZlbnREZWZhdWx0XG4gIHZhciBzdG9wUHJvcGFnYXRpb25cblxuICAvLyBpZiB0aGlzIGV2ZW50IHNob3VsZCBub3QgaGFwcGVuIHN0b3AgaGVyZVxuICBpZiAoc2VsZi5zdG9wQ2FsbGJhY2soZSwgZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50LCBjb21ibywgc2VxdWVuY2UpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoY2FsbGJhY2soZSwgY29tYm8pID09PSBmYWxzZSkge1xuICAgIHByZXZlbnREZWZhdWx0ID0gcmVxdWlyZSgnLi4vLi4vaGVscGVycy9wcmV2ZW50RGVmYXVsdCcpXG4gICAgcHJldmVudERlZmF1bHQoZSlcbiAgICBzdG9wUHJvcGFnYXRpb24gPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL3N0b3BQcm9wYWdhdGlvbicpXG4gICAgc3RvcFByb3BhZ2F0aW9uKGUpXG4gIH1cbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogR2V0cyBpbmZvIGZvciBhIHNwZWNpZmljIGtleSBjb21iaW5hdGlvblxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gY29tYmluYXRpb24ga2V5IGNvbWJpbmF0aW9uIChcImNvbW1hbmQrc1wiIG9yIFwiYVwiIG9yIFwiKlwiKVxuICogQHBhcmFtICB7c3RyaW5nPX0gYWN0aW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjb21iaW5hdGlvbiwgYWN0aW9uKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIga2V5c0Zyb21TdHJpbmdcbiAgdmFyIGtleXNcbiAgdmFyIGtleVxuICB2YXIgalxuICB2YXIgbW9kaWZpZXJzID0gW11cbiAgdmFyIFNQRUNJQUxfQUxJQVNFU1xuICB2YXIgU0hJRlRfTUFQXG4gIHZhciBpc01vZGlmaWVyXG5cbiAga2V5c0Zyb21TdHJpbmcgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL2tleXNGcm9tU3RyaW5nJylcbiAgLy8gdGFrZSB0aGUga2V5cyBmcm9tIHRoaXMgcGF0dGVybiBhbmQgZmlndXJlIG91dCB3aGF0IHRoZSBhY3R1YWxcbiAgLy8gcGF0dGVybiBpcyBhbGwgYWJvdXRcbiAga2V5cyA9IGtleXNGcm9tU3RyaW5nKGNvbWJpbmF0aW9uKVxuXG4gIFNQRUNJQUxfQUxJQVNFUyA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMvc3BlY2lhbC1hbGlhc2VzJylcbiAgU0hJRlRfTUFQID0gcmVxdWlyZSgnLi4vLi4vaGVscGVycy9zaGlmdC1tYXAnKVxuICBpc01vZGlmaWVyID0gcmVxdWlyZSgnLi4vLi4vaGVscGVycy9pc01vZGlmaWVyJylcbiAgZm9yIChqID0gMDsgaiA8IGtleXMubGVuZ3RoOyArK2opIHtcbiAgICBrZXkgPSBrZXlzW2pdXG5cbiAgICAvLyBub3JtYWxpemUga2V5IG5hbWVzXG4gICAgaWYgKFNQRUNJQUxfQUxJQVNFU1trZXldKSB7XG4gICAgICBrZXkgPSBTUEVDSUFMX0FMSUFTRVNba2V5XVxuICAgIH1cblxuICAgIC8vIGlmIHRoaXMgaXMgbm90IGEga2V5cHJlc3MgZXZlbnQgdGhlbiB3ZSBzaG91bGRcbiAgICAvLyBiZSBzbWFydCBhYm91dCB1c2luZyBzaGlmdCBrZXlzXG4gICAgLy8gdGhpcyB3aWxsIG9ubHkgd29yayBmb3IgVVMga2V5Ym9hcmRzIGhvd2V2ZXJcbiAgICBpZiAoYWN0aW9uICYmIGFjdGlvbiAhPT0gJ2tleXByZXNzJyAmJiBTSElGVF9NQVBba2V5XSkge1xuICAgICAga2V5ID0gU0hJRlRfTUFQW2tleV1cbiAgICAgIG1vZGlmaWVycy5wdXNoKCdzaGlmdCcpXG4gICAgfVxuXG4gICAgLy8gaWYgdGhpcyBrZXkgaXMgYSBtb2RpZmllciB0aGVuIGFkZCBpdCB0byB0aGUgbGlzdCBvZiBtb2RpZmllcnNcbiAgICBpZiAoaXNNb2RpZmllcihrZXkpKSB7XG4gICAgICBtb2RpZmllcnMucHVzaChrZXkpXG4gICAgfVxuICB9XG5cbiAgLy8gZGVwZW5kaW5nIG9uIHdoYXQgdGhlIGtleSBjb21iaW5hdGlvbiBpc1xuICAvLyB3ZSB3aWxsIHRyeSB0byBwaWNrIHRoZSBiZXN0IGV2ZW50IGZvciBpdFxuICBhY3Rpb24gPSBzZWxmLnBpY2tCZXN0QWN0aW9uKGtleSwgbW9kaWZpZXJzLCBhY3Rpb24pXG5cbiAgcmV0dXJuIHtcbiAgICBrZXk6IGtleSxcbiAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcbiAgICBhY3Rpb246IGFjdGlvblxuICB9XG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIGZpbmRzIGFsbCBjYWxsYmFja3MgdGhhdCBtYXRjaCBiYXNlZCBvbiB0aGUga2V5Y29kZSwgbW9kaWZpZXJzLFxuICogYW5kIGFjdGlvblxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAqIEBwYXJhbSB7QXJyYXl9IG1vZGlmaWVyc1xuICogQHBhcmFtIHtFdmVudHxPYmplY3R9IGVcbiAqIEBwYXJhbSB7c3RyaW5nPX0gc2VxdWVuY2VOYW1lIC0gbmFtZSBvZiB0aGUgc2VxdWVuY2Ugd2UgYXJlIGxvb2tpbmcgZm9yXG4gKiBAcGFyYW0ge3N0cmluZz19IGNvbWJpbmF0aW9uXG4gKiBAcGFyYW0ge251bWJlcj19IGxldmVsXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNoYXJhY3RlciwgbW9kaWZpZXJzLCBlLCBzZXF1ZW5jZU5hbWUsIGNvbWJpbmF0aW9uLCBsZXZlbCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIGpcbiAgdmFyIGNhbGxiYWNrXG4gIHZhciBtYXRjaGVzID0gW11cbiAgdmFyIGFjdGlvbiA9IGUudHlwZVxuICB2YXIgaXNNb2RpZmllclxuICB2YXIgbW9kaWZpZXJzTWF0Y2hcblxuICBpZiAoXG4gICAgICBhY3Rpb24gPT09ICdrZXlwcmVzcycgJiZcbiAgICAgIC8vIEZpcmVmb3ggZmlyZXMga2V5cHJlc3MgZm9yIGFycm93c1xuICAgICAgIShlLmNvZGUgJiYgZS5jb2RlLnNsaWNlKDAsIDUpID09PSAnQXJyb3cnKVxuICApIHtcbiAgICAvLyAnYW55LWNoYXJhY3RlcicgY2FsbGJhY2tzIGFyZSBvbmx5IG9uIGBrZXlwcmVzc2BcbiAgICB2YXIgYW55Q2hhckNhbGxiYWNrcyA9IHNlbGYuY2FsbGJhY2tzWydhbnktY2hhcmFjdGVyJ10gfHwgW11cbiAgICBhbnlDaGFyQ2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICBtYXRjaGVzLnB1c2goY2FsbGJhY2spXG4gICAgfSlcbiAgfVxuXG4gIGlmICghc2VsZi5jYWxsYmFja3NbY2hhcmFjdGVyXSkgeyByZXR1cm4gbWF0Y2hlcyB9XG5cbiAgaXNNb2RpZmllciA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMvaXNNb2RpZmllcicpXG4gIC8vIGlmIGEgbW9kaWZpZXIga2V5IGlzIGNvbWluZyB1cCBvbiBpdHMgb3duIHdlIHNob3VsZCBhbGxvdyBpdFxuICBpZiAoYWN0aW9uID09PSAna2V5dXAnICYmIGlzTW9kaWZpZXIoY2hhcmFjdGVyKSkge1xuICAgIG1vZGlmaWVycyA9IFtjaGFyYWN0ZXJdXG4gIH1cblxuICAvLyBsb29wIHRocm91Z2ggYWxsIGNhbGxiYWNrcyBmb3IgdGhlIGtleSB0aGF0IHdhcyBwcmVzc2VkXG4gIC8vIGFuZCBzZWUgaWYgYW55IG9mIHRoZW0gbWF0Y2hcbiAgZm9yIChqID0gMDsgaiA8IHNlbGYuY2FsbGJhY2tzW2NoYXJhY3Rlcl0ubGVuZ3RoOyArK2opIHtcbiAgICBjYWxsYmFjayA9IHNlbGYuY2FsbGJhY2tzW2NoYXJhY3Rlcl1bal1cblxuICAgIC8vIGlmIGEgc2VxdWVuY2UgbmFtZSBpcyBub3Qgc3BlY2lmaWVkLCBidXQgdGhpcyBpcyBhIHNlcXVlbmNlIGF0XG4gICAgLy8gdGhlIHdyb25nIGxldmVsIHRoZW4gbW92ZSBvbnRvIHRoZSBuZXh0IG1hdGNoXG4gICAgaWYgKCFzZXF1ZW5jZU5hbWUgJiYgY2FsbGJhY2suc2VxICYmIHNlbGYuc2VxdWVuY2VMZXZlbHNbY2FsbGJhY2suc2VxXSAhPT0gY2FsbGJhY2subGV2ZWwpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gaWYgdGhlIGFjdGlvbiB3ZSBhcmUgbG9va2luZyBmb3IgZG9lc24ndCBtYXRjaCB0aGUgYWN0aW9uIHdlIGdvdFxuICAgIC8vIHRoZW4gd2Ugc2hvdWxkIGtlZXAgZ29pbmdcbiAgICBpZiAoYWN0aW9uICE9PSBjYWxsYmFjay5hY3Rpb24pIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gaWYgdGhpcyBpcyBhIGtleXByZXNzIGV2ZW50IGFuZCB0aGUgbWV0YSBrZXkgYW5kIGNvbnRyb2wga2V5XG4gICAgLy8gYXJlIG5vdCBwcmVzc2VkIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIG9ubHkgbG9vayBhdCB0aGVcbiAgICAvLyBjaGFyYWN0ZXIsIG90aGVyd2lzZSBjaGVjayB0aGUgbW9kaWZpZXJzIGFzIHdlbGxcbiAgICAvL1xuICAgIC8vIGNocm9tZSB3aWxsIG5vdCBmaXJlIGEga2V5cHJlc3MgaWYgbWV0YSBvciBjb250cm9sIGlzIGRvd25cbiAgICAvLyBzYWZhcmkgd2lsbCBmaXJlIGEga2V5cHJlc3MgaWYgbWV0YSBvciBtZXRhK3NoaWZ0IGlzIGRvd25cbiAgICAvLyBmaXJlZm94IHdpbGwgZmlyZSBhIGtleXByZXNzIGlmIG1ldGEgb3IgY29udHJvbCBpcyBkb3duXG4gICAgbW9kaWZpZXJzTWF0Y2ggPSByZXF1aXJlKCcuL21vZGlmaWVyc01hdGNoJylcbiAgICBpZiAoKGFjdGlvbiA9PT0gJ2tleXByZXNzJyAmJiAhZS5tZXRhS2V5ICYmICFlLmN0cmxLZXkpIHx8IG1vZGlmaWVyc01hdGNoKG1vZGlmaWVycywgY2FsbGJhY2subW9kaWZpZXJzKSkge1xuICAgICAgLy8gd2hlbiB5b3UgYmluZCBhIGNvbWJpbmF0aW9uIG9yIHNlcXVlbmNlIGEgc2Vjb25kIHRpbWUgaXRcbiAgICAgIC8vIHNob3VsZCBvdmVyd3JpdGUgdGhlIGZpcnN0IG9uZS4gIGlmIGEgc2VxdWVuY2VOYW1lIG9yXG4gICAgICAvLyBjb21iaW5hdGlvbiBpcyBzcGVjaWZpZWQgaW4gdGhpcyBjYWxsIGl0IGRvZXMganVzdCB0aGF0XG4gICAgICAvL1xuICAgICAgLy8gQHRvZG8gbWFrZSBkZWxldGluZyBpdHMgb3duIG1ldGhvZD9cbiAgICAgIHZhciBkZWxldGVDb21ibyA9ICFzZXF1ZW5jZU5hbWUgJiYgY2FsbGJhY2suY29tYm8gPT09IGNvbWJpbmF0aW9uXG4gICAgICB2YXIgZGVsZXRlU2VxdWVuY2UgPSBzZXF1ZW5jZU5hbWUgJiYgY2FsbGJhY2suc2VxID09PSBzZXF1ZW5jZU5hbWUgJiYgY2FsbGJhY2subGV2ZWwgPT09IGxldmVsXG4gICAgICBpZiAoZGVsZXRlQ29tYm8gfHwgZGVsZXRlU2VxdWVuY2UpIHtcbiAgICAgICAgc2VsZi5jYWxsYmFja3NbY2hhcmFjdGVyXS5zcGxpY2UoaiwgMSlcbiAgICAgIH1cblxuICAgICAgbWF0Y2hlcy5wdXNoKGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtYXRjaGVzXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIHJldmVyc2VzIHRoZSBtYXAgbG9va3VwIHNvIHRoYXQgd2UgY2FuIGxvb2sgZm9yIHNwZWNpZmljIGtleXNcbiAqIHRvIHNlZSB3aGF0IGNhbiBhbmQgY2FuJ3QgdXNlIGtleXByZXNzXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBjb25zdHJ1Y3RvciA9IHNlbGYuY29uc3RydWN0b3JcbiAgdmFyIFNQRUNJQUxfS0VZU19NQVBcblxuICBpZiAoIWNvbnN0cnVjdG9yLlJFVkVSU0VfTUFQKSB7XG4gICAgY29uc3RydWN0b3IuUkVWRVJTRV9NQVAgPSB7fVxuICAgIFNQRUNJQUxfS0VZU19NQVAgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL3NwZWNpYWwta2V5cy1tYXAnKVxuICAgIGZvciAodmFyIGtleSBpbiBTUEVDSUFMX0tFWVNfTUFQKSB7XG4gICAgICAvLyBwdWxsIG91dCB0aGUgbnVtZXJpYyBrZXlwYWQgZnJvbSBoZXJlIGNhdXNlIGtleXByZXNzIHNob3VsZFxuICAgICAgLy8gYmUgYWJsZSB0byBkZXRlY3QgdGhlIGtleXMgZnJvbSB0aGUgY2hhcmFjdGVyXG4gICAgICBpZiAoa2V5ID4gOTUgJiYga2V5IDwgMTEyKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChTUEVDSUFMX0tFWVNfTUFQLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgY29uc3RydWN0b3IuUkVWRVJTRV9NQVBbU1BFQ0lBTF9LRVlTX01BUFtrZXldXSA9IGtleVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gY29uc3RydWN0b3IuUkVWRVJTRV9NQVBcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogaGFuZGxlcyBhIGNoYXJhY3RlciBrZXkgZXZlbnRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVyXG4gKiBAcGFyYW0ge0FycmF5fSBtb2RpZmllcnNcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhcmFjdGVyLCBtb2RpZmllcnMsIGUpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBjYWxsYmFja3NcbiAgdmFyIGpcbiAgdmFyIGRvTm90UmVzZXQgPSB7fVxuICB2YXIgbWF4TGV2ZWwgPSAwXG4gIHZhciBwcm9jZXNzZWRTZXF1ZW5jZUNhbGxiYWNrID0gZmFsc2VcbiAgdmFyIGlzTW9kaWZpZXJcbiAgdmFyIGlnbm9yZVRoaXNLZXlwcmVzc1xuXG4gIGNhbGxiYWNrcyA9IHNlbGYuZ2V0TWF0Y2hlcyhjaGFyYWN0ZXIsIG1vZGlmaWVycywgZSlcbiAgLy8gQ2FsY3VsYXRlIHRoZSBtYXhMZXZlbCBmb3Igc2VxdWVuY2VzIHNvIHdlIGNhbiBvbmx5IGV4ZWN1dGUgdGhlIGxvbmdlc3QgY2FsbGJhY2sgc2VxdWVuY2VcbiAgZm9yIChqID0gMDsgaiA8IGNhbGxiYWNrcy5sZW5ndGg7ICsraikge1xuICAgIGlmIChjYWxsYmFja3Nbal0uc2VxKSB7XG4gICAgICBtYXhMZXZlbCA9IE1hdGgubWF4KG1heExldmVsLCBjYWxsYmFja3Nbal0ubGV2ZWwpXG4gICAgfVxuICB9XG5cbiAgLy8gbG9vcCB0aHJvdWdoIG1hdGNoaW5nIGNhbGxiYWNrcyBmb3IgdGhpcyBrZXkgZXZlbnRcbiAgZm9yIChqID0gMDsgaiA8IGNhbGxiYWNrcy5sZW5ndGg7ICsraikge1xuICAgIC8vIGZpcmUgZm9yIGFsbCBzZXF1ZW5jZSBjYWxsYmFja3NcbiAgICAvLyB0aGlzIGlzIGJlY2F1c2UgaWYgZm9yIGV4YW1wbGUgeW91IGhhdmUgbXVsdGlwbGUgc2VxdWVuY2VzXG4gICAgLy8gYm91bmQgc3VjaCBhcyBcImcgaVwiIGFuZCBcImcgdFwiIHRoZXkgYm90aCBuZWVkIHRvIGZpcmUgdGhlXG4gICAgLy8gY2FsbGJhY2sgZm9yIG1hdGNoaW5nIGcgY2F1c2Ugb3RoZXJ3aXNlIHlvdSBjYW4gb25seSBldmVyXG4gICAgLy8gbWF0Y2ggdGhlIGZpcnN0IG9uZVxuICAgIGlmIChjYWxsYmFja3Nbal0uc2VxKSB7XG4gICAgICAvLyBvbmx5IGZpcmUgY2FsbGJhY2tzIGZvciB0aGUgbWF4TGV2ZWwgdG8gcHJldmVudFxuICAgICAgLy8gc3Vic2VxdWVuY2VzIGZyb20gYWxzbyBmaXJpbmdcbiAgICAgIC8vXG4gICAgICAvLyBmb3IgZXhhbXBsZSAnYSBvcHRpb24gYicgc2hvdWxkIG5vdCBjYXVzZSAnb3B0aW9uIGInIHRvIGZpcmVcbiAgICAgIC8vIGV2ZW4gdGhvdWdoICdvcHRpb24gYicgaXMgcGFydCBvZiB0aGUgb3RoZXIgc2VxdWVuY2VcbiAgICAgIC8vXG4gICAgICAvLyBhbnkgc2VxdWVuY2VzIHRoYXQgZG8gbm90IG1hdGNoIGhlcmUgd2lsbCBiZSBkaXNjYXJkZWRcbiAgICAgIC8vIGJlbG93IGJ5IHRoZSByZXNldFNlcXVlbmNlcyBjYWxsXG4gICAgICBpZiAoY2FsbGJhY2tzW2pdLmxldmVsICE9PSBtYXhMZXZlbCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBwcm9jZXNzZWRTZXF1ZW5jZUNhbGxiYWNrID0gdHJ1ZVxuXG4gICAgICAvLyBrZWVwIGEgbGlzdCBvZiB3aGljaCBzZXF1ZW5jZXMgd2VyZSBtYXRjaGVzIGZvciBsYXRlclxuICAgICAgZG9Ob3RSZXNldFtjYWxsYmFja3Nbal0uc2VxXSA9IDFcbiAgICAgIHNlbGYuZmlyZUNhbGxiYWNrKGNhbGxiYWNrc1tqXS5jYWxsYmFjaywgZSwgY2FsbGJhY2tzW2pdLmNvbWJvLCBjYWxsYmFja3Nbal0uc2VxKVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBpZiB0aGVyZSB3ZXJlIG5vIHNlcXVlbmNlIG1hdGNoZXMgYnV0IHdlIGFyZSBzdGlsbCBoZXJlXG4gICAgLy8gdGhhdCBtZWFucyB0aGlzIGlzIGEgcmVndWxhciBtYXRjaCBzbyB3ZSBzaG91bGQgZmlyZSB0aGF0XG4gICAgaWYgKCFwcm9jZXNzZWRTZXF1ZW5jZUNhbGxiYWNrKSB7XG4gICAgICBzZWxmLmZpcmVDYWxsYmFjayhjYWxsYmFja3Nbal0uY2FsbGJhY2ssIGUsIGNhbGxiYWNrc1tqXS5jb21ibylcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGUga2V5IHlvdSBwcmVzc2VkIG1hdGNoZXMgdGhlIHR5cGUgb2Ygc2VxdWVuY2Ugd2l0aG91dFxuICAvLyBiZWluZyBhIG1vZGlmaWVyIChpZSBcImtleXVwXCIgb3IgXCJrZXlwcmVzc1wiKSB0aGVuIHdlIHNob3VsZFxuICAvLyByZXNldCBhbGwgc2VxdWVuY2VzIHRoYXQgd2VyZSBub3QgbWF0Y2hlZCBieSB0aGlzIGV2ZW50XG4gIC8vXG4gIC8vIHRoaXMgaXMgc28sIGZvciBleGFtcGxlLCBpZiB5b3UgaGF2ZSB0aGUgc2VxdWVuY2UgXCJoIGEgdFwiIGFuZCB5b3VcbiAgLy8gdHlwZSBcImggZSBhIHIgdFwiIGl0IGRvZXMgbm90IG1hdGNoLiAgaW4gdGhpcyBjYXNlIHRoZSBcImVcIiB3aWxsXG4gIC8vIGNhdXNlIHRoZSBzZXF1ZW5jZSB0byByZXNldFxuICAvL1xuICAvLyBtb2RpZmllciBrZXlzIGFyZSBpZ25vcmVkIGJlY2F1c2UgeW91IGNhbiBoYXZlIGEgc2VxdWVuY2VcbiAgLy8gdGhhdCBjb250YWlucyBtb2RpZmllcnMgc3VjaCBhcyBcImVudGVyIGN0cmwrc3BhY2VcIiBhbmQgaW4gbW9zdFxuICAvLyBjYXNlcyB0aGUgbW9kaWZpZXIga2V5IHdpbGwgYmUgcHJlc3NlZCBiZWZvcmUgdGhlIG5leHQga2V5XG4gIC8vXG4gIC8vIGFsc28gaWYgeW91IGhhdmUgYSBzZXF1ZW5jZSBzdWNoIGFzIFwiY3RybCtiIGFcIiB0aGVuIHByZXNzaW5nIHRoZVxuICAvLyBcImJcIiBrZXkgd2lsbCB0cmlnZ2VyIGEgXCJrZXlwcmVzc1wiIGFuZCBhIFwia2V5ZG93blwiXG4gIC8vXG4gIC8vIHRoZSBcImtleWRvd25cIiBpcyBleHBlY3RlZCB3aGVuIHRoZXJlIGlzIGEgbW9kaWZpZXIsIGJ1dCB0aGVcbiAgLy8gXCJrZXlwcmVzc1wiIGVuZHMgdXAgbWF0Y2hpbmcgdGhlIG5leHRFeHBlY3RlZEFjdGlvbiBzaW5jZSBpdCBvY2N1cnNcbiAgLy8gYWZ0ZXIgYW5kIHRoYXQgY2F1c2VzIHRoZSBzZXF1ZW5jZSB0byByZXNldFxuICAvL1xuICAvLyB3ZSBpZ25vcmUga2V5cHJlc3NlcyBpbiBhIHNlcXVlbmNlIHRoYXQgZGlyZWN0bHkgZm9sbG93IGEga2V5ZG93blxuICAvLyBmb3IgdGhlIHNhbWUgY2hhcmFjdGVyXG4gIGlnbm9yZVRoaXNLZXlwcmVzcyA9IGUudHlwZSA9PT0gJ2tleXByZXNzJyAmJiBzZWxmLmlnbm9yZU5leHRLZXlwcmVzc1xuICBpc01vZGlmaWVyID0gcmVxdWlyZSgnLi4vLi4vaGVscGVycy9pc01vZGlmaWVyJylcbiAgaWYgKGUudHlwZSA9PT0gc2VsZi5uZXh0RXhwZWN0ZWRBY3Rpb24gJiYgIWlzTW9kaWZpZXIoY2hhcmFjdGVyKSAmJiAhaWdub3JlVGhpc0tleXByZXNzKSB7XG4gICAgc2VsZi5yZXNldFNlcXVlbmNlcyhkb05vdFJlc2V0KVxuICB9XG5cbiAgc2VsZi5pZ25vcmVOZXh0S2V5cHJlc3MgPSBwcm9jZXNzZWRTZXF1ZW5jZUNhbGxiYWNrICYmIGUudHlwZSA9PT0gJ2tleWRvd24nXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIGhhbmRsZXMgYSBrZXlkb3duIGV2ZW50XG4gKlxuICogQHBhcmFtIHtFdmVudH0gZVxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgY2hhcmFjdGVyRnJvbUV2ZW50XG4gIHZhciBldmVudE1vZGlmaWVyc1xuXG4gIC8vIG5vcm1hbGl6ZSBlLndoaWNoIGZvciBrZXkgZXZlbnRzXG4gIC8vIEBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80Mjg1NjI3L2phdmFzY3JpcHQta2V5Y29kZS12cy1jaGFyY29kZS11dHRlci1jb25mdXNpb25cbiAgaWYgKHR5cGVvZiBlLndoaWNoICE9PSAnbnVtYmVyJykge1xuICAgIGUud2hpY2ggPSBlLmtleUNvZGVcbiAgfVxuICBjaGFyYWN0ZXJGcm9tRXZlbnQgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL2NoYXJhY3RlckZyb21FdmVudCcpXG4gIHZhciBjaGFyYWN0ZXIgPSBjaGFyYWN0ZXJGcm9tRXZlbnQoZSlcblxuICAvLyBubyBjaGFyYWN0ZXIgZm91bmQgdGhlbiBzdG9wXG4gIGlmIChjaGFyYWN0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gbmVlZCB0byB1c2UgPT09IGZvciB0aGUgY2hhcmFjdGVyIGNoZWNrIGJlY2F1c2UgdGhlIGNoYXJhY3RlciBjYW4gYmUgMFxuICBpZiAoZS50eXBlID09PSAna2V5dXAnICYmIHNlbGYuaWdub3JlTmV4dEtleXVwID09PSBjaGFyYWN0ZXIpIHtcbiAgICBzZWxmLmlnbm9yZU5leHRLZXl1cCA9IGZhbHNlXG4gICAgcmV0dXJuXG4gIH1cblxuICBldmVudE1vZGlmaWVycyA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMvZXZlbnRNb2RpZmllcnMnKVxuICBzZWxmLmhhbmRsZUtleShjaGFyYWN0ZXIsIGV2ZW50TW9kaWZpZXJzKGUpLCBlKVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBjaGVja3MgaWYgdHdvIGFycmF5cyBhcmUgZXF1YWxcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBtb2RpZmllcnMxXG4gKiBAcGFyYW0ge0FycmF5fSBtb2RpZmllcnMyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobW9kaWZpZXJzMSwgbW9kaWZpZXJzMikge1xuICByZXR1cm4gbW9kaWZpZXJzMS5zb3J0KCkuam9pbignLCcpID09PSBtb2RpZmllcnMyLnNvcnQoKS5qb2luKCcsJylcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogcGlja3MgdGhlIGJlc3QgYWN0aW9uIGJhc2VkIG9uIHRoZSBrZXkgY29tYmluYXRpb25cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gY2hhcmFjdGVyIGZvciBrZXlcbiAqIEBwYXJhbSB7QXJyYXl9IG1vZGlmaWVyc1xuICogQHBhcmFtIHtzdHJpbmc9fSBhY3Rpb24gcGFzc2VkIGluXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSwgbW9kaWZpZXJzLCBhY3Rpb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgLy8gaWYgbm8gYWN0aW9uIHdhcyBwaWNrZWQgaW4gd2Ugc2hvdWxkIHRyeSB0byBwaWNrIHRoZSBvbmVcbiAgLy8gdGhhdCB3ZSB0aGluayB3b3VsZCB3b3JrIGJlc3QgZm9yIHRoaXMga2V5XG4gIGlmICghYWN0aW9uKSB7XG4gICAgYWN0aW9uID0gc2VsZi5nZXRSZXZlcnNlTWFwKClba2V5XSA/ICdrZXlkb3duJyA6ICdrZXlwcmVzcydcbiAgfVxuXG4gIC8vIG1vZGlmaWVyIGtleXMgZG9uJ3Qgd29yayBhcyBleHBlY3RlZCB3aXRoIGtleXByZXNzLFxuICAvLyBzd2l0Y2ggdG8ga2V5ZG93blxuICBpZiAoYWN0aW9uID09PSAna2V5cHJlc3MnICYmIG1vZGlmaWVycy5sZW5ndGgpIHtcbiAgICBhY3Rpb24gPSAna2V5ZG93bidcbiAgfVxuXG4gIHJldHVybiBhY3Rpb25cbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogcmVzZXRzIHRoZSBsaWJyYXJ5IGJhY2sgdG8gaXRzIGluaXRpYWwgc3RhdGUuIFRoaXMgaXMgdXNlZnVsXG4gKiBpZiB5b3Ugd2FudCB0byBjbGVhciBvdXQgdGhlIGN1cnJlbnQga2V5Ym9hcmQgc2hvcnRjdXRzIGFuZCBiaW5kXG4gKiBuZXcgb25lcyAtIGZvciBleGFtcGxlIGlmIHlvdSBzd2l0Y2ggdG8gYW5vdGhlciBwYWdlXG4gKlxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHNlbGYuY2FsbGJhY2tzID0ge31cbiAgc2VsZi5kaXJlY3RNYXAgPSB7fVxuICByZXR1cm4gdGhpc1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogY2FsbGVkIHRvIHNldCBhIDEgc2Vjb25kIHRpbWVvdXQgb24gdGhlIHNwZWNpZmllZCBzZXF1ZW5jZVxuICpcbiAqIHRoaXMgaXMgc28gYWZ0ZXIgZWFjaCBrZXkgcHJlc3MgaW4gdGhlIHNlcXVlbmNlIHlvdSBoYXZlIDEgc2Vjb25kXG4gKiB0byBwcmVzcyB0aGUgbmV4dCBrZXkgYmVmb3JlIHlvdSBoYXZlIHRvIHN0YXJ0IG92ZXJcbiAqXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICBjbGVhclRpbWVvdXQoc2VsZi5yZXNldFRpbWVyKVxuICBzZWxmLnJlc2V0VGltZXIgPSBzZXRUaW1lb3V0KFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYucmVzZXRTZXF1ZW5jZXMoKVxuICAgIH0sXG4gICAgMTAwMFxuICApXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIHJlc2V0cyBhbGwgc2VxdWVuY2UgY291bnRlcnMgZXhjZXB0IGZvciB0aGUgb25lcyBwYXNzZWQgaW5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZG9Ob3RSZXNldFxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb05vdFJlc2V0KSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIGRvTm90UmVzZXQgPSBkb05vdFJlc2V0IHx8IHt9XG5cbiAgdmFyIGFjdGl2ZVNlcXVlbmNlcyA9IGZhbHNlXG4gIHZhciBrZXlcblxuICBmb3IgKGtleSBpbiBzZWxmLnNlcXVlbmNlTGV2ZWxzKSB7XG4gICAgaWYgKGRvTm90UmVzZXRba2V5XSkge1xuICAgICAgYWN0aXZlU2VxdWVuY2VzID0gdHJ1ZVxuICAgICAgY29udGludWVcbiAgICB9XG4gICAgc2VsZi5zZXF1ZW5jZUxldmVsc1trZXldID0gMFxuICB9XG5cbiAgaWYgKCFhY3RpdmVTZXF1ZW5jZXMpIHtcbiAgICBzZWxmLm5leHRFeHBlY3RlZEFjdGlvbiA9IGZhbHNlXG4gIH1cbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuKiBzaG91bGQgd2Ugc3RvcCB0aGlzIGV2ZW50IGJlZm9yZSBmaXJpbmcgb2ZmIGNhbGxiYWNrc1xuKlxuKiBAcGFyYW0ge0V2ZW50fSBlXG4qIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuKiBAcmV0dXJuIHtib29sZWFufVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIGVsZW1lbnQpIHtcbiAgLy8gaWYgdGhlIGVsZW1lbnQgaGFzIHRoZSBjbGFzcyBcImNvbWJva2V5c1wiIHRoZW4gbm8gbmVlZCB0byBzdG9wXG4gIGlmICgoJyAnICsgZWxlbWVudC5jbGFzc05hbWUgKyAnICcpLmluZGV4T2YoJyBjb21ib2tleXMgJykgPiAtMSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgdmFyIHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKVxuXG4gIC8vIHN0b3AgZm9yIGlucHV0LCBzZWxlY3QsIGFuZCB0ZXh0YXJlYVxuICByZXR1cm4gdGFnTmFtZSA9PT0gJ2lucHV0JyB8fCB0YWdOYW1lID09PSAnc2VsZWN0JyB8fCB0YWdOYW1lID09PSAndGV4dGFyZWEnIHx8IGVsZW1lbnQuaXNDb250ZW50RWRpdGFibGVcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG4vKipcbiAqIHRyaWdnZXJzIGFuIGV2ZW50IHRoYXQgaGFzIGFscmVhZHkgYmVlbiBib3VuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlzXG4gKiBAcGFyYW0ge3N0cmluZz19IGFjdGlvblxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXlzLCBhY3Rpb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmIChzZWxmLmRpcmVjdE1hcFtrZXlzICsgJzonICsgYWN0aW9uXSkge1xuICAgIHNlbGYuZGlyZWN0TWFwW2tleXMgKyAnOicgKyBhY3Rpb25dKHt9LCBrZXlzKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuLyoqXG4gKiB1bmJpbmRzIGFuIGV2ZW50IHRvIENvbWJva2V5c1xuICpcbiAqIHRoZSB1bmJpbmRpbmcgc2V0cyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gb2YgdGhlIHNwZWNpZmllZCBrZXkgY29tYm9cbiAqIHRvIGFuIGVtcHR5IGZ1bmN0aW9uIGFuZCBkZWxldGVzIHRoZSBjb3JyZXNwb25kaW5nIGtleSBpbiB0aGVcbiAqIGRpcmVjdE1hcCBkaWN0LlxuICpcbiAqIFRPRE86IGFjdHVhbGx5IHJlbW92ZSB0aGlzIGZyb20gdGhlIGNhbGxiYWNrcyBkaWN0aW9uYXJ5IGluc3RlYWRcbiAqIG9mIGJpbmRpbmcgYW4gZW1wdHkgZnVuY3Rpb25cbiAqXG4gKiB0aGUga2V5Y29tYm8rYWN0aW9uIGhhcyB0byBiZSBleGFjdGx5IHRoZSBzYW1lIGFzXG4gKiBpdCB3YXMgZGVmaW5lZCBpbiB0aGUgYmluZCBtZXRob2RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheX0ga2V5c1xuICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvblxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXlzLCBhY3Rpb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgcmV0dXJuIHNlbGYuYmluZChrZXlzLCBmdW5jdGlvbiAoKSB7fSwgYWN0aW9uKVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIHNlbGYuaW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKGNvbWJva2V5cykge1xuICAgIGNvbWJva2V5cy5yZXNldCgpXG4gIH0pXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIHRha2VzIHRoZSBldmVudCBhbmQgcmV0dXJucyB0aGUga2V5IGNoYXJhY3RlclxuICpcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkge1xuICB2YXIgU1BFQ0lBTF9LRVlTX01BUCxcbiAgICBTUEVDSUFMX0NIQVJBQ1RFUlNfTUFQXG4gIFNQRUNJQUxfS0VZU19NQVAgPSByZXF1aXJlKCcuL3NwZWNpYWwta2V5cy1tYXAnKVxuICBTUEVDSUFMX0NIQVJBQ1RFUlNfTUFQID0gcmVxdWlyZSgnLi9zcGVjaWFsLWNoYXJhY3RlcnMtbWFwJylcblxuICAvLyBmb3Iga2V5cHJlc3MgZXZlbnRzIHdlIHNob3VsZCByZXR1cm4gdGhlIGNoYXJhY3RlciBhcyBpc1xuICBpZiAoZS50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgdmFyIGNoYXJhY3RlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaClcblxuICAgIC8vIGlmIHRoZSBzaGlmdCBrZXkgaXMgbm90IHByZXNzZWQgdGhlbiBpdCBpcyBzYWZlIHRvIGFzc3VtZVxuICAgIC8vIHRoYXQgd2Ugd2FudCB0aGUgY2hhcmFjdGVyIHRvIGJlIGxvd2VyY2FzZS4gIHRoaXMgbWVhbnMgaWZcbiAgICAvLyB5b3UgYWNjaWRlbnRhbGx5IGhhdmUgY2FwcyBsb2NrIG9uIHRoZW4geW91ciBrZXkgYmluZGluZ3NcbiAgICAvLyB3aWxsIGNvbnRpbnVlIHRvIHdvcmtcbiAgICAvL1xuICAgIC8vIHRoZSBvbmx5IHNpZGUgZWZmZWN0IHRoYXQgbWlnaHQgbm90IGJlIGRlc2lyZWQgaXMgaWYgeW91XG4gICAgLy8gYmluZCBzb21ldGhpbmcgbGlrZSAnQScgY2F1c2UgeW91IHdhbnQgdG8gdHJpZ2dlciBhblxuICAgIC8vIGV2ZW50IHdoZW4gY2FwaXRhbCBBIGlzIHByZXNzZWQgY2FwcyBsb2NrIHdpbGwgbm8gbG9uZ2VyXG4gICAgLy8gdHJpZ2dlciB0aGUgZXZlbnQuICBzaGlmdCthIHdpbGwgdGhvdWdoLlxuICAgIGlmICghZS5zaGlmdEtleSkge1xuICAgICAgY2hhcmFjdGVyID0gY2hhcmFjdGVyLnRvTG93ZXJDYXNlKClcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhcmFjdGVyXG4gIH1cblxuICAvLyBmb3Igbm9uIGtleXByZXNzIGV2ZW50cyB0aGUgc3BlY2lhbCBtYXBzIGFyZSBuZWVkZWRcbiAgaWYgKFNQRUNJQUxfS0VZU19NQVBbZS53aGljaF0gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBTUEVDSUFMX0tFWVNfTUFQW2Uud2hpY2hdXG4gIH1cblxuICBpZiAoU1BFQ0lBTF9DSEFSQUNURVJTX01BUFtlLndoaWNoXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFNQRUNJQUxfQ0hBUkFDVEVSU19NQVBbZS53aGljaF1cbiAgfVxuXG4gIC8vIGlmIGl0IGlzIG5vdCBpbiB0aGUgc3BlY2lhbCBtYXBcblxuICAvLyB3aXRoIGtleWRvd24gYW5kIGtleXVwIGV2ZW50cyB0aGUgY2hhcmFjdGVyIHNlZW1zIHRvIGFsd2F5c1xuICAvLyBjb21lIGluIGFzIGFuIHVwcGVyY2FzZSBjaGFyYWN0ZXIgd2hldGhlciB5b3UgYXJlIHByZXNzaW5nIHNoaWZ0XG4gIC8vIG9yIG5vdC4gIHdlIHNob3VsZCBtYWtlIHN1cmUgaXQgaXMgYWx3YXlzIGxvd2VyY2FzZSBmb3IgY29tcGFyaXNvbnNcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiB0YWtlcyBhIGtleSBldmVudCBhbmQgZmlndXJlcyBvdXQgd2hhdCB0aGUgbW9kaWZpZXJzIGFyZVxuICpcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkge1xuICB2YXIgbW9kaWZpZXJzID0gW11cblxuICBpZiAoZS5zaGlmdEtleSkge1xuICAgIG1vZGlmaWVycy5wdXNoKCdzaGlmdCcpXG4gIH1cblxuICBpZiAoZS5hbHRLZXkpIHtcbiAgICBtb2RpZmllcnMucHVzaCgnYWx0JylcbiAgfVxuXG4gIGlmIChlLmN0cmxLZXkpIHtcbiAgICBtb2RpZmllcnMucHVzaCgnY3RybCcpXG4gIH1cblxuICBpZiAoZS5tZXRhS2V5KSB7XG4gICAgbW9kaWZpZXJzLnB1c2goJ21ldGEnKVxuICB9XG5cbiAgcmV0dXJuIG1vZGlmaWVyc1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBkZXRlcm1pbmVzIGlmIHRoZSBrZXljb2RlIHNwZWNpZmllZCBpcyBhIG1vZGlmaWVyIGtleSBvciBub3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXkgPT09ICdzaGlmdCcgfHwga2V5ID09PSAnY3RybCcgfHwga2V5ID09PSAnYWx0JyB8fCBrZXkgPT09ICdtZXRhJ1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBDb252ZXJ0cyBmcm9tIGEgc3RyaW5nIGtleSBjb21iaW5hdGlvbiB0byBhbiBhcnJheVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gY29tYmluYXRpb24gbGlrZSBcImNvbW1hbmQrc2hpZnQrbFwiXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29tYmluYXRpb24pIHtcbiAgaWYgKGNvbWJpbmF0aW9uID09PSAnKycpIHtcbiAgICByZXR1cm4gWycrJ11cbiAgfVxuXG4gIHJldHVybiBjb21iaW5hdGlvbi5zcGxpdCgnKycpXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIHByZXZlbnRzIGRlZmF1bHQgZm9yIHRoaXMgZXZlbnRcbiAqXG4gKiBAcGFyYW0ge0V2ZW50fSBlXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHtcbiAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICByZXR1cm5cbiAgfVxuXG4gIGUucmV0dXJuVmFsdWUgPSBmYWxzZVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogdGhpcyBpcyBhIG1hcHBpbmcgb2Yga2V5cyB0aGF0IHJlcXVpcmUgc2hpZnQgb24gYSBVUyBrZXlwYWRcbiAqIGJhY2sgdG8gdGhlIG5vbiBzaGlmdCBlcXVpdmVsZW50c1xuICpcbiAqIHRoaXMgaXMgc28geW91IGNhbiB1c2Uga2V5dXAgZXZlbnRzIHdpdGggdGhlc2Uga2V5c1xuICpcbiAqIG5vdGUgdGhhdCB0aGlzIHdpbGwgb25seSB3b3JrIHJlbGlhYmx5IG9uIFVTIGtleWJvYXJkc1xuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICAnfic6ICdgJyxcbiAgJyEnOiAnMScsXG4gICdAJzogJzInLFxuICAnIyc6ICczJyxcbiAgJyQnOiAnNCcsXG4gICclJzogJzUnLFxuICAnXic6ICc2JyxcbiAgJyYnOiAnNycsXG4gICcqJzogJzgnLFxuICAnKCc6ICc5JyxcbiAgJyknOiAnMCcsXG4gICdfJzogJy0nLFxuICAnKyc6ICc9JyxcbiAgJzonOiAnOycsXG4gICdcIic6IFwiJ1wiLFxuICAnPCc6ICcsJyxcbiAgJz4nOiAnLicsXG4gICc/JzogJy8nLFxuICAnfCc6ICdcXFxcJ1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogdGhpcyBpcyBhIGxpc3Qgb2Ygc3BlY2lhbCBzdHJpbmdzIHlvdSBjYW4gdXNlIHRvIG1hcFxuICogdG8gbW9kaWZpZXIga2V5cyB3aGVuIHlvdSBzcGVjaWZ5IHlvdXIga2V5Ym9hcmQgc2hvcnRjdXRzXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICdvcHRpb24nOiAnYWx0JyxcbiAgJ2NvbW1hbmQnOiAnbWV0YScsXG4gICdyZXR1cm4nOiAnZW50ZXInLFxuICAnZXNjYXBlJzogJ2VzYycsXG4gICdtb2QnOiAvTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSA/ICdtZXRhJyA6ICdjdHJsJ1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogbWFwcGluZyBmb3Igc3BlY2lhbCBjaGFyYWN0ZXJzIHNvIHRoZXkgY2FuIHN1cHBvcnRcbiAqXG4gKiB0aGlzIGRpY3Rpb25hcnkgaXMgb25seSB1c2VkIGluY2FzZSB5b3Ugd2FudCB0byBiaW5kIGFcbiAqIGtleXVwIG9yIGtleWRvd24gZXZlbnQgdG8gb25lIG9mIHRoZXNlIGtleXNcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgMTA2OiAnKicsXG4gIDEwNzogJ3BsdXMnLFxuICAxMDk6ICdtaW51cycsXG4gIDExMDogJy4nLFxuICAxMTE6ICcvJyxcbiAgMTg2OiAnOycsXG4gIDE4NzogJz0nLFxuICAxODg6ICcsJyxcbiAgMTg5OiAnLScsXG4gIDE5MDogJy4nLFxuICAxOTE6ICcvJyxcbiAgMTkyOiAnYCcsXG4gIDIxOTogJ1snLFxuICAyMjA6ICdcXFxcJyxcbiAgMjIxOiAnXScsXG4gIDIyMjogXCInXCJcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG4vKipcbiAqIG1hcHBpbmcgb2Ygc3BlY2lhbCBrZXljb2RlcyB0byB0aGVpciBjb3JyZXNwb25kaW5nIGtleXNcbiAqXG4gKiBldmVyeXRoaW5nIGluIHRoaXMgZGljdGlvbmFyeSBjYW5ub3QgdXNlIGtleXByZXNzIGV2ZW50c1xuICogc28gaXQgaGFzIHRvIGJlIGhlcmUgdG8gbWFwIHRvIHRoZSBjb3JyZWN0IGtleWNvZGVzIGZvclxuICoga2V5dXAva2V5ZG93biBldmVudHNcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgODogJ2JhY2tzcGFjZScsXG4gIDk6ICd0YWInLFxuICAxMzogJ2VudGVyJyxcbiAgMTY6ICdzaGlmdCcsXG4gIDE3OiAnY3RybCcsXG4gIDE4OiAnYWx0JyxcbiAgMjA6ICdjYXBzbG9jaycsXG4gIDI3OiAnZXNjJyxcbiAgMzI6ICdzcGFjZScsXG4gIDMzOiAncGFnZXVwJyxcbiAgMzQ6ICdwYWdlZG93bicsXG4gIDM1OiAnZW5kJyxcbiAgMzY6ICdob21lJyxcbiAgMzc6ICdsZWZ0JyxcbiAgMzg6ICd1cCcsXG4gIDM5OiAncmlnaHQnLFxuICA0MDogJ2Rvd24nLFxuICA0NTogJ2lucycsXG4gIDQ2OiAnZGVsJyxcbiAgOTE6ICdtZXRhJyxcbiAgOTM6ICdtZXRhJyxcbiAgMTczOiAnbWludXMnLFxuICAxODc6ICdwbHVzJyxcbiAgMTg5OiAnbWludXMnLFxuICAyMjQ6ICdtZXRhJ1xufVxuXG4vKipcbiAqIGxvb3AgdGhyb3VnaCB0aGUgZiBrZXlzLCBmMSB0byBmMTkgYW5kIGFkZCB0aGVtIHRvIHRoZSBtYXBcbiAqIHByb2dyYW1hdGljYWxseVxuICovXG5mb3IgKHZhciBpID0gMTsgaSA8IDIwOyArK2kpIHtcbiAgbW9kdWxlLmV4cG9ydHNbMTExICsgaV0gPSAnZicgKyBpXG59XG5cbi8qKlxuICogbG9vcCB0aHJvdWdoIHRvIG1hcCBudW1iZXJzIG9uIHRoZSBudW1lcmljIGtleXBhZFxuICovXG5mb3IgKGkgPSAwOyBpIDw9IDk7ICsraSkge1xuICBtb2R1bGUuZXhwb3J0c1tpICsgOTZdID0gaVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBzdG9wcyBwcm9wb2dhdGlvbiBmb3IgdGhpcyBldmVudFxuICpcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkge1xuICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgcmV0dXJuXG4gIH1cblxuICBlLmNhbmNlbEJ1YmJsZSA9IHRydWVcbn1cbiIsInZhciByYW5kSW50ID0gcmVxdWlyZSgnLi9mYWIvcmFuZEludCcpO1xuXG52YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xudmFyIGMgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxudmFyIGltZ3MgPSB7XG4gIHRoaXNJc1lvdTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ3RoaXNJc1lvdScpXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0U2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHsgeDogd2luZG93LmlubmVyV2lkdGgsIHk6IHdpbmRvdy5pbm5lckhlaWdodCB9O1xuICB9LFxuICBnZXRDZW50ZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IHg6IHdpbmRvdy5pbm5lcldpZHRoLzIsIHk6IHdpbmRvdy5pbm5lckhlaWdodC8yIH07XG4gIH0sXG4gIGdldFJhbmRvbUJvdW5kUG9pbnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmKE1hdGgucmFuZG9tKCkgPj0gMC41KSB7XG4gICAgICByZXR1cm4geyB4OiByYW5kSW50KDAsd2luZG93LmlubmVyV2lkdGgpLCB5OiAwIH07XG4gICAgfVxuICAgIHJldHVybiB7IHg6IDAsIHk6IHJhbmRJbnQoMCx3aW5kb3cuaW5uZXJIZWlnaHQpIH07XG4gIH0sXG5cbiAgcmVzaXplOiBmdW5jdGlvbigpIHtcbiAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICB9LFxuXG4gIGhpZGU6IGZ1bmN0aW9uKCkge1xuICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9LFxuXG4gIGltZzogZnVuY3Rpb24oaW1nU3RyLCB4LHkpIHtcbiAgICBjLmRyYXdJbWFnZShpbWdzW2ltZ1N0cl0seCx5KTtcbiAgfSxcblxuICBjaXJjbGU6IGZ1bmN0aW9uKGVudGl0eSkge1xuICAgIGMuZmlsbFN0eWxlID0gZW50aXR5LmNvbG9yO1xuICAgIGMuYmVnaW5QYXRoKCk7XG4gICAgYy5hcmMoZW50aXR5LnBvcy54LCBlbnRpdHkucG9zLnksIGVudGl0eS5yYWRpdXMsIDAsIDIqTWF0aC5QSSk7XG4gICAgYy5maWxsKCk7XG4gIH0sXG5cbiAgb3V0bGluZUNpcmNsZTogZnVuY3Rpb24oZW50aXR5KSB7XG4gICAgYy5maWxsU3R5bGUgPSBlbnRpdHkuY29sb3I7XG4gICAgYy5zdHJva2VTdHlsZSA9IGVudGl0eS5zdHJva2VDb2xvcjtcbiAgICBjLmJlZ2luUGF0aCgpO1xuICAgIGMuYXJjKGVudGl0eS5wb3MueCwgZW50aXR5LnBvcy55LCBlbnRpdHkucmFkaXVzLCAwLCAyKk1hdGguUEkpO1xuICAgIGMuZmlsbCgpO1xuICAgIGMuc3Ryb2tlKCk7XG4gIH0sXG5cbiAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgIGMuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICBjLmZpbGxSZWN0KDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodCk7XG4gIH0sXG5cbiAgdGV4dDogZnVuY3Rpb24ocG9zLHRleHQsc2l6ZSxjb2xvcikge1xuICAgIGMuZmlsbFN0eWxlID0gY29sb3I7XG4gICAgYy5mb250ID0gc2l6ZS50b1N0cmluZygpICsgJ3B4IEhlbHZldGljYSc7XG4gICAgYy5maWxsU3R5bGUodGV4dCwgcG9zLngsIHBvcy55KTtcbiAgfVxufTtcbiIsInZhciB2ZWMyID0gcmVxdWlyZSgnLi92ZWMyJyk7XG5cbnZhciBkaXN0YW5jZUNoZWNrID0gcmVxdWlyZSgnLi9mYWIvZGlzdGFuY2VDaGVjaycpO1xuXG52YXIgc3F1YXJlQ2hlY2sgPSByZXF1aXJlKCcuL2ZhYi9zcXVhcmVDaGVjaycpO1xuXG5mdW5jdGlvbiBsaW1pdDFEVmVsKHZlbCwgbWF4VmVsKSB7XG4gIGlmKHZlbCA+IDApIHtcbiAgICByZXR1cm4gdmVsID49IG1heFZlbCA/IG1heFZlbCA6IHZlbDtcbiAgfVxuICByZXR1cm4gdmVsIDw9IC1tYXhWZWwgPyAtbWF4VmVsOiB2ZWw7XG59XG5cbmZ1bmN0aW9uIGxpbWl0VmVsKGVudGl0eSkge1xuICByZXR1cm4ge1xuICAgIHg6IGxpbWl0MURWZWwoZW50aXR5LnZlbC54LCBlbnRpdHkubWF4VmVsLngpLFxuICAgIHk6IGxpbWl0MURWZWwoZW50aXR5LnZlbC55LCBlbnRpdHkubWF4VmVsLnkpXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGU6IGZ1bmN0aW9uKGZyYWcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmFkaXVzOiBmcmFnLnJhZGl1cyB8fCA0LFxuICAgICAgY29sb3I6IGZyYWcuY29sb3IgfHwgJ2JsYWNrJyxcblxuICAgICAgcG9zOiBmcmFnLnBvcyB8fCB7eDogMCwgeTogMH0sXG4gICAgICBwb3NPZmZzZXQ6IGZyYWcucG9zT2Zmc2V0IHx8IHt4OiAwLCB5OiAwfSxcblxuICAgICAgdmVsOiBmcmFnLnZlbCB8fCB7eDogMCwgeTogMH0sXG4gICAgICBtYXhWZWw6IGZyYWcubWF4VmVsIHx8IHt4OiAwLCB5OiAwfSxcblxuICAgICAgYWNlbDogZnJhZy5hY2VsIHx8IHt4OiAwLCB5OiAwfVxuICAgIH07XG4gIH0sXG5cbiAgYmFzZVBsYXllcjogZnVuY3Rpb24oY2VudGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKHtcbiAgICAgIHJhZGl1czogNSxcbiAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgb3V0bGluZUNvbG9yOiAnYmxhY2snLFxuXG4gICAgICBwb3M6IGNlbnRlcixcblxuICAgICAgbWF4VmVsOiB7eDogMywgeTogM30sXG4gICAgICBhY2VsOiB7eDogMC40LCB5OiAwLjR9XG4gICAgfSk7XG4gIH0sXG5cbiAgY2hlY2tDb2xsaXNpb246IGZ1bmN0aW9uKGVudDEsIGVudDIpIHtcbiAgICByZXR1cm4gc3F1YXJlQ2hlY2soZW50MSwgZW50MikgJiYgZGlzdGFuY2VDaGVjayhlbnQxLCBlbnQyKTtcbiAgfSxcblxuICBhY2VsOiBmdW5jdGlvbihlbnRpdHkpIHtcbiAgICBlbnRpdHkudmVsLnkgKz0gZW50aXR5LmFjZWwueTtcbiAgICBlbnRpdHkudmVsLnggKz0gZW50aXR5LmFjZWwueDtcbiAgfSxcblxuICBtb3ZlOiBmdW5jdGlvbihlbnRpdHkpIHtcbiAgICBlbnRpdHkudmVsID0gbGltaXRWZWwoZW50aXR5KTtcblxuICAgIGVudGl0eS5wb3MgPSB2ZWMyLmFkZChlbnRpdHkucG9zLCBlbnRpdHkudmVsKTtcbiAgfSxcblxuICBtb3ZlV2l0aEtleWJvYXJkOiBmdW5jdGlvbihlbnRpdHksIGtleWJvYXJkKSB7XG4gICAgaWYoa2V5Ym9hcmQudXApIHtcbiAgICAgIGVudGl0eS52ZWwueSAtPSBlbnRpdHkuYWNlbC55O1xuICAgIH1cbiAgICBpZihrZXlib2FyZC5kb3duKSB7XG4gICAgICBlbnRpdHkudmVsLnkgKz0gZW50aXR5LmFjZWwueTtcbiAgICB9XG4gICAgaWYoa2V5Ym9hcmQubGVmdCkge1xuICAgICAgZW50aXR5LnZlbC54IC09IGVudGl0eS5hY2VsLng7XG4gICAgfVxuICAgIGlmKGtleWJvYXJkLnJpZ2h0KSB7XG4gICAgICBlbnRpdHkudmVsLnggKz0gZW50aXR5LmFjZWwueDtcbiAgICB9XG5cbiAgICB0aGlzLm1vdmUoZW50aXR5KTtcbiAgfSxcblxuICBtb3ZlV2l0aFBsYXllcjogZnVuY3Rpb24oZW50aXR5LCBiYXNlUGxheWVyKSB7XG4gICAgZW50aXR5LnBvcyA9IHZlYzIuc3ViKGJhc2VQbGF5ZXIucG9zLCBlbnRpdHkucG9zT2Zmc2V0KTtcbiAgfSxcblxuICBzd2FwQXJvdW5kOiBmdW5jdGlvbihlbnRpdHksIGNhbnZhc1NpemUpIHtcbiAgICAvLyBZIEF4aXNcbiAgICBpZihlbnRpdHkucG9zLnkgPiBjYW52YXNTaXplLnkpIHtcbiAgICAgIGVudGl0eS5wb3MueSAtPSBjYW52YXNTaXplLnk7XG4gICAgfVxuICAgIGVsc2UgaWYoZW50aXR5LnBvcy55IDwgMCkge1xuICAgICAgZW50aXR5LnBvcy55ICs9IGNhbnZhc1NpemUueTtcbiAgICB9XG5cbiAgICAvLyBYIEF4aXNcbiAgICBpZihlbnRpdHkucG9zLnggPiBjYW52YXNTaXplLngpIHtcbiAgICAgIGVudGl0eS5wb3MueCAtPSBjYW52YXNTaXplLng7XG4gICAgfVxuICAgIGVsc2UgaWYoZW50aXR5LnBvcy54IDwgMCkge1xuICAgICAgZW50aXR5LnBvcy54ICs9IGNhbnZhc1NpemUueDtcbiAgICB9XG4gIH1cbn07XG4iLCJ2YXIgcHl0aGEgPSByZXF1aXJlKCcuL3B5dGhhJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZW50MSwgZW50Mikge1xuICB2YXIgcHl0aGFTb2wgPSBweXRoYShlbnQxLnBvcywgZW50Mi5wb3MpO1xuICByZXR1cm4gcHl0aGFTb2wgPCAoZW50MS5yYWRpdXMgKyBlbnQyLnJhZGl1cyk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb3MxLCBwb3MyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoXG4gICAgKChwb3MxLnggLSBwb3MyLngpICogKHBvczEueCAtIHBvczIueCkpICtcbiAgICAoKHBvczEueSAtIHBvczIueSkgKiAocG9zMS55IC0gcG9zMi55KSlcbiAgKTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gJyMnK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cigtNik7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtaW4sbWF4KSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZW50MSwgZW50Mikge1xuICByZXR1cm4gIShcbiAgICAoZW50MS5wb3MueCArIGVudDEucmFkaXVzKSA8IChlbnQyLnBvcy54IC0gZW50Mi5yYWRpdXMpIHx8XG4gICAgKGVudDEucG9zLnkgKyBlbnQxLnJhZGl1cykgPCAoZW50Mi5wb3MueSAtIGVudDIucmFkaXVzKSB8fFxuICAgIChlbnQxLnBvcy54IC0gZW50MS5yYWRpdXMpID4gKGVudDIucG9zLnggKyBlbnQyLnJhZGl1cykgfHxcbiAgICAoZW50MS5wb3MueSAtIGVudDEucmFkaXVzKSA+IChlbnQyLnBvcy55ICsgZW50Mi5yYWRpdXMpXG4gICk7XG59O1xuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgdmFyIHVwZGF0ZSA9IHJlcXVpcmUoJy4vdXBkYXRlJyk7XG5cbiAgdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpO1xuICB2YXIgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQnKTtcbiAgdmFyIHNjb3JlQm9hcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlQm9hcmRzJyk7XG5cbiAgc3RhcnRCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBzY29yZUJvYXJkcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgIHVwZGF0ZS5yZW5kZXJMb29wKCk7XG4gICAgdXBkYXRlLnNlY29uZHNMb29wKCk7XG4gIH07XG59KTtcbiIsInZhciBDb21ib2tleXMgPSByZXF1aXJlKCdjb21ib2tleXMnKTtcbnZhciBjYW52YXNJbnB1dCA9IG5ldyBDb21ib2tleXMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcblxudmFyIGtiID0ge1xuICB1cDogZmFsc2UsIGRvd246IGZhbHNlLCBsZWZ0OiBmYWxzZSwgcmlnaHQ6IGZhbHNlXG59O1xuXG5jYW52YXNJbnB1dC5iaW5kKCd1cCcsIGZ1bmN0aW9uKCkgICAgeyBrYi51cCA9IHRydWU7ICAgICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgndXAnLCBmdW5jdGlvbigpICAgIHsga2IudXAgPSBmYWxzZTsgICAgfSwgJ2tleXVwJyk7XG5jYW52YXNJbnB1dC5iaW5kKCdkb3duJywgZnVuY3Rpb24oKSAgeyBrYi5kb3duID0gdHJ1ZTsgICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgnZG93bicsIGZ1bmN0aW9uKCkgIHsga2IuZG93biA9IGZhbHNlOyAgfSwgJ2tleXVwJyk7XG5jYW52YXNJbnB1dC5iaW5kKCdsZWZ0JywgZnVuY3Rpb24oKSAgeyBrYi5sZWZ0ID0gdHJ1ZTsgICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgnbGVmdCcsIGZ1bmN0aW9uKCkgIHsga2IubGVmdCA9IGZhbHNlOyAgfSwgJ2tleXVwJyk7XG5jYW52YXNJbnB1dC5iaW5kKCdyaWdodCcsIGZ1bmN0aW9uKCkgeyBrYi5yaWdodCA9IHRydWU7ICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgncmlnaHQnLCBmdW5jdGlvbigpIHsga2IucmlnaHQgPSBmYWxzZTsgfSwgJ2tleXVwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ga2I7XG4iLCJ2YXIgZG9tID0ge1xuICBzY29yZUJvYXJkczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlQm9hcmRzJyksXG4gIGF2b2lkaW5nU2Vjb25kczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY29uZHNBdm9pZGVkJyksXG4gIHNlY29uZHNMZWZ0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vjb25kc0xlZnQnKSxcbiAgYW1vdW50Q29sbGVjdGVkOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW1vdW50Q29sbGVjdGVkJylcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhdm9pZGluZ1NlY29uZHM6IDAsXG4gIHNlY29uZHNMZWZ0OiAyMCxcbiAgYW1vdW50Q29sbGVjdGVkOiAwLFxuXG4gIHVwZGF0ZURPTTogZnVuY3Rpb24oKSB7XG4gICAgZG9tLmF2b2lkaW5nU2Vjb25kcy5pbm5lckhUTUwgPSB0aGlzLmF2b2lkaW5nU2Vjb25kcztcbiAgICBkb20uc2Vjb25kc0xlZnQuaW5uZXJIVE1MID0gdGhpcy5zZWNvbmRzTGVmdDtcbiAgICBkb20uYW1vdW50Q29sbGVjdGVkLmlubmVySFRNTCA9IHRoaXMuYW1vdW50Q29sbGVjdGVkO1xuICB9LFxuXG4gIGhpZGU6IGZ1bmN0aW9uKCkge1xuICAgIGRvbS5zY29yZUJvYXJkcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIGF2b2lkaW5nOiB0cnVlLFxuICBmaW5pc2hlZDogZmFsc2UsXG5cbiAgaGFzTW92ZWQ6IGZhbHNlXG59O1xuIiwidmFyIHZlYzIgPSByZXF1aXJlKCcuL3ZlYzIuanMnKTtcbnZhciByYW5kSW50ID0gcmVxdWlyZSgnLi9mYWIvcmFuZEludCcpO1xudmFyIHJhbmRIZXggPSByZXF1aXJlKCcuL2ZhYi9yYW5kSGV4Jyk7XG5cbnZhciBlbnRpdHkgPSByZXF1aXJlKCcuL2VudGl0eScpO1xudmFyIGNhbnZhcyA9IHJlcXVpcmUoJy4vY2FudmFzJyk7XG52YXIga2V5Ym9hcmQgPSByZXF1aXJlKCcuL2tleWJvYXJkJyk7XG5cbnZhciBzdGF0ZSA9IHJlcXVpcmUoJy4vc3RhdGUnKTtcblxudmFyIHNjb3JlQm9hcmQgPSByZXF1aXJlKCcuL3Njb3JlQm9hcmQnKTtcblxudmFyIHBsYXllckFycmF5ID0gW107XG52YXIgYnVsbGV0QXJyYXkgPSBbXTtcblxudmFyIGZyYW1lID0gLTE7XG52YXIgc2Vjb25kcyA9IC0xO1xuXG5jYW52YXMucmVzaXplKCk7XG5cbnZhciBiYXNlUGxheWVyID0gZW50aXR5LmJhc2VQbGF5ZXIoY2FudmFzLmdldENlbnRlcigpKTtcblxuZnVuY3Rpb24gY2hlY2tDb2xsaXNpb24ocGxheWVyRW50aXR5KSB7XG4gIGZvcih2YXIgYj0wLCBiTGVuPWJ1bGxldEFycmF5Lmxlbmd0aDsgYiA8IGJMZW47IGIrKykge1xuICAgIGlmKGJ1bGxldEFycmF5W2JdICYmIGVudGl0eS5jaGVja0NvbGxpc2lvbihwbGF5ZXJFbnRpdHksYnVsbGV0QXJyYXlbYl0pKSB7XG4gICAgICBsZXQgYnVsbGV0VG9Nb3ZlID0gYnVsbGV0QXJyYXlbYl07XG5cbiAgICAgIHBsYXllckFycmF5LnB1c2goZW50aXR5LmNyZWF0ZSh7XG4gICAgICAgIHJhZGl1czogYnVsbGV0VG9Nb3ZlLnJhZGl1cyxcbiAgICAgICAgY29sb3I6IGJ1bGxldFRvTW92ZS5jb2xvcixcbiAgICAgICAgcG9zOiBidWxsZXRUb01vdmUucG9zLFxuICAgICAgICBwb3NPZmZzZXQ6IHZlYzIuc3ViKGJhc2VQbGF5ZXIucG9zLCBidWxsZXRUb01vdmUucG9zKVxuICAgICAgfSkpO1xuXG4gICAgICBidWxsZXRBcnJheS5zcGxpY2UoYiwxKTtcblxuICAgICAgaWYoc3RhdGUuYXZvaWRpbmcpIHtcbiAgICAgICAgc3RhdGUuYXZvaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2b2lkQm9hcmQnKS5zdHlsZS5vcGFjaXR5ID0gJzAuMjUnO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sbGVjdEJvYXJkJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICB9XG5cbiAgICAgIHNjb3JlQm9hcmQuYW1vdW50Q29sbGVjdGVkKys7XG4gICAgICBzY29yZUJvYXJkLnVwZGF0ZURPTSgpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJMb29wKCkge1xuICBmcmFtZSsrO1xuICBjYW52YXMuY2xlYXIoKTtcblxuICB2YXIgY2FudmFzU2l6ZSA9IGNhbnZhcy5nZXRTaXplKCk7XG5cbiAgaWYoIXN0YXRlLmhhc01vdmVkKSB7XG4gICAgY2FudmFzLmltZygndGhpc0lzWW91JyxjYW52YXNTaXplLnggLyAyIC0gKDcwKSxjYW52YXNTaXplLnkgLyAyIC0gKDEyMykpO1xuICAgIGlmKGtleWJvYXJkLnVwIHx8IGtleWJvYXJkLmRvd24gfHwga2V5Ym9hcmQubGVmdCB8fCBrZXlib2FyZC5yaWdodCkge1xuICAgICAgc3RhdGUuaGFzTW92ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZvcih2YXIgaT0wOyBpIDwgYnVsbGV0QXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZihidWxsZXRBcnJheVtpXSkge1xuICAgICAgbGV0IGJ1bGxldEVudGl0eSA9IGJ1bGxldEFycmF5W2ldO1xuXG4gICAgICBlbnRpdHkubW92ZShidWxsZXRFbnRpdHkpO1xuICAgICAgZW50aXR5LmFjZWwoYnVsbGV0RW50aXR5KTtcbiAgICAgIGVudGl0eS5zd2FwQXJvdW5kKGJ1bGxldEVudGl0eSwgY2FudmFzU2l6ZSk7XG5cbiAgICAgIGNhbnZhcy5jaXJjbGUoYnVsbGV0RW50aXR5KTtcbiAgICB9XG4gIH1cblxuICBlbnRpdHkubW92ZVdpdGhLZXlib2FyZChiYXNlUGxheWVyLCBrZXlib2FyZCk7XG4gIGVudGl0eS5zd2FwQXJvdW5kKGJhc2VQbGF5ZXIsIGNhbnZhc1NpemUpO1xuICBjYW52YXMub3V0bGluZUNpcmNsZShiYXNlUGxheWVyKTtcbiAgY2hlY2tDb2xsaXNpb24oYmFzZVBsYXllcik7XG5cbiAgZm9yKHZhciBwPTA7IHAgPCBwbGF5ZXJBcnJheS5sZW5ndGg7IHArKykge1xuICAgIGxldCBwbGF5ZXJFbnRpdHkgPSBwbGF5ZXJBcnJheVtwXTtcblxuICAgIGVudGl0eS5tb3ZlV2l0aFBsYXllcihwbGF5ZXJFbnRpdHksIGJhc2VQbGF5ZXIpO1xuICAgIGVudGl0eS5zd2FwQXJvdW5kKHBsYXllckVudGl0eSwgY2FudmFzU2l6ZSk7XG5cbiAgICBjYW52YXMuY2lyY2xlKHBsYXllckVudGl0eSk7XG4gICAgY2hlY2tDb2xsaXNpb24ocGxheWVyRW50aXR5KTtcbiAgfVxuXG4gIGlmKCFzdGF0ZS5maW5pc2hlZCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyTG9vcCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2Vjb25kc0xvb3AoKSB7XG4gIHNlY29uZHMrKztcblxuICBpZihzdGF0ZS5oYXNNb3ZlZCkge1xuICAgIGlmKHN0YXRlLmF2b2lkaW5nKSB7XG4gICAgICBzY29yZUJvYXJkLmF2b2lkaW5nU2Vjb25kcysrO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY29yZUJvYXJkLnNlY29uZHNMZWZ0LS07XG5cbiAgICAgIGlmKHNjb3JlQm9hcmQuc2Vjb25kc0xlZnQgPD0gMCkge1xuICAgICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2NvcmVCb2FyZC51cGRhdGVET00oKTtcblxuICAgIGlmKGJ1bGxldEFycmF5Lmxlbmd0aCA8PSAxMzApIHtcbiAgICAgIGJ1bGxldEFycmF5LnB1c2goZW50aXR5LmNyZWF0ZSh7XG4gICAgICAgIHJhZGl1czogcmFuZEludCg3LDE0KSxcbiAgICAgICAgY29sb3I6IHJhbmRIZXgoKSxcblxuICAgICAgICBwb3M6IGNhbnZhcy5nZXRSYW5kb21Cb3VuZFBvaW50KCksXG4gICAgICAgIG1heFZlbDoge1xuICAgICAgICAgIHg6ICgoTWF0aC5yYW5kb20oKSAqIHNlY29uZHMvNykgKyAxKSxcbiAgICAgICAgICB5OiAoKE1hdGgucmFuZG9tKCkgKiBzZWNvbmRzLzcpICsgMSlcbiAgICAgICAgfSxcbiAgICAgICAgYWNlbDoge1xuICAgICAgICAgIHg6IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtMC4wMDUgOiAwLjAwNSxcbiAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTAuMDA1IDogMC4wMDVcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGlmKCFzdGF0ZS5maW5pc2hlZCkge1xuICAgIHNldFRpbWVvdXQoc2Vjb25kc0xvb3AsIDEwMDApO1xuICAgIC8vZmluaXNoKCk7XG4gIH0gZWxzZSB7XG4gICAgZmluaXNoKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluaXNoKCkge1xuICBzY29yZUJvYXJkLmhpZGUoKTtcbiAgY2FudmFzLmhpZGUoKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmluaXNoJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW5kZXJMb29wOiByZW5kZXJMb29wLFxuICBzZWNvbmRzTG9vcDogc2Vjb25kc0xvb3Bcbn07XG4iLCJmdW5jdGlvbiBhZGQoZmlyc3RWZWMsIHNlY29uZFZlYykge1xuICByZXR1cm4geyB4OiBmaXJzdFZlYy54ICsgc2Vjb25kVmVjLngsIHk6IGZpcnN0VmVjLnkgKyBzZWNvbmRWZWMueSB9O1xufVxuXG5mdW5jdGlvbiBzdWIoZmlyc3RWZWMsIHNlY29uZFZlYykge1xuICByZXR1cm4geyB4OiBmaXJzdFZlYy54IC0gc2Vjb25kVmVjLngsIHk6IGZpcnN0VmVjLnkgLSBzZWNvbmRWZWMueSB9O1xufVxuXG5mdW5jdGlvbiBtdWx0aShmaXJzdFZlYywgc2Vjb25kVmVjKSB7XG4gIHJldHVybiB7IHg6IGZpcnN0VmVjLnggKiBzZWNvbmRWZWMueCwgeTogZmlyc3RWZWMueSAqIHNlY29uZFZlYy55IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZCxcbiAgc3ViOiBzdWIsXG4gIG11bHRpOiBtdWx0aVxufTtcbiJdfQ=="}