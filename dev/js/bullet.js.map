{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/combokeys/Combokeys/index.js","node_modules/combokeys/Combokeys/prototype/addEvents.js","node_modules/combokeys/Combokeys/prototype/bind.js","node_modules/combokeys/Combokeys/prototype/bindMultiple.js","node_modules/combokeys/Combokeys/prototype/bindSequence.js","node_modules/combokeys/Combokeys/prototype/bindSingle.js","node_modules/combokeys/Combokeys/prototype/detach.js","node_modules/combokeys/Combokeys/prototype/dom-event.js","node_modules/combokeys/Combokeys/prototype/fireCallback.js","node_modules/combokeys/Combokeys/prototype/getKeyInfo.js","node_modules/combokeys/Combokeys/prototype/getMatches.js","node_modules/combokeys/Combokeys/prototype/getReverseMap.js","node_modules/combokeys/Combokeys/prototype/handleKey.js","node_modules/combokeys/Combokeys/prototype/handleKeyEvent.js","node_modules/combokeys/Combokeys/prototype/modifiersMatch.js","node_modules/combokeys/Combokeys/prototype/pickBestAction.js","node_modules/combokeys/Combokeys/prototype/reset.js","node_modules/combokeys/Combokeys/prototype/resetSequenceTimer.js","node_modules/combokeys/Combokeys/prototype/resetSequences.js","node_modules/combokeys/Combokeys/prototype/stopCallback.js","node_modules/combokeys/Combokeys/prototype/trigger.js","node_modules/combokeys/Combokeys/prototype/unbind.js","node_modules/combokeys/Combokeys/reset.js","node_modules/combokeys/helpers/characterFromEvent.js","node_modules/combokeys/helpers/eventModifiers.js","node_modules/combokeys/helpers/isModifier.js","node_modules/combokeys/helpers/keysFromString.js","node_modules/combokeys/helpers/preventDefault.js","node_modules/combokeys/helpers/shift-map.js","node_modules/combokeys/helpers/special-aliases.js","node_modules/combokeys/helpers/special-characters-map.js","node_modules/combokeys/helpers/special-keys-map.js","node_modules/combokeys/helpers/stopPropagation.js","src/js/canvas.js","src/js/entity.js","src/js/fab/distanceCheck.js","src/js/fab/pytha.js","src/js/fab/randHex.js","src/js/fab/randInt.js","src/js/fab/squareCheck.js","src/js/index.js","src/js/keyboard.js","src/js/scoreBoard.js","src/js/state.js","src/js/update.js","src/js/vec2.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA,IAAI,UAAU,QAAQ,eAAR,CAAd;;AAEA,IAAI,SAAS,SAAS,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAI,IAAI,OAAO,UAAP,CAAkB,IAAlB,CAAR;;AAEA,IAAI,OAAO;AACV,YAAW,SAAS,cAAT,CAAwB,cAAxB;AADD,CAAX;;AAIA,OAAO,OAAP,GAAiB;AAChB,UAAS,YAAW;AACnB,SAAO,EAAE,GAAG,OAAO,UAAZ,EAAwB,GAAG,OAAO,WAAlC,EAAP;AACA,EAHe;AAIhB,YAAW,YAAW;AACrB,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","file":"bullet.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function (element) {\n  var self = this\n  var Combokeys = self.constructor\n\n  /**\n   * a list of all the callbacks setup via Combokeys.bind()\n   *\n   * @type {Object}\n   */\n  self.callbacks = {}\n\n  /**\n   * direct map of string combinations to callbacks used for trigger()\n   *\n   * @type {Object}\n   */\n  self.directMap = {}\n\n  /**\n   * keeps track of what level each sequence is at since multiple\n   * sequences can start out with the same sequence\n   *\n   * @type {Object}\n   */\n  self.sequenceLevels = {}\n\n  /**\n   * variable to store the setTimeout call\n   *\n   * @type {null|number}\n   */\n  self.resetTimer\n\n  /**\n   * temporary state where we will ignore the next keyup\n   *\n   * @type {boolean|string}\n   */\n  self.ignoreNextKeyup = false\n\n  /**\n   * temporary state where we will ignore the next keypress\n   *\n   * @type {boolean}\n   */\n  self.ignoreNextKeypress = false\n\n  /**\n   * are we currently inside of a sequence?\n   * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n   *\n   * @type {boolean|string}\n   */\n  self.nextExpectedAction = false\n\n  self.element = element\n\n  self.addEvents()\n\n  Combokeys.instances.push(self)\n  return self\n}\n\nmodule.exports.prototype.bind = require('./prototype/bind')\nmodule.exports.prototype.bindMultiple = require('./prototype/bindMultiple')\nmodule.exports.prototype.unbind = require('./prototype/unbind')\nmodule.exports.prototype.trigger = require('./prototype/trigger')\nmodule.exports.prototype.reset = require('./prototype/reset.js')\nmodule.exports.prototype.stopCallback = require('./prototype/stopCallback')\nmodule.exports.prototype.handleKey = require('./prototype/handleKey')\nmodule.exports.prototype.addEvents = require('./prototype/addEvents')\nmodule.exports.prototype.bindSingle = require('./prototype/bindSingle')\nmodule.exports.prototype.getKeyInfo = require('./prototype/getKeyInfo')\nmodule.exports.prototype.pickBestAction = require('./prototype/pickBestAction')\nmodule.exports.prototype.getReverseMap = require('./prototype/getReverseMap')\nmodule.exports.prototype.getMatches = require('./prototype/getMatches')\nmodule.exports.prototype.resetSequences = require('./prototype/resetSequences')\nmodule.exports.prototype.fireCallback = require('./prototype/fireCallback')\nmodule.exports.prototype.bindSequence = require('./prototype/bindSequence')\nmodule.exports.prototype.resetSequenceTimer = require('./prototype/resetSequenceTimer')\nmodule.exports.prototype.detach = require('./prototype/detach')\n\nmodule.exports.instances = []\nmodule.exports.reset = require('./reset')\n\n/**\n * variable to store the flipped version of MAP from above\n * needed to check if we should use keypress or not when no action\n * is specified\n *\n * @type {Object|undefined}\n */\nmodule.exports.REVERSE_MAP = null\n","/* eslint-env node, browser */\n'use strict'\nmodule.exports = function () {\n  var self = this\n  var on = require('./dom-event')\n  var element = self.element\n\n  self.eventHandler = require('./handleKeyEvent').bind(self)\n\n  on(element, 'keypress', self.eventHandler)\n  on(element, 'keydown', self.eventHandler)\n  on(element, 'keyup', self.eventHandler)\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * binds an event to Combokeys\n *\n * can be a single key, a combination of keys separated with +,\n * an array of keys, or a sequence of keys separated by spaces\n *\n * be sure to list the modifier keys first to make sure that the\n * correct key ends up getting bound (the last key in the pattern)\n *\n * @param {string|Array} keys\n * @param {Function} callback\n * @param {string=} action - \"keypress\", \"keydown\", or \"keyup\"\n * @returns void\n */\nmodule.exports = function (keys, callback, action) {\n  var self = this\n\n  keys = keys instanceof Array ? keys : [keys]\n  self.bindMultiple(keys, callback, action)\n  return self\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds multiple combinations to the same callback\n *\n * @param {Array} combinations\n * @param {Function} callback\n * @param {string|undefined} action\n * @returns void\n */\nmodule.exports = function (combinations, callback, action) {\n  var self = this\n\n  for (var j = 0; j < combinations.length; ++j) {\n    self.bindSingle(combinations[j], callback, action)\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a key sequence to an event\n *\n * @param {string} combo - combo specified in bind call\n * @param {Array} keys\n * @param {Function} callback\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (combo, keys, callback, action) {\n  var self = this\n\n  // start off by adding a sequence level record for this combination\n  // and setting the level to 0\n  self.sequenceLevels[combo] = 0\n\n  /**\n   * callback to increase the sequence level for this sequence and reset\n   * all other sequences that were active\n   *\n   * @param {string} nextAction\n   * @returns {Function}\n   */\n  function increaseSequence (nextAction) {\n    return function () {\n      self.nextExpectedAction = nextAction\n      ++self.sequenceLevels[combo]\n      self.resetSequenceTimer()\n    }\n  }\n\n  /**\n   * wraps the specified callback inside of another function in order\n   * to reset all sequence counters as soon as this sequence is done\n   *\n   * @param {Event} e\n   * @returns void\n   */\n  function callbackAndReset (e) {\n    var characterFromEvent\n    self.fireCallback(callback, e, combo)\n\n    // we should ignore the next key up if the action is key down\n    // or keypress.  this is so if you finish a sequence and\n    // release the key the final key will not trigger a keyup\n    if (action !== 'keyup') {\n      characterFromEvent = require('../../helpers/characterFromEvent')\n      self.ignoreNextKeyup = characterFromEvent(e)\n    }\n\n    // weird race condition if a sequence ends with the key\n    // another sequence begins with\n    setTimeout(\n      function () {\n        self.resetSequences()\n      },\n      10\n    )\n  }\n\n  // loop through keys one at a time and bind the appropriate callback\n  // function.  for any key leading up to the final one it should\n  // increase the sequence. after the final, it should reset all sequences\n  //\n  // if an action is specified in the original bind call then that will\n  // be used throughout.  otherwise we will pass the action that the\n  // next key in the sequence should match.  this allows a sequence\n  // to mix and match keypress and keydown events depending on which\n  // ones are better suited to the key provided\n  for (var j = 0; j < keys.length; ++j) {\n    var isFinal = j + 1 === keys.length\n    var wrappedCallback = isFinal ? callbackAndReset : increaseSequence(action || self.getKeyInfo(keys[j + 1]).action)\n    self.bindSingle(keys[j], wrappedCallback, action, combo, j)\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a single keyboard combination\n *\n * @param {string} combination\n * @param {Function} callback\n * @param {string=} action\n * @param {string=} sequenceName - name of sequence if part of sequence\n * @param {number=} level - what part of the sequence the command is\n * @returns void\n */\nmodule.exports = function (combination, callback, action, sequenceName, level) {\n  var self = this\n\n  // store a direct mapped reference for use with Combokeys.trigger\n  self.directMap[combination + ':' + action] = callback\n\n  // make sure multiple spaces in a row become a single space\n  combination = combination.replace(/\\s+/g, ' ')\n\n  var sequence = combination.split(' ')\n  var info\n\n  // if this pattern is a sequence of keys then run through this method\n  // to reprocess each pattern one key at a time\n  if (sequence.length > 1) {\n    self.bindSequence(combination, sequence, callback, action)\n    return\n  }\n\n  info = self.getKeyInfo(combination, action)\n\n  // make sure to initialize array if this is the first time\n  // a callback is added for this key\n  self.callbacks[info.key] = self.callbacks[info.key] || []\n\n  // remove an existing match if there is one\n  self.getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level)\n\n  // add this call back to the array\n  // if it is a sequence put it at the beginning\n  // if not put it at the end\n  //\n  // this is important because the way these are processed expects\n  // the sequence ones to come first\n  self.callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n    callback: callback,\n    modifiers: info.modifiers,\n    action: info.action,\n    seq: sequenceName,\n    level: level,\n    combo: combination\n  })\n}\n","var off = require('./dom-event').off\nmodule.exports = function () {\n  var self = this\n  var element = self.element\n\n  off(element, 'keypress', self.eventHandler)\n  off(element, 'keydown', self.eventHandler)\n  off(element, 'keyup', self.eventHandler)\n}\n","module.exports = on\nmodule.exports.on = on\nmodule.exports.off = off\n\nfunction on (element, event, callback, capture) {\n  !element.addEventListener && (event = 'on' + event)\n  ;(element.addEventListener || element.attachEvent).call(element, event, callback, capture)\n  return callback\n}\n\nfunction off (element, event, callback, capture) {\n  !element.removeEventListener && (event = 'on' + event)\n  ;(element.removeEventListener || element.detachEvent).call(element, event, callback, capture)\n  return callback\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * actually calls the callback function\n *\n * if your callback function returns false this will use the jquery\n * convention - prevent default and stop propogation on the event\n *\n * @param {Function} callback\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (callback, e, combo, sequence) {\n  var self = this\n  var preventDefault\n  var stopPropagation\n\n  // if this event should not happen stop here\n  if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n    return\n  }\n\n  if (callback(e, combo) === false) {\n    preventDefault = require('../../helpers/preventDefault')\n    preventDefault(e)\n    stopPropagation = require('../../helpers/stopPropagation')\n    stopPropagation(e)\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Gets info for a specific key combination\n *\n * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n * @param  {string=} action\n * @returns {Object}\n */\nmodule.exports = function (combination, action) {\n  var self = this\n  var keysFromString\n  var keys\n  var key\n  var j\n  var modifiers = []\n  var SPECIAL_ALIASES\n  var SHIFT_MAP\n  var isModifier\n\n  keysFromString = require('../../helpers/keysFromString')\n  // take the keys from this pattern and figure out what the actual\n  // pattern is all about\n  keys = keysFromString(combination)\n\n  SPECIAL_ALIASES = require('../../helpers/special-aliases')\n  SHIFT_MAP = require('../../helpers/shift-map')\n  isModifier = require('../../helpers/isModifier')\n  for (j = 0; j < keys.length; ++j) {\n    key = keys[j]\n\n    // normalize key names\n    if (SPECIAL_ALIASES[key]) {\n      key = SPECIAL_ALIASES[key]\n    }\n\n    // if this is not a keypress event then we should\n    // be smart about using shift keys\n    // this will only work for US keyboards however\n    if (action && action !== 'keypress' && SHIFT_MAP[key]) {\n      key = SHIFT_MAP[key]\n      modifiers.push('shift')\n    }\n\n    // if this key is a modifier then add it to the list of modifiers\n    if (isModifier(key)) {\n      modifiers.push(key)\n    }\n  }\n\n  // depending on what the key combination is\n  // we will try to pick the best event for it\n  action = self.pickBestAction(key, modifiers, action)\n\n  return {\n    key: key,\n    modifiers: modifiers,\n    action: action\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * finds all callbacks that match based on the keycode, modifiers,\n * and action\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event|Object} e\n * @param {string=} sequenceName - name of the sequence we are looking for\n * @param {string=} combination\n * @param {number=} level\n * @returns {Array}\n */\nmodule.exports = function (character, modifiers, e, sequenceName, combination, level) {\n  var self = this\n  var j\n  var callback\n  var matches = []\n  var action = e.type\n  var isModifier\n  var modifiersMatch\n\n  if (\n      action === 'keypress' &&\n      // Firefox fires keypress for arrows\n      !(e.code && e.code.slice(0, 5) === 'Arrow')\n  ) {\n    // 'any-character' callbacks are only on `keypress`\n    var anyCharCallbacks = self.callbacks['any-character'] || []\n    anyCharCallbacks.forEach(function (callback) {\n      matches.push(callback)\n    })\n  }\n\n  if (!self.callbacks[character]) { return matches }\n\n  isModifier = require('../../helpers/isModifier')\n  // if a modifier key is coming up on its own we should allow it\n  if (action === 'keyup' && isModifier(character)) {\n    modifiers = [character]\n  }\n\n  // loop through all callbacks for the key that was pressed\n  // and see if any of them match\n  for (j = 0; j < self.callbacks[character].length; ++j) {\n    callback = self.callbacks[character][j]\n\n    // if a sequence name is not specified, but this is a sequence at\n    // the wrong level then move onto the next match\n    if (!sequenceName && callback.seq && self.sequenceLevels[callback.seq] !== callback.level) {\n      continue\n    }\n\n    // if the action we are looking for doesn't match the action we got\n    // then we should keep going\n    if (action !== callback.action) {\n      continue\n    }\n\n    // if this is a keypress event and the meta key and control key\n    // are not pressed that means that we need to only look at the\n    // character, otherwise check the modifiers as well\n    //\n    // chrome will not fire a keypress if meta or control is down\n    // safari will fire a keypress if meta or meta+shift is down\n    // firefox will fire a keypress if meta or control is down\n    modifiersMatch = require('./modifiersMatch')\n    if ((action === 'keypress' && !e.metaKey && !e.ctrlKey) || modifiersMatch(modifiers, callback.modifiers)) {\n      // when you bind a combination or sequence a second time it\n      // should overwrite the first one.  if a sequenceName or\n      // combination is specified in this call it does just that\n      //\n      // @todo make deleting its own method?\n      var deleteCombo = !sequenceName && callback.combo === combination\n      var deleteSequence = sequenceName && callback.seq === sequenceName && callback.level === level\n      if (deleteCombo || deleteSequence) {\n        self.callbacks[character].splice(j, 1)\n      }\n\n      matches.push(callback)\n    }\n  }\n\n  return matches\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * reverses the map lookup so that we can look for specific keys\n * to see what can and can't use keypress\n *\n * @return {Object}\n */\nmodule.exports = function () {\n  var self = this\n  var constructor = self.constructor\n  var SPECIAL_KEYS_MAP\n\n  if (!constructor.REVERSE_MAP) {\n    constructor.REVERSE_MAP = {}\n    SPECIAL_KEYS_MAP = require('../../helpers/special-keys-map')\n    for (var key in SPECIAL_KEYS_MAP) {\n      // pull out the numeric keypad from here cause keypress should\n      // be able to detect the keys from the character\n      if (key > 95 && key < 112) {\n        continue\n      }\n\n      if (SPECIAL_KEYS_MAP.hasOwnProperty(key)) {\n        constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]] = key\n      }\n    }\n  }\n  return constructor.REVERSE_MAP\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a character key event\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (character, modifiers, e) {\n  var self = this\n  var callbacks\n  var j\n  var doNotReset = {}\n  var maxLevel = 0\n  var processedSequenceCallback = false\n  var isModifier\n  var ignoreThisKeypress\n\n  callbacks = self.getMatches(character, modifiers, e)\n  // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n  for (j = 0; j < callbacks.length; ++j) {\n    if (callbacks[j].seq) {\n      maxLevel = Math.max(maxLevel, callbacks[j].level)\n    }\n  }\n\n  // loop through matching callbacks for this key event\n  for (j = 0; j < callbacks.length; ++j) {\n    // fire for all sequence callbacks\n    // this is because if for example you have multiple sequences\n    // bound such as \"g i\" and \"g t\" they both need to fire the\n    // callback for matching g cause otherwise you can only ever\n    // match the first one\n    if (callbacks[j].seq) {\n      // only fire callbacks for the maxLevel to prevent\n      // subsequences from also firing\n      //\n      // for example 'a option b' should not cause 'option b' to fire\n      // even though 'option b' is part of the other sequence\n      //\n      // any sequences that do not match here will be discarded\n      // below by the resetSequences call\n      if (callbacks[j].level !== maxLevel) {\n        continue\n      }\n\n      processedSequenceCallback = true\n\n      // keep a list of which sequences were matches for later\n      doNotReset[callbacks[j].seq] = 1\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo, callbacks[j].seq)\n      continue\n    }\n\n    // if there were no sequence matches but we are still here\n    // that means this is a regular match so we should fire that\n    if (!processedSequenceCallback) {\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo)\n    }\n  }\n\n  // if the key you pressed matches the type of sequence without\n  // being a modifier (ie \"keyup\" or \"keypress\") then we should\n  // reset all sequences that were not matched by this event\n  //\n  // this is so, for example, if you have the sequence \"h a t\" and you\n  // type \"h e a r t\" it does not match.  in this case the \"e\" will\n  // cause the sequence to reset\n  //\n  // modifier keys are ignored because you can have a sequence\n  // that contains modifiers such as \"enter ctrl+space\" and in most\n  // cases the modifier key will be pressed before the next key\n  //\n  // also if you have a sequence such as \"ctrl+b a\" then pressing the\n  // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n  //\n  // the \"keydown\" is expected when there is a modifier, but the\n  // \"keypress\" ends up matching the nextExpectedAction since it occurs\n  // after and that causes the sequence to reset\n  //\n  // we ignore keypresses in a sequence that directly follow a keydown\n  // for the same character\n  ignoreThisKeypress = e.type === 'keypress' && self.ignoreNextKeypress\n  isModifier = require('../../helpers/isModifier')\n  if (e.type === self.nextExpectedAction && !isModifier(character) && !ignoreThisKeypress) {\n    self.resetSequences(doNotReset)\n  }\n\n  self.ignoreNextKeypress = processedSequenceCallback && e.type === 'keydown'\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a keydown event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  var self = this\n  var characterFromEvent\n  var eventModifiers\n\n  // normalize e.which for key events\n  // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n  if (typeof e.which !== 'number') {\n    e.which = e.keyCode\n  }\n  characterFromEvent = require('../../helpers/characterFromEvent')\n  var character = characterFromEvent(e)\n\n  // no character found then stop\n  if (!character) {\n    return\n  }\n\n  // need to use === for the character check because the character can be 0\n  if (e.type === 'keyup' && self.ignoreNextKeyup === character) {\n    self.ignoreNextKeyup = false\n    return\n  }\n\n  eventModifiers = require('../../helpers/eventModifiers')\n  self.handleKey(character, eventModifiers(e), e)\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * checks if two arrays are equal\n *\n * @param {Array} modifiers1\n * @param {Array} modifiers2\n * @returns {boolean}\n */\nmodule.exports = function (modifiers1, modifiers2) {\n  return modifiers1.sort().join(',') === modifiers2.sort().join(',')\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * picks the best action based on the key combination\n *\n * @param {string} key - character for key\n * @param {Array} modifiers\n * @param {string=} action passed in\n */\nmodule.exports = function (key, modifiers, action) {\n  var self = this\n\n  // if no action was picked in we should try to pick the one\n  // that we think would work best for this key\n  if (!action) {\n    action = self.getReverseMap()[key] ? 'keydown' : 'keypress'\n  }\n\n  // modifier keys don't work as expected with keypress,\n  // switch to keydown\n  if (action === 'keypress' && modifiers.length) {\n    action = 'keydown'\n  }\n\n  return action\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets the library back to its initial state. This is useful\n * if you want to clear out the current keyboard shortcuts and bind\n * new ones - for example if you switch to another page\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n  self.callbacks = {}\n  self.directMap = {}\n  return this\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * called to set a 1 second timeout on the specified sequence\n *\n * this is so after each key press in the sequence you have 1 second\n * to press the next key before you have to start over\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n\n  clearTimeout(self.resetTimer)\n  self.resetTimer = setTimeout(\n    function () {\n      self.resetSequences()\n    },\n    1000\n  )\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets all sequence counters except for the ones passed in\n *\n * @param {Object} doNotReset\n * @returns void\n */\nmodule.exports = function (doNotReset) {\n  var self = this\n\n  doNotReset = doNotReset || {}\n\n  var activeSequences = false\n  var key\n\n  for (key in self.sequenceLevels) {\n    if (doNotReset[key]) {\n      activeSequences = true\n      continue\n    }\n    self.sequenceLevels[key] = 0\n  }\n\n  if (!activeSequences) {\n    self.nextExpectedAction = false\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n* should we stop this event before firing off callbacks\n*\n* @param {Event} e\n* @param {Element} element\n* @return {boolean}\n*/\nmodule.exports = function (e, element) {\n  // if the element has the class \"combokeys\" then no need to stop\n  if ((' ' + element.className + ' ').indexOf(' combokeys ') > -1) {\n    return false\n  }\n\n  var tagName = element.tagName.toLowerCase()\n\n  // stop for input, select, and textarea\n  return tagName === 'input' || tagName === 'select' || tagName === 'textarea' || element.isContentEditable\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * triggers an event that has already been bound\n *\n * @param {string} keys\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n  if (self.directMap[keys + ':' + action]) {\n    self.directMap[keys + ':' + action]({}, keys)\n  }\n  return this\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * unbinds an event to Combokeys\n *\n * the unbinding sets the callback function of the specified key combo\n * to an empty function and deletes the corresponding key in the\n * directMap dict.\n *\n * TODO: actually remove this from the callbacks dictionary instead\n * of binding an empty function\n *\n * the keycombo+action has to be exactly the same as\n * it was defined in the bind method\n *\n * @param {string|Array} keys\n * @param {string} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n\n  return self.bind(keys, function () {}, action)\n}\n","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function () {\n  var self = this\n\n  self.instances.forEach(function (combokeys) {\n    combokeys.reset()\n  })\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes the event and returns the key character\n *\n * @param {Event} e\n * @return {string}\n */\nmodule.exports = function (e) {\n  var SPECIAL_KEYS_MAP,\n    SPECIAL_CHARACTERS_MAP\n  SPECIAL_KEYS_MAP = require('./special-keys-map')\n  SPECIAL_CHARACTERS_MAP = require('./special-characters-map')\n\n  // for keypress events we should return the character as is\n  if (e.type === 'keypress') {\n    var character = String.fromCharCode(e.which)\n\n    // if the shift key is not pressed then it is safe to assume\n    // that we want the character to be lowercase.  this means if\n    // you accidentally have caps lock on then your key bindings\n    // will continue to work\n    //\n    // the only side effect that might not be desired is if you\n    // bind something like 'A' cause you want to trigger an\n    // event when capital A is pressed caps lock will no longer\n    // trigger the event.  shift+a will though.\n    if (!e.shiftKey) {\n      character = character.toLowerCase()\n    }\n\n    return character\n  }\n\n  // for non keypress events the special maps are needed\n  if (SPECIAL_KEYS_MAP[e.which]) {\n    return SPECIAL_KEYS_MAP[e.which]\n  }\n\n  if (SPECIAL_CHARACTERS_MAP[e.which]) {\n    return SPECIAL_CHARACTERS_MAP[e.which]\n  }\n\n  // if it is not in the special map\n\n  // with keydown and keyup events the character seems to always\n  // come in as an uppercase character whether you are pressing shift\n  // or not.  we should make sure it is always lowercase for comparisons\n  return String.fromCharCode(e.which).toLowerCase()\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes a key event and figures out what the modifiers are\n *\n * @param {Event} e\n * @returns {Array}\n */\nmodule.exports = function (e) {\n  var modifiers = []\n\n  if (e.shiftKey) {\n    modifiers.push('shift')\n  }\n\n  if (e.altKey) {\n    modifiers.push('alt')\n  }\n\n  if (e.ctrlKey) {\n    modifiers.push('ctrl')\n  }\n\n  if (e.metaKey) {\n    modifiers.push('meta')\n  }\n\n  return modifiers\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * determines if the keycode specified is a modifier key or not\n *\n * @param {string} key\n * @returns {boolean}\n */\nmodule.exports = function (key) {\n  return key === 'shift' || key === 'ctrl' || key === 'alt' || key === 'meta'\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Converts from a string key combination to an array\n *\n * @param  {string} combination like \"command+shift+l\"\n * @return {Array}\n */\nmodule.exports = function (combination) {\n  if (combination === '+') {\n    return ['+']\n  }\n\n  return combination.split('+')\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * prevents default for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.preventDefault) {\n    e.preventDefault()\n    return\n  }\n\n  e.returnValue = false\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a mapping of keys that require shift on a US keypad\n * back to the non shift equivelents\n *\n * this is so you can use keyup events with these keys\n *\n * note that this will only work reliably on US keyboards\n *\n * @type {Object}\n */\nmodule.exports = {\n  '~': '`',\n  '!': '1',\n  '@': '2',\n  '#': '3',\n  '$': '4',\n  '%': '5',\n  '^': '6',\n  '&': '7',\n  '*': '8',\n  '(': '9',\n  ')': '0',\n  '_': '-',\n  '+': '=',\n  ':': ';',\n  '\"': \"'\",\n  '<': ',',\n  '>': '.',\n  '?': '/',\n  '|': '\\\\'\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a list of special strings you can use to map\n * to modifier keys when you specify your keyboard shortcuts\n *\n * @type {Object}\n */\nmodule.exports = {\n  'option': 'alt',\n  'command': 'meta',\n  'return': 'enter',\n  'escape': 'esc',\n  'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping for special characters so they can support\n *\n * this dictionary is only used incase you want to bind a\n * keyup or keydown event to one of these keys\n *\n * @type {Object}\n */\nmodule.exports = {\n  106: '*',\n  107: '+',\n  109: '-',\n  110: '.',\n  111: '/',\n  186: ';',\n  187: '=',\n  188: ',',\n  189: '-',\n  190: '.',\n  191: '/',\n  192: '`',\n  219: '[',\n  220: '\\\\',\n  221: ']',\n  222: \"'\"\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping of special keycodes to their corresponding keys\n *\n * everything in this dictionary cannot use keypress events\n * so it has to be here to map to the correct keycodes for\n * keyup/keydown events\n *\n * @type {Object}\n */\nmodule.exports = {\n  8: 'backspace',\n  9: 'tab',\n  13: 'enter',\n  16: 'shift',\n  17: 'ctrl',\n  18: 'alt',\n  20: 'capslock',\n  27: 'esc',\n  32: 'space',\n  33: 'pageup',\n  34: 'pagedown',\n  35: 'end',\n  36: 'home',\n  37: 'left',\n  38: 'up',\n  39: 'right',\n  40: 'down',\n  45: 'ins',\n  46: 'del',\n  91: 'meta',\n  93: 'meta',\n  187: 'plus',\n  189: 'minus',\n  224: 'meta'\n}\n\n/**\n * loop through the f keys, f1 to f19 and add them to the map\n * programatically\n */\nfor (var i = 1; i < 20; ++i) {\n  module.exports[111 + i] = 'f' + i\n}\n\n/**\n * loop through to map numbers on the numeric keypad\n */\nfor (i = 0; i <= 9; ++i) {\n  module.exports[i + 96] = i\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * stops propogation for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.stopPropagation) {\n    e.stopPropagation()\n    return\n  }\n\n  e.cancelBubble = true\n}\n","var randInt = require('./fab/randInt');\n\nvar canvas = document.getElementById('canvas');\nvar c = canvas.getContext('2d');\n\nvar imgs = {\n\tthisIsYou: document.getElementById('imgthisIsYou')\n};\n\nmodule.exports = {\n\tgetSize: function() {\n\t\treturn { x: window.innerWidth, y: window.innerHeight };\n\t},\n\tgetCenter: function() {\n\t\treturn { x: window.innerWidth/2, y: window.innerHeight/2 };\n\t},\n\tgetRandomBoundPoint: function() {\n\t\tif(Math.random() >= 0.5) {\n\t\t\treturn { x: randInt(0,window.innerWidth), y: 0 };\n\t\t}\n\t\treturn { x: 0, y: randInt(0,window.innerHeight) };\n\t},\n\n\tresize: function() {\n\t\tcanvas.width = window.innerWidth;\n\t\tcanvas.height = window.innerHeight;\n\t},\n\n\thide: function() {\n\t\tcanvas.style.display = 'none';\n\t},\n\n\timg: function(imgStr, x,y) {\n\t\tc.drawImage(imgs[imgStr],x,y);\n\t},\n\n\tcircle: function(entity) {\n\t\tc.fillStyle = entity.color;\n\t\tc.beginPath();\n\t\tc.arc(entity.pos.x, entity.pos.y, entity.radius, 0, 2*Math.PI);\n\t\tc.fill();\n\t},\n\n\toutlineCircle: function(entity) {\n\t\tc.fillStyle = entity.color;\n\t\tc.strokeStyle = entity.strokeColor;\n\t\tc.beginPath();\n\t\tc.arc(entity.pos.x, entity.pos.y, entity.radius, 0, 2*Math.PI);\n\t\tc.fill();\n\t\tc.stroke();\n\t},\n\n\tclear: function() {\n\t\tc.fillStyle = 'white';\n\t\tc.fillRect(0,0,canvas.width,canvas.height);\n\t},\n\n\ttext: function(pos,text,size,color) {\n\t\tc.fillStyle = color;\n\t\tc.font = size.toString() + 'px Helvetica';\n\t\tc.fillStyle(text, pos.x, pos.y);\n\t}\n};\n","var vec2 = require('./vec2');\n\nvar distanceCheck = require('./fab/distanceCheck');\n\nvar squareCheck = require('./fab/squareCheck');\n\nfunction limit1DVel(vel, maxVel) {\n\tif(vel > 0) {\n\t\treturn vel >= maxVel ? maxVel : vel;\n\t}\n\treturn vel <= -maxVel ? -maxVel: vel;\n}\n\nfunction limitVel(entity) {\n\treturn {\n\t\tx: limit1DVel(entity.vel.x, entity.maxVel.x),\n\t\ty: limit1DVel(entity.vel.y, entity.maxVel.y)\n\t};\n}\n\nmodule.exports = {\n\tcreate: function(frag) {\n\t\treturn {\n\t\t\tradius: frag.radius || 4,\n\t\t\tcolor: frag.color || 'black',\n\n\t\t\tpos: frag.pos || {x: 0, y: 0},\n\t\t\tposOffset: frag.posOffset || {x: 0, y: 0},\n\n\t\t\tvel: frag.vel || {x: 0, y: 0},\n\t\t\tmaxVel: frag.maxVel || {x: 0, y: 0},\n\n\t\t\tacel: frag.acel || {x: 0, y: 0}\n\t\t};\n\t},\n\n\tbasePlayer: function(center) {\n\t\treturn this.create({\n\t\t\tradius: 5,\n\t\t\tcolor: 'white',\n\t\t\toutlineColor: 'black',\n\n\t\t\tpos: center,\n\n\t\t\tmaxVel: {x: 3, y: 3},\n\t\t\tacel: {x: 0.4, y: 0.4}\n\t\t});\n\t},\n\n\tcheckCollision: function(ent1, ent2) {\n\t\treturn squareCheck(ent1, ent2) && distanceCheck(ent1, ent2);\n\t},\n\n\tacel: function(entity) {\n\t\tentity.vel.y += entity.acel.y;\n\t\tentity.vel.x += entity.acel.x;\n\t},\n\n\tmove: function(entity) {\n\t\tentity.vel = limitVel(entity);\n\n\t\tentity.pos = vec2.add(entity.pos, entity.vel);\n\t},\n\n\tmoveWithKeyboard: function(entity, keyboard) {\n\t\tif(keyboard.up) {\n\t\t\tentity.vel.y -= entity.acel.y;\n\t\t}\n\t\tif(keyboard.down) {\n\t\t\tentity.vel.y += entity.acel.y;\n\t\t}\n\t\tif(keyboard.left) {\n\t\t\tentity.vel.x -= entity.acel.x;\n\t\t}\n\t\tif(keyboard.right) {\n\t\t\tentity.vel.x += entity.acel.x;\n\t\t}\n\n\t\tthis.move(entity);\n\t},\n\n\tmoveWithPlayer: function(entity, basePlayer) {\n\t\tentity.pos = vec2.sub(basePlayer.pos, entity.posOffset);\n\t},\n\n\tswapAround: function(entity, canvasSize) {\n\t\t// Y Axis\n\t\tif(entity.pos.y > canvasSize.y) {\n\t\t\tentity.pos.y -= canvasSize.y;\n\t\t}\n\t\telse if(entity.pos.y < 0) {\n\t\t\tentity.pos.y += canvasSize.y;\n\t\t}\n\n\t\t// X Axis\n\t\tif(entity.pos.x > canvasSize.x) {\n\t\t\tentity.pos.x -= canvasSize.x;\n\t\t}\n\t\telse if(entity.pos.x < 0) {\n\t\t\tentity.pos.x += canvasSize.x;\n\t\t}\n\t}\n};\n","var pytha = require('./pytha');\n\nmodule.exports = function(ent1, ent2) {\n\tvar pythaSol = pytha(ent1.pos, ent2.pos);\n\treturn pythaSol < (ent1.radius + ent2.radius);\n};\n","module.exports = function(pos1, pos2) {\n\treturn Math.sqrt(\n\t\t((pos1.x - pos2.x) * (pos1.x - pos2.x)) +\n\t\t((pos1.y - pos2.y) * (pos1.y - pos2.y))\n\t);\n};\n","module.exports = function() {\n\treturn '#'+Math.random().toString(16).substr(-6);\n};\n","module.exports = function(min,max) {\n\treturn Math.floor(Math.random() * (max - min + 1) + min);\n};\n","module.exports = function(ent1, ent2) {\n\treturn !(\n\t\t(ent1.pos.x + ent1.radius) < (ent2.pos.x - ent2.radius) ||\n\t\t(ent1.pos.y + ent1.radius) < (ent2.pos.y - ent2.radius) ||\n\t\t(ent1.pos.x - ent1.radius) > (ent2.pos.x + ent2.radius) ||\n\t\t(ent1.pos.y - ent1.radius) > (ent2.pos.y + ent2.radius)\n\t);\n};\n","document.addEventListener(\"DOMContentLoaded\", function(event) {\n\tvar update = require('./update');\n\n\tvar menu = document.getElementById('menu');\n\tvar startButton = document.getElementById('start');\n\tvar scoreBoards = document.getElementById('scoreBoards');\n\n\tstartButton.onclick = function() {\n\t\tmenu.style.display = 'none';\n\t\tscoreBoards.style.display = 'block';\n\n\t\tupdate.renderLoop();\n\t\tupdate.secondsLoop();\n\t};\n});\n","var Combokeys = require('combokeys');\nvar canvasInput = new Combokeys(document.documentElement);\n\nvar kb = {\n\tup: false, down: false, left: false, right: false\n};\n\ncanvasInput.bind('up', function()    { kb.up = true;     }, 'keydown');\ncanvasInput.bind('up', function()    { kb.up = false;    }, 'keyup');\ncanvasInput.bind('down', function()  { kb.down = true;   }, 'keydown');\ncanvasInput.bind('down', function()  { kb.down = false;  }, 'keyup');\ncanvasInput.bind('left', function()  { kb.left = true;   }, 'keydown');\ncanvasInput.bind('left', function()  { kb.left = false;  }, 'keyup');\ncanvasInput.bind('right', function() { kb.right = true;  }, 'keydown');\ncanvasInput.bind('right', function() { kb.right = false; }, 'keyup');\n\nmodule.exports = kb;\n","var dom = {\n\tscoreBoards: document.getElementById('scoreBoards'),\n\tavoidingSeconds: document.getElementById('secondsAvoided'),\n\tsecondsLeft: document.getElementById('secondsLeft'),\n\tamountCollected: document.getElementById('amountCollected')\n};\n\nmodule.exports = {\n\tavoidingSeconds: 0,\n\tsecondsLeft: 20,\n\tamountCollected: 0,\n\n\tupdateDOM: function() {\n\t\tdom.avoidingSeconds.innerHTML = this.avoidingSeconds;\n\t\tdom.secondsLeft.innerHTML = this.secondsLeft;\n\t\tdom.amountCollected.innerHTML = this.amountCollected;\n\t},\n\n\thide: function() {\n\t\tdom.scoreBoards.style.display = 'none';\n\t}\n};\n","module.exports = {\n  avoiding: true,\n  finished: false,\n\n  hasMoved: false\n};\n","var vec2 = require('./vec2.js');\nvar randInt = require('./fab/randInt');\nvar randHex = require('./fab/randHex');\n\nvar entity = require('./entity');\nvar canvas = require('./canvas');\nvar keyboard = require('./keyboard');\n\nvar state = require('./state');\n\nvar scoreBoard = require('./scoreBoard');\n\nvar playerArray = [];\nvar bulletArray = [];\n\nvar frame = -1;\nvar seconds = -1;\n\ncanvas.resize();\n\nvar basePlayer = entity.basePlayer(canvas.getCenter());\n\nfunction checkCollision(playerEntity) {\n\tfor(var b=0, bLen=bulletArray.length; b < bLen; b++) {\n\t\tif(bulletArray[b] && entity.checkCollision(playerEntity,bulletArray[b])) {\n\t\t\tlet bulletToMove = bulletArray[b];\n\n\t\t\tplayerArray.push(entity.create({\n\t\t\t\tradius: bulletToMove.radius,\n\t\t\t\tcolor: bulletToMove.color,\n\t\t\t\tpos: bulletToMove.pos,\n\t\t\t\tposOffset: vec2.sub(basePlayer.pos, bulletToMove.pos)\n\t\t\t}));\n\n\t\t\tbulletArray.splice(b,1);\n\n\t\t\tif(state.avoiding) {\n\t\t\t\tstate.avoiding = false;\n\t\t\t\tdocument.getElementById('avoidBoard').style.opacity = '0.25';\n\t\t\t\tdocument.getElementById('collectBoard').style.display = 'block';\n\t\t\t}\n\n\t\t\tscoreBoard.amountCollected++;\n\t\t\tscoreBoard.updateDOM();\n\t\t}\n\t}\n}\n\nfunction renderLoop() {\n\tframe++;\n\tcanvas.clear();\n\n\tvar canvasSize = canvas.getSize();\n\n\tif(!state.hasMoved) {\n\t\tcanvas.img('thisIsYou',canvasSize.x / 2 - (70),canvasSize.y / 2 - (123));\n\t\tif(keyboard.up || keyboard.down || keyboard.left || keyboard.right) {\n\t\t\tstate.hasMoved = true;\n\t\t}\n\t}\n\n\tfor(var i=0; i < bulletArray.length; i++) {\n\t\tif(bulletArray[i]) {\n\t\t\tlet bulletEntity = bulletArray[i];\n\n\t\t\tentity.move(bulletEntity);\n\t\t\tentity.acel(bulletEntity);\n\t\t\tentity.swapAround(bulletEntity, canvasSize);\n\n\t\t\tcanvas.circle(bulletEntity);\n\t\t}\n\t}\n\n\tentity.moveWithKeyboard(basePlayer, keyboard);\n\tentity.swapAround(basePlayer, canvasSize);\n\tcanvas.outlineCircle(basePlayer);\n\tcheckCollision(basePlayer);\n\n\tfor(var p=0; p < playerArray.length; p++) {\n\t\tlet playerEntity = playerArray[p];\n\n\t\tentity.moveWithPlayer(playerEntity, basePlayer);\n\t\tentity.swapAround(playerEntity, canvasSize);\n\n\t\tcanvas.circle(playerEntity);\n\t\tcheckCollision(playerEntity);\n\t}\n\n\tif(!state.finished) {\n\t\twindow.requestAnimationFrame(renderLoop);\n\t}\n}\n\nfunction secondsLoop() {\n\tseconds++;\n\n\tif(state.hasMoved) {\n\t\tif(state.avoiding) {\n\t\t\tscoreBoard.avoidingSeconds++;\n\t\t} else {\n\t\t\tscoreBoard.secondsLeft--;\n\n\t\t\tif(scoreBoard.secondsLeft <= 0) {\n\t\t\t\tstate.finished = true;\n\t\t\t}\n\t\t}\n\n\t\tscoreBoard.updateDOM();\n\n\t\tif(bulletArray.length <= 130) {\n\t\t\tbulletArray.push(entity.create({\n\t\t\t\tradius: randInt(7,14),\n\t\t\t\tcolor: randHex(),\n\n\t\t\t\tpos: canvas.getRandomBoundPoint(),\n\t\t\t\tmaxVel: {\n\t\t\t\t\tx: ((Math.random() * seconds/7) + 1),\n\t\t\t\t\ty: ((Math.random() * seconds/7) + 1)\n\t\t\t\t},\n\t\t\t\tacel: {\n\t\t\t\t\tx: Math.random() < 0.5 ? -0.005 : 0.005,\n\t\t\t\t\ty: Math.random() < 0.5 ? -0.005 : 0.005\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tif(!state.finished) {\n\t\tsetTimeout(secondsLoop, 1000);\n\t\t//finish();\n\t} else {\n\t\tfinish();\n\t}\n}\n\nfunction finish() {\n\tscoreBoard.hide();\n\tcanvas.hide();\n\tdocument.getElementById('menuContainer').style.display = 'none';\n\tdocument.getElementById('finish').style.display = 'block';\n}\n\nmodule.exports = {\n\trenderLoop: renderLoop,\n\tsecondsLoop: secondsLoop\n};\n","function add(firstVec, secondVec) {\n\treturn { x: firstVec.x + secondVec.x, y: firstVec.y + secondVec.y };\n}\n\nfunction sub(firstVec, secondVec) {\n\treturn { x: firstVec.x - secondVec.x, y: firstVec.y - secondVec.y };\n}\n\nfunction multi(firstVec, secondVec) {\n\treturn { x: firstVec.x * secondVec.x, y: firstVec.y * secondVec.y };\n}\n\nmodule.exports = {\n\tadd: add,\n\tsub: sub,\n\tmulti: multi\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9hZGRFdmVudHMuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvYmluZC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9iaW5kTXVsdGlwbGUuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvYmluZFNlcXVlbmNlLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2JpbmRTaW5nbGUuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvZGV0YWNoLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2RvbS1ldmVudC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9maXJlQ2FsbGJhY2suanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvZ2V0S2V5SW5mby5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9nZXRNYXRjaGVzLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2dldFJldmVyc2VNYXAuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvaGFuZGxlS2V5LmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL2hhbmRsZUtleUV2ZW50LmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL21vZGlmaWVyc01hdGNoLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL3BpY2tCZXN0QWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL3Jlc2V0LmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9Db21ib2tleXMvcHJvdG90eXBlL3Jlc2V0U2VxdWVuY2VUaW1lci5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9yZXNldFNlcXVlbmNlcy5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS9zdG9wQ2FsbGJhY2suanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9wcm90b3R5cGUvdHJpZ2dlci5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvQ29tYm9rZXlzL3Byb3RvdHlwZS91bmJpbmQuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL0NvbWJva2V5cy9yZXNldC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9jaGFyYWN0ZXJGcm9tRXZlbnQuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvZXZlbnRNb2RpZmllcnMuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvaXNNb2RpZmllci5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9rZXlzRnJvbVN0cmluZy5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9wcmV2ZW50RGVmYXVsdC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9zaGlmdC1tYXAuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvc3BlY2lhbC1hbGlhc2VzLmpzIiwibm9kZV9tb2R1bGVzL2NvbWJva2V5cy9oZWxwZXJzL3NwZWNpYWwtY2hhcmFjdGVycy1tYXAuanMiLCJub2RlX21vZHVsZXMvY29tYm9rZXlzL2hlbHBlcnMvc3BlY2lhbC1rZXlzLW1hcC5qcyIsIm5vZGVfbW9kdWxlcy9jb21ib2tleXMvaGVscGVycy9zdG9wUHJvcGFnYXRpb24uanMiLCJzcmMvanMvY2FudmFzLmpzIiwic3JjL2pzL2VudGl0eS5qcyIsInNyYy9qcy9mYWIvZGlzdGFuY2VDaGVjay5qcyIsInNyYy9qcy9mYWIvcHl0aGEuanMiLCJzcmMvanMvZmFiL3JhbmRIZXguanMiLCJzcmMvanMvZmFiL3JhbmRJbnQuanMiLCJzcmMvanMvZmFiL3NxdWFyZUNoZWNrLmpzIiwic3JjL2pzL2luZGV4LmpzIiwic3JjL2pzL2tleWJvYXJkLmpzIiwic3JjL2pzL3Njb3JlQm9hcmQuanMiLCJzcmMvanMvc3RhdGUuanMiLCJzcmMvanMvdXBkYXRlLmpzIiwic3JjL2pzL3ZlYzIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBLFVBQVMsY0FBVCxDQUF3QixlQUF4QixFQUF5QyxLQUF6QyxDQUErQyxPQUEvQyxHQUF5RCxNQUF6RDtBQUNBLFVBQVMsY0FBVCxDQUF3QixRQUF4QixFQUFrQyxLQUFsQyxDQUF3QyxPQUF4QyxHQUFrRCxPQUFsRDtBQUNBOztBQUVELE9BQU8sT0FBUCxHQUFpQjtBQUNoQixhQUFZLFVBREk7QUFFaEIsY0FBYTtBQUZHLENBQWpCOzs7QUM5SUEsU0FBUyxHQUFULENBQWEsUUFBYixFQUF1QixTQUF2QixFQUFrQztBQUNqQyxRQUFPLEVBQUUsR0FBRyxTQUFTLENBQVQsR0FBYSxVQUFVLENBQTVCLEVBQStCLEdBQUcsU0FBUyxDQUFULEdBQWEsVUFBVSxDQUF6RCxFQUFQO0FBQ0E7O0FBRUQsU0FBUyxHQUFULENBQWEsUUFBYixFQUF1QixTQUF2QixFQUFrQztBQUNqQyxRQUFPLEVBQUUsR0FBRyxTQUFTLENBQVQsR0FBYSxVQUFVLENBQTVCLEVBQStCLEdBQUcsU0FBUyxDQUFULEdBQWEsVUFBVSxDQUF6RCxFQUFQO0FBQ0E7O0FBRUQsU0FBUyxLQUFULENBQWUsUUFBZixFQUF5QixTQUF6QixFQUFvQztBQUNuQyxRQUFPLEVBQUUsR0FBRyxTQUFTLENBQVQsR0FBYSxVQUFVLENBQTVCLEVBQStCLEdBQUcsU0FBUyxDQUFULEdBQWEsVUFBVSxDQUF6RCxFQUFQO0FBQ0E7O0FBRUQsT0FBTyxPQUFQLEdBQWlCO0FBQ2hCLE1BQUssR0FEVztBQUVoQixNQUFLLEdBRlc7QUFHaEIsUUFBTztBQUhTLENBQWpCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBDb21ib2tleXMgPSBzZWxmLmNvbnN0cnVjdG9yXG5cbiAgLyoqXG4gICAqIGEgbGlzdCBvZiBhbGwgdGhlIGNhbGxiYWNrcyBzZXR1cCB2aWEgQ29tYm9rZXlzLmJpbmQoKVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc2VsZi5jYWxsYmFja3MgPSB7fVxuXG4gIC8qKlxuICAgKiBkaXJlY3QgbWFwIG9mIHN0cmluZyBjb21iaW5hdGlvbnMgdG8gY2FsbGJhY2tzIHVzZWQgZm9yIHRyaWdnZXIoKVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc2VsZi5kaXJlY3RNYXAgPSB7fVxuXG4gIC8qKlxuICAgKiBrZWVwcyB0cmFjayBvZiB3aGF0IGxldmVsIGVhY2ggc2VxdWVuY2UgaXMgYXQgc2luY2UgbXVsdGlwbGVcbiAgICogc2VxdWVuY2VzIGNhbiBzdGFydCBvdXQgd2l0aCB0aGUgc2FtZSBzZXF1ZW5jZVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc2VsZi5zZXF1ZW5jZUxldmVscyA9IHt9XG5cbiAgLyoqXG4gICAqIHZhcmlhYmxlIHRvIHN0b3JlIHRoZSBzZXRUaW1lb3V0IGNhbGxcbiAgICpcbiAgICogQHR5cGUge251bGx8bnVtYmVyfVxuICAgKi9cbiAgc2VsZi5yZXNldFRpbWVyXG5cbiAgLyoqXG4gICAqIHRlbXBvcmFyeSBzdGF0ZSB3aGVyZSB3ZSB3aWxsIGlnbm9yZSB0aGUgbmV4dCBrZXl1cFxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbnxzdHJpbmd9XG4gICAqL1xuICBzZWxmLmlnbm9yZU5leHRLZXl1cCA9IGZhbHNlXG5cbiAgLyoqXG4gICAqIHRlbXBvcmFyeSBzdGF0ZSB3aGVyZSB3ZSB3aWxsIGlnbm9yZSB0aGUgbmV4dCBrZXlwcmVzc1xuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIHNlbGYuaWdub3JlTmV4dEtleXByZXNzID0gZmFsc2VcblxuICAvKipcbiAgICogYXJlIHdlIGN1cnJlbnRseSBpbnNpZGUgb2YgYSBzZXF1ZW5jZT9cbiAgICogdHlwZSBvZiBhY3Rpb24gKFwia2V5dXBcIiBvciBcImtleWRvd25cIiBvciBcImtleXByZXNzXCIpIG9yIGZhbHNlXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufHN0cmluZ31cbiAgICovXG4gIHNlbGYubmV4dEV4cGVjdGVkQWN0aW9uID0gZmFsc2VcblxuICBzZWxmLmVsZW1lbnQgPSBlbGVtZW50XG5cbiAgc2VsZi5hZGRFdmVudHMoKVxuXG4gIENvbWJva2V5cy5pbnN0YW5jZXMucHVzaChzZWxmKVxuICByZXR1cm4gc2VsZlxufVxuXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUuYmluZCA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2JpbmQnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmJpbmRNdWx0aXBsZSA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2JpbmRNdWx0aXBsZScpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUudW5iaW5kID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvdW5iaW5kJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS50cmlnZ2VyID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvdHJpZ2dlcicpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUucmVzZXQgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9yZXNldC5qcycpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUuc3RvcENhbGxiYWNrID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvc3RvcENhbGxiYWNrJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5oYW5kbGVLZXkgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9oYW5kbGVLZXknKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmFkZEV2ZW50cyA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2FkZEV2ZW50cycpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUuYmluZFNpbmdsZSA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2JpbmRTaW5nbGUnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmdldEtleUluZm8gPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9nZXRLZXlJbmZvJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5waWNrQmVzdEFjdGlvbiA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL3BpY2tCZXN0QWN0aW9uJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5nZXRSZXZlcnNlTWFwID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvZ2V0UmV2ZXJzZU1hcCcpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUuZ2V0TWF0Y2hlcyA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2dldE1hdGNoZXMnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLnJlc2V0U2VxdWVuY2VzID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvcmVzZXRTZXF1ZW5jZXMnKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmZpcmVDYWxsYmFjayA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2ZpcmVDYWxsYmFjaycpXG5tb2R1bGUuZXhwb3J0cy5wcm90b3R5cGUuYmluZFNlcXVlbmNlID0gcmVxdWlyZSgnLi9wcm90b3R5cGUvYmluZFNlcXVlbmNlJylcbm1vZHVsZS5leHBvcnRzLnByb3RvdHlwZS5yZXNldFNlcXVlbmNlVGltZXIgPSByZXF1aXJlKCcuL3Byb3RvdHlwZS9yZXNldFNlcXVlbmNlVGltZXInKVxubW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLmRldGFjaCA9IHJlcXVpcmUoJy4vcHJvdG90eXBlL2RldGFjaCcpXG5cbm1vZHVsZS5leHBvcnRzLmluc3RhbmNlcyA9IFtdXG5tb2R1bGUuZXhwb3J0cy5yZXNldCA9IHJlcXVpcmUoJy4vcmVzZXQnKVxuXG4vKipcbiAqIHZhcmlhYmxlIHRvIHN0b3JlIHRoZSBmbGlwcGVkIHZlcnNpb24gb2YgTUFQIGZyb20gYWJvdmVcbiAqIG5lZWRlZCB0byBjaGVjayBpZiB3ZSBzaG91bGQgdXNlIGtleXByZXNzIG9yIG5vdCB3aGVuIG5vIGFjdGlvblxuICogaXMgc3BlY2lmaWVkXG4gKlxuICogQHR5cGUge09iamVjdHx1bmRlZmluZWR9XG4gKi9cbm1vZHVsZS5leHBvcnRzLlJFVkVSU0VfTUFQID0gbnVsbFxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIG9uID0gcmVxdWlyZSgnLi9kb20tZXZlbnQnKVxuICB2YXIgZWxlbWVudCA9IHNlbGYuZWxlbWVudFxuXG4gIHNlbGYuZXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnLi9oYW5kbGVLZXlFdmVudCcpLmJpbmQoc2VsZilcblxuICBvbihlbGVtZW50LCAna2V5cHJlc3MnLCBzZWxmLmV2ZW50SGFuZGxlcilcbiAgb24oZWxlbWVudCwgJ2tleWRvd24nLCBzZWxmLmV2ZW50SGFuZGxlcilcbiAgb24oZWxlbWVudCwgJ2tleXVwJywgc2VsZi5ldmVudEhhbmRsZXIpXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuLyoqXG4gKiBiaW5kcyBhbiBldmVudCB0byBDb21ib2tleXNcbiAqXG4gKiBjYW4gYmUgYSBzaW5nbGUga2V5LCBhIGNvbWJpbmF0aW9uIG9mIGtleXMgc2VwYXJhdGVkIHdpdGggKyxcbiAqIGFuIGFycmF5IG9mIGtleXMsIG9yIGEgc2VxdWVuY2Ugb2Yga2V5cyBzZXBhcmF0ZWQgYnkgc3BhY2VzXG4gKlxuICogYmUgc3VyZSB0byBsaXN0IHRoZSBtb2RpZmllciBrZXlzIGZpcnN0IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZVxuICogY29ycmVjdCBrZXkgZW5kcyB1cCBnZXR0aW5nIGJvdW5kICh0aGUgbGFzdCBrZXkgaW4gdGhlIHBhdHRlcm4pXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXl9IGtleXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZz19IGFjdGlvbiAtIFwia2V5cHJlc3NcIiwgXCJrZXlkb3duXCIsIG9yIFwia2V5dXBcIlxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXlzLCBjYWxsYmFjaywgYWN0aW9uKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIGtleXMgPSBrZXlzIGluc3RhbmNlb2YgQXJyYXkgPyBrZXlzIDogW2tleXNdXG4gIHNlbGYuYmluZE11bHRpcGxlKGtleXMsIGNhbGxiYWNrLCBhY3Rpb24pXG4gIHJldHVybiBzZWxmXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIGJpbmRzIG11bHRpcGxlIGNvbWJpbmF0aW9ucyB0byB0aGUgc2FtZSBjYWxsYmFja1xuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGNvbWJpbmF0aW9uc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gYWN0aW9uXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNvbWJpbmF0aW9ucywgY2FsbGJhY2ssIGFjdGlvbikge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbWJpbmF0aW9ucy5sZW5ndGg7ICsraikge1xuICAgIHNlbGYuYmluZFNpbmdsZShjb21iaW5hdGlvbnNbal0sIGNhbGxiYWNrLCBhY3Rpb24pXG4gIH1cbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogYmluZHMgYSBrZXkgc2VxdWVuY2UgdG8gYW4gZXZlbnRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tYm8gLSBjb21ibyBzcGVjaWZpZWQgaW4gYmluZCBjYWxsXG4gKiBAcGFyYW0ge0FycmF5fSBrZXlzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtzdHJpbmc9fSBhY3Rpb25cbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29tYm8sIGtleXMsIGNhbGxiYWNrLCBhY3Rpb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgLy8gc3RhcnQgb2ZmIGJ5IGFkZGluZyBhIHNlcXVlbmNlIGxldmVsIHJlY29yZCBmb3IgdGhpcyBjb21iaW5hdGlvblxuICAvLyBhbmQgc2V0dGluZyB0aGUgbGV2ZWwgdG8gMFxuICBzZWxmLnNlcXVlbmNlTGV2ZWxzW2NvbWJvXSA9IDBcblxuICAvKipcbiAgICogY2FsbGJhY2sgdG8gaW5jcmVhc2UgdGhlIHNlcXVlbmNlIGxldmVsIGZvciB0aGlzIHNlcXVlbmNlIGFuZCByZXNldFxuICAgKiBhbGwgb3RoZXIgc2VxdWVuY2VzIHRoYXQgd2VyZSBhY3RpdmVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRBY3Rpb25cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgKi9cbiAgZnVuY3Rpb24gaW5jcmVhc2VTZXF1ZW5jZSAobmV4dEFjdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLm5leHRFeHBlY3RlZEFjdGlvbiA9IG5leHRBY3Rpb25cbiAgICAgICsrc2VsZi5zZXF1ZW5jZUxldmVsc1tjb21ib11cbiAgICAgIHNlbGYucmVzZXRTZXF1ZW5jZVRpbWVyKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogd3JhcHMgdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnNpZGUgb2YgYW5vdGhlciBmdW5jdGlvbiBpbiBvcmRlclxuICAgKiB0byByZXNldCBhbGwgc2VxdWVuY2UgY291bnRlcnMgYXMgc29vbiBhcyB0aGlzIHNlcXVlbmNlIGlzIGRvbmVcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcmV0dXJucyB2b2lkXG4gICAqL1xuICBmdW5jdGlvbiBjYWxsYmFja0FuZFJlc2V0IChlKSB7XG4gICAgdmFyIGNoYXJhY3RlckZyb21FdmVudFxuICAgIHNlbGYuZmlyZUNhbGxiYWNrKGNhbGxiYWNrLCBlLCBjb21ibylcblxuICAgIC8vIHdlIHNob3VsZCBpZ25vcmUgdGhlIG5leHQga2V5IHVwIGlmIHRoZSBhY3Rpb24gaXMga2V5IGRvd25cbiAgICAvLyBvciBrZXlwcmVzcy4gIHRoaXMgaXMgc28gaWYgeW91IGZpbmlzaCBhIHNlcXVlbmNlIGFuZFxuICAgIC8vIHJlbGVhc2UgdGhlIGtleSB0aGUgZmluYWwga2V5IHdpbGwgbm90IHRyaWdnZXIgYSBrZXl1cFxuICAgIGlmIChhY3Rpb24gIT09ICdrZXl1cCcpIHtcbiAgICAgIGNoYXJhY3RlckZyb21FdmVudCA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMvY2hhcmFjdGVyRnJvbUV2ZW50JylcbiAgICAgIHNlbGYuaWdub3JlTmV4dEtleXVwID0gY2hhcmFjdGVyRnJvbUV2ZW50KGUpXG4gICAgfVxuXG4gICAgLy8gd2VpcmQgcmFjZSBjb25kaXRpb24gaWYgYSBzZXF1ZW5jZSBlbmRzIHdpdGggdGhlIGtleVxuICAgIC8vIGFub3RoZXIgc2VxdWVuY2UgYmVnaW5zIHdpdGhcbiAgICBzZXRUaW1lb3V0KFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnJlc2V0U2VxdWVuY2VzKClcbiAgICAgIH0sXG4gICAgICAxMFxuICAgIClcbiAgfVxuXG4gIC8vIGxvb3AgdGhyb3VnaCBrZXlzIG9uZSBhdCBhIHRpbWUgYW5kIGJpbmQgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrXG4gIC8vIGZ1bmN0aW9uLiAgZm9yIGFueSBrZXkgbGVhZGluZyB1cCB0byB0aGUgZmluYWwgb25lIGl0IHNob3VsZFxuICAvLyBpbmNyZWFzZSB0aGUgc2VxdWVuY2UuIGFmdGVyIHRoZSBmaW5hbCwgaXQgc2hvdWxkIHJlc2V0IGFsbCBzZXF1ZW5jZXNcbiAgLy9cbiAgLy8gaWYgYW4gYWN0aW9uIGlzIHNwZWNpZmllZCBpbiB0aGUgb3JpZ2luYWwgYmluZCBjYWxsIHRoZW4gdGhhdCB3aWxsXG4gIC8vIGJlIHVzZWQgdGhyb3VnaG91dC4gIG90aGVyd2lzZSB3ZSB3aWxsIHBhc3MgdGhlIGFjdGlvbiB0aGF0IHRoZVxuICAvLyBuZXh0IGtleSBpbiB0aGUgc2VxdWVuY2Ugc2hvdWxkIG1hdGNoLiAgdGhpcyBhbGxvd3MgYSBzZXF1ZW5jZVxuICAvLyB0byBtaXggYW5kIG1hdGNoIGtleXByZXNzIGFuZCBrZXlkb3duIGV2ZW50cyBkZXBlbmRpbmcgb24gd2hpY2hcbiAgLy8gb25lcyBhcmUgYmV0dGVyIHN1aXRlZCB0byB0aGUga2V5IHByb3ZpZGVkXG4gIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7ICsraikge1xuICAgIHZhciBpc0ZpbmFsID0gaiArIDEgPT09IGtleXMubGVuZ3RoXG4gICAgdmFyIHdyYXBwZWRDYWxsYmFjayA9IGlzRmluYWwgPyBjYWxsYmFja0FuZFJlc2V0IDogaW5jcmVhc2VTZXF1ZW5jZShhY3Rpb24gfHwgc2VsZi5nZXRLZXlJbmZvKGtleXNbaiArIDFdKS5hY3Rpb24pXG4gICAgc2VsZi5iaW5kU2luZ2xlKGtleXNbal0sIHdyYXBwZWRDYWxsYmFjaywgYWN0aW9uLCBjb21ibywgailcbiAgfVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBiaW5kcyBhIHNpbmdsZSBrZXlib2FyZCBjb21iaW5hdGlvblxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21iaW5hdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYWN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZz19IHNlcXVlbmNlTmFtZSAtIG5hbWUgb2Ygc2VxdWVuY2UgaWYgcGFydCBvZiBzZXF1ZW5jZVxuICogQHBhcmFtIHtudW1iZXI9fSBsZXZlbCAtIHdoYXQgcGFydCBvZiB0aGUgc2VxdWVuY2UgdGhlIGNvbW1hbmQgaXNcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29tYmluYXRpb24sIGNhbGxiYWNrLCBhY3Rpb24sIHNlcXVlbmNlTmFtZSwgbGV2ZWwpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgLy8gc3RvcmUgYSBkaXJlY3QgbWFwcGVkIHJlZmVyZW5jZSBmb3IgdXNlIHdpdGggQ29tYm9rZXlzLnRyaWdnZXJcbiAgc2VsZi5kaXJlY3RNYXBbY29tYmluYXRpb24gKyAnOicgKyBhY3Rpb25dID0gY2FsbGJhY2tcblxuICAvLyBtYWtlIHN1cmUgbXVsdGlwbGUgc3BhY2VzIGluIGEgcm93IGJlY29tZSBhIHNpbmdsZSBzcGFjZVxuICBjb21iaW5hdGlvbiA9IGNvbWJpbmF0aW9uLnJlcGxhY2UoL1xccysvZywgJyAnKVxuXG4gIHZhciBzZXF1ZW5jZSA9IGNvbWJpbmF0aW9uLnNwbGl0KCcgJylcbiAgdmFyIGluZm9cblxuICAvLyBpZiB0aGlzIHBhdHRlcm4gaXMgYSBzZXF1ZW5jZSBvZiBrZXlzIHRoZW4gcnVuIHRocm91Z2ggdGhpcyBtZXRob2RcbiAgLy8gdG8gcmVwcm9jZXNzIGVhY2ggcGF0dGVybiBvbmUga2V5IGF0IGEgdGltZVxuICBpZiAoc2VxdWVuY2UubGVuZ3RoID4gMSkge1xuICAgIHNlbGYuYmluZFNlcXVlbmNlKGNvbWJpbmF0aW9uLCBzZXF1ZW5jZSwgY2FsbGJhY2ssIGFjdGlvbilcbiAgICByZXR1cm5cbiAgfVxuXG4gIGluZm8gPSBzZWxmLmdldEtleUluZm8oY29tYmluYXRpb24sIGFjdGlvbilcblxuICAvLyBtYWtlIHN1cmUgdG8gaW5pdGlhbGl6ZSBhcnJheSBpZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lXG4gIC8vIGEgY2FsbGJhY2sgaXMgYWRkZWQgZm9yIHRoaXMga2V5XG4gIHNlbGYuY2FsbGJhY2tzW2luZm8ua2V5XSA9IHNlbGYuY2FsbGJhY2tzW2luZm8ua2V5XSB8fCBbXVxuXG4gIC8vIHJlbW92ZSBhbiBleGlzdGluZyBtYXRjaCBpZiB0aGVyZSBpcyBvbmVcbiAgc2VsZi5nZXRNYXRjaGVzKGluZm8ua2V5LCBpbmZvLm1vZGlmaWVycywge3R5cGU6IGluZm8uYWN0aW9ufSwgc2VxdWVuY2VOYW1lLCBjb21iaW5hdGlvbiwgbGV2ZWwpXG5cbiAgLy8gYWRkIHRoaXMgY2FsbCBiYWNrIHRvIHRoZSBhcnJheVxuICAvLyBpZiBpdCBpcyBhIHNlcXVlbmNlIHB1dCBpdCBhdCB0aGUgYmVnaW5uaW5nXG4gIC8vIGlmIG5vdCBwdXQgaXQgYXQgdGhlIGVuZFxuICAvL1xuICAvLyB0aGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHRoZSB3YXkgdGhlc2UgYXJlIHByb2Nlc3NlZCBleHBlY3RzXG4gIC8vIHRoZSBzZXF1ZW5jZSBvbmVzIHRvIGNvbWUgZmlyc3RcbiAgc2VsZi5jYWxsYmFja3NbaW5mby5rZXldW3NlcXVlbmNlTmFtZSA/ICd1bnNoaWZ0JyA6ICdwdXNoJ10oe1xuICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICBtb2RpZmllcnM6IGluZm8ubW9kaWZpZXJzLFxuICAgIGFjdGlvbjogaW5mby5hY3Rpb24sXG4gICAgc2VxOiBzZXF1ZW5jZU5hbWUsXG4gICAgbGV2ZWw6IGxldmVsLFxuICAgIGNvbWJvOiBjb21iaW5hdGlvblxuICB9KVxufVxuIiwidmFyIG9mZiA9IHJlcXVpcmUoJy4vZG9tLWV2ZW50Jykub2ZmXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBlbGVtZW50ID0gc2VsZi5lbGVtZW50XG5cbiAgb2ZmKGVsZW1lbnQsICdrZXlwcmVzcycsIHNlbGYuZXZlbnRIYW5kbGVyKVxuICBvZmYoZWxlbWVudCwgJ2tleWRvd24nLCBzZWxmLmV2ZW50SGFuZGxlcilcbiAgb2ZmKGVsZW1lbnQsICdrZXl1cCcsIHNlbGYuZXZlbnRIYW5kbGVyKVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBvblxubW9kdWxlLmV4cG9ydHMub24gPSBvblxubW9kdWxlLmV4cG9ydHMub2ZmID0gb2ZmXG5cbmZ1bmN0aW9uIG9uIChlbGVtZW50LCBldmVudCwgY2FsbGJhY2ssIGNhcHR1cmUpIHtcbiAgIWVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAoZXZlbnQgPSAnb24nICsgZXZlbnQpXG4gIDsoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyIHx8IGVsZW1lbnQuYXR0YWNoRXZlbnQpLmNhbGwoZWxlbWVudCwgZXZlbnQsIGNhbGxiYWNrLCBjYXB0dXJlKVxuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZnVuY3Rpb24gb2ZmIChlbGVtZW50LCBldmVudCwgY2FsbGJhY2ssIGNhcHR1cmUpIHtcbiAgIWVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiAoZXZlbnQgPSAnb24nICsgZXZlbnQpXG4gIDsoZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyIHx8IGVsZW1lbnQuZGV0YWNoRXZlbnQpLmNhbGwoZWxlbWVudCwgZXZlbnQsIGNhbGxiYWNrLCBjYXB0dXJlKVxuICByZXR1cm4gY2FsbGJhY2tcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogYWN0dWFsbHkgY2FsbHMgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKlxuICogaWYgeW91ciBjYWxsYmFjayBmdW5jdGlvbiByZXR1cm5zIGZhbHNlIHRoaXMgd2lsbCB1c2UgdGhlIGpxdWVyeVxuICogY29udmVudGlvbiAtIHByZXZlbnQgZGVmYXVsdCBhbmQgc3RvcCBwcm9wb2dhdGlvbiBvbiB0aGUgZXZlbnRcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtFdmVudH0gZVxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjYWxsYmFjaywgZSwgY29tYm8sIHNlcXVlbmNlKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgcHJldmVudERlZmF1bHRcbiAgdmFyIHN0b3BQcm9wYWdhdGlvblxuXG4gIC8vIGlmIHRoaXMgZXZlbnQgc2hvdWxkIG5vdCBoYXBwZW4gc3RvcCBoZXJlXG4gIGlmIChzZWxmLnN0b3BDYWxsYmFjayhlLCBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQsIGNvbWJvLCBzZXF1ZW5jZSkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmIChjYWxsYmFjayhlLCBjb21ibykgPT09IGZhbHNlKSB7XG4gICAgcHJldmVudERlZmF1bHQgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL3ByZXZlbnREZWZhdWx0JylcbiAgICBwcmV2ZW50RGVmYXVsdChlKVxuICAgIHN0b3BQcm9wYWdhdGlvbiA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMvc3RvcFByb3BhZ2F0aW9uJylcbiAgICBzdG9wUHJvcGFnYXRpb24oZSlcbiAgfVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBHZXRzIGluZm8gZm9yIGEgc3BlY2lmaWMga2V5IGNvbWJpbmF0aW9uXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBjb21iaW5hdGlvbiBrZXkgY29tYmluYXRpb24gKFwiY29tbWFuZCtzXCIgb3IgXCJhXCIgb3IgXCIqXCIpXG4gKiBAcGFyYW0gIHtzdHJpbmc9fSBhY3Rpb25cbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNvbWJpbmF0aW9uLCBhY3Rpb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBrZXlzRnJvbVN0cmluZ1xuICB2YXIga2V5c1xuICB2YXIga2V5XG4gIHZhciBqXG4gIHZhciBtb2RpZmllcnMgPSBbXVxuICB2YXIgU1BFQ0lBTF9BTElBU0VTXG4gIHZhciBTSElGVF9NQVBcbiAgdmFyIGlzTW9kaWZpZXJcblxuICBrZXlzRnJvbVN0cmluZyA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMva2V5c0Zyb21TdHJpbmcnKVxuICAvLyB0YWtlIHRoZSBrZXlzIGZyb20gdGhpcyBwYXR0ZXJuIGFuZCBmaWd1cmUgb3V0IHdoYXQgdGhlIGFjdHVhbFxuICAvLyBwYXR0ZXJuIGlzIGFsbCBhYm91dFxuICBrZXlzID0ga2V5c0Zyb21TdHJpbmcoY29tYmluYXRpb24pXG5cbiAgU1BFQ0lBTF9BTElBU0VTID0gcmVxdWlyZSgnLi4vLi4vaGVscGVycy9zcGVjaWFsLWFsaWFzZXMnKVxuICBTSElGVF9NQVAgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL3NoaWZ0LW1hcCcpXG4gIGlzTW9kaWZpZXIgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL2lzTW9kaWZpZXInKVxuICBmb3IgKGogPSAwOyBqIDwga2V5cy5sZW5ndGg7ICsraikge1xuICAgIGtleSA9IGtleXNbal1cblxuICAgIC8vIG5vcm1hbGl6ZSBrZXkgbmFtZXNcbiAgICBpZiAoU1BFQ0lBTF9BTElBU0VTW2tleV0pIHtcbiAgICAgIGtleSA9IFNQRUNJQUxfQUxJQVNFU1trZXldXG4gICAgfVxuXG4gICAgLy8gaWYgdGhpcyBpcyBub3QgYSBrZXlwcmVzcyBldmVudCB0aGVuIHdlIHNob3VsZFxuICAgIC8vIGJlIHNtYXJ0IGFib3V0IHVzaW5nIHNoaWZ0IGtleXNcbiAgICAvLyB0aGlzIHdpbGwgb25seSB3b3JrIGZvciBVUyBrZXlib2FyZHMgaG93ZXZlclxuICAgIGlmIChhY3Rpb24gJiYgYWN0aW9uICE9PSAna2V5cHJlc3MnICYmIFNISUZUX01BUFtrZXldKSB7XG4gICAgICBrZXkgPSBTSElGVF9NQVBba2V5XVxuICAgICAgbW9kaWZpZXJzLnB1c2goJ3NoaWZ0JylcbiAgICB9XG5cbiAgICAvLyBpZiB0aGlzIGtleSBpcyBhIG1vZGlmaWVyIHRoZW4gYWRkIGl0IHRvIHRoZSBsaXN0IG9mIG1vZGlmaWVyc1xuICAgIGlmIChpc01vZGlmaWVyKGtleSkpIHtcbiAgICAgIG1vZGlmaWVycy5wdXNoKGtleSlcbiAgICB9XG4gIH1cblxuICAvLyBkZXBlbmRpbmcgb24gd2hhdCB0aGUga2V5IGNvbWJpbmF0aW9uIGlzXG4gIC8vIHdlIHdpbGwgdHJ5IHRvIHBpY2sgdGhlIGJlc3QgZXZlbnQgZm9yIGl0XG4gIGFjdGlvbiA9IHNlbGYucGlja0Jlc3RBY3Rpb24oa2V5LCBtb2RpZmllcnMsIGFjdGlvbilcblxuICByZXR1cm4ge1xuICAgIGtleToga2V5LFxuICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgIGFjdGlvbjogYWN0aW9uXG4gIH1cbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogZmluZHMgYWxsIGNhbGxiYWNrcyB0aGF0IG1hdGNoIGJhc2VkIG9uIHRoZSBrZXljb2RlLCBtb2RpZmllcnMsXG4gKiBhbmQgYWN0aW9uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlclxuICogQHBhcmFtIHtBcnJheX0gbW9kaWZpZXJzXG4gKiBAcGFyYW0ge0V2ZW50fE9iamVjdH0gZVxuICogQHBhcmFtIHtzdHJpbmc9fSBzZXF1ZW5jZU5hbWUgLSBuYW1lIG9mIHRoZSBzZXF1ZW5jZSB3ZSBhcmUgbG9va2luZyBmb3JcbiAqIEBwYXJhbSB7c3RyaW5nPX0gY29tYmluYXRpb25cbiAqIEBwYXJhbSB7bnVtYmVyPX0gbGV2ZWxcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhcmFjdGVyLCBtb2RpZmllcnMsIGUsIHNlcXVlbmNlTmFtZSwgY29tYmluYXRpb24sIGxldmVsKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgalxuICB2YXIgY2FsbGJhY2tcbiAgdmFyIG1hdGNoZXMgPSBbXVxuICB2YXIgYWN0aW9uID0gZS50eXBlXG4gIHZhciBpc01vZGlmaWVyXG4gIHZhciBtb2RpZmllcnNNYXRjaFxuXG4gIGlmIChcbiAgICAgIGFjdGlvbiA9PT0gJ2tleXByZXNzJyAmJlxuICAgICAgLy8gRmlyZWZveCBmaXJlcyBrZXlwcmVzcyBmb3IgYXJyb3dzXG4gICAgICAhKGUuY29kZSAmJiBlLmNvZGUuc2xpY2UoMCwgNSkgPT09ICdBcnJvdycpXG4gICkge1xuICAgIC8vICdhbnktY2hhcmFjdGVyJyBjYWxsYmFja3MgYXJlIG9ubHkgb24gYGtleXByZXNzYFxuICAgIHZhciBhbnlDaGFyQ2FsbGJhY2tzID0gc2VsZi5jYWxsYmFja3NbJ2FueS1jaGFyYWN0ZXInXSB8fCBbXVxuICAgIGFueUNoYXJDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIG1hdGNoZXMucHVzaChjYWxsYmFjaylcbiAgICB9KVxuICB9XG5cbiAgaWYgKCFzZWxmLmNhbGxiYWNrc1tjaGFyYWN0ZXJdKSB7IHJldHVybiBtYXRjaGVzIH1cblxuICBpc01vZGlmaWVyID0gcmVxdWlyZSgnLi4vLi4vaGVscGVycy9pc01vZGlmaWVyJylcbiAgLy8gaWYgYSBtb2RpZmllciBrZXkgaXMgY29taW5nIHVwIG9uIGl0cyBvd24gd2Ugc2hvdWxkIGFsbG93IGl0XG4gIGlmIChhY3Rpb24gPT09ICdrZXl1cCcgJiYgaXNNb2RpZmllcihjaGFyYWN0ZXIpKSB7XG4gICAgbW9kaWZpZXJzID0gW2NoYXJhY3Rlcl1cbiAgfVxuXG4gIC8vIGxvb3AgdGhyb3VnaCBhbGwgY2FsbGJhY2tzIGZvciB0aGUga2V5IHRoYXQgd2FzIHByZXNzZWRcbiAgLy8gYW5kIHNlZSBpZiBhbnkgb2YgdGhlbSBtYXRjaFxuICBmb3IgKGogPSAwOyBqIDwgc2VsZi5jYWxsYmFja3NbY2hhcmFjdGVyXS5sZW5ndGg7ICsraikge1xuICAgIGNhbGxiYWNrID0gc2VsZi5jYWxsYmFja3NbY2hhcmFjdGVyXVtqXVxuXG4gICAgLy8gaWYgYSBzZXF1ZW5jZSBuYW1lIGlzIG5vdCBzcGVjaWZpZWQsIGJ1dCB0aGlzIGlzIGEgc2VxdWVuY2UgYXRcbiAgICAvLyB0aGUgd3JvbmcgbGV2ZWwgdGhlbiBtb3ZlIG9udG8gdGhlIG5leHQgbWF0Y2hcbiAgICBpZiAoIXNlcXVlbmNlTmFtZSAmJiBjYWxsYmFjay5zZXEgJiYgc2VsZi5zZXF1ZW5jZUxldmVsc1tjYWxsYmFjay5zZXFdICE9PSBjYWxsYmFjay5sZXZlbCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBpZiB0aGUgYWN0aW9uIHdlIGFyZSBsb29raW5nIGZvciBkb2Vzbid0IG1hdGNoIHRoZSBhY3Rpb24gd2UgZ290XG4gICAgLy8gdGhlbiB3ZSBzaG91bGQga2VlcCBnb2luZ1xuICAgIGlmIChhY3Rpb24gIT09IGNhbGxiYWNrLmFjdGlvbikge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBpZiB0aGlzIGlzIGEga2V5cHJlc3MgZXZlbnQgYW5kIHRoZSBtZXRhIGtleSBhbmQgY29udHJvbCBrZXlcbiAgICAvLyBhcmUgbm90IHByZXNzZWQgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gb25seSBsb29rIGF0IHRoZVxuICAgIC8vIGNoYXJhY3Rlciwgb3RoZXJ3aXNlIGNoZWNrIHRoZSBtb2RpZmllcnMgYXMgd2VsbFxuICAgIC8vXG4gICAgLy8gY2hyb21lIHdpbGwgbm90IGZpcmUgYSBrZXlwcmVzcyBpZiBtZXRhIG9yIGNvbnRyb2wgaXMgZG93blxuICAgIC8vIHNhZmFyaSB3aWxsIGZpcmUgYSBrZXlwcmVzcyBpZiBtZXRhIG9yIG1ldGErc2hpZnQgaXMgZG93blxuICAgIC8vIGZpcmVmb3ggd2lsbCBmaXJlIGEga2V5cHJlc3MgaWYgbWV0YSBvciBjb250cm9sIGlzIGRvd25cbiAgICBtb2RpZmllcnNNYXRjaCA9IHJlcXVpcmUoJy4vbW9kaWZpZXJzTWF0Y2gnKVxuICAgIGlmICgoYWN0aW9uID09PSAna2V5cHJlc3MnICYmICFlLm1ldGFLZXkgJiYgIWUuY3RybEtleSkgfHwgbW9kaWZpZXJzTWF0Y2gobW9kaWZpZXJzLCBjYWxsYmFjay5tb2RpZmllcnMpKSB7XG4gICAgICAvLyB3aGVuIHlvdSBiaW5kIGEgY29tYmluYXRpb24gb3Igc2VxdWVuY2UgYSBzZWNvbmQgdGltZSBpdFxuICAgICAgLy8gc2hvdWxkIG92ZXJ3cml0ZSB0aGUgZmlyc3Qgb25lLiAgaWYgYSBzZXF1ZW5jZU5hbWUgb3JcbiAgICAgIC8vIGNvbWJpbmF0aW9uIGlzIHNwZWNpZmllZCBpbiB0aGlzIGNhbGwgaXQgZG9lcyBqdXN0IHRoYXRcbiAgICAgIC8vXG4gICAgICAvLyBAdG9kbyBtYWtlIGRlbGV0aW5nIGl0cyBvd24gbWV0aG9kP1xuICAgICAgdmFyIGRlbGV0ZUNvbWJvID0gIXNlcXVlbmNlTmFtZSAmJiBjYWxsYmFjay5jb21ibyA9PT0gY29tYmluYXRpb25cbiAgICAgIHZhciBkZWxldGVTZXF1ZW5jZSA9IHNlcXVlbmNlTmFtZSAmJiBjYWxsYmFjay5zZXEgPT09IHNlcXVlbmNlTmFtZSAmJiBjYWxsYmFjay5sZXZlbCA9PT0gbGV2ZWxcbiAgICAgIGlmIChkZWxldGVDb21ibyB8fCBkZWxldGVTZXF1ZW5jZSkge1xuICAgICAgICBzZWxmLmNhbGxiYWNrc1tjaGFyYWN0ZXJdLnNwbGljZShqLCAxKVxuICAgICAgfVxuXG4gICAgICBtYXRjaGVzLnB1c2goY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1hdGNoZXNcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogcmV2ZXJzZXMgdGhlIG1hcCBsb29rdXAgc28gdGhhdCB3ZSBjYW4gbG9vayBmb3Igc3BlY2lmaWMga2V5c1xuICogdG8gc2VlIHdoYXQgY2FuIGFuZCBjYW4ndCB1c2Uga2V5cHJlc3NcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIGNvbnN0cnVjdG9yID0gc2VsZi5jb25zdHJ1Y3RvclxuICB2YXIgU1BFQ0lBTF9LRVlTX01BUFxuXG4gIGlmICghY29uc3RydWN0b3IuUkVWRVJTRV9NQVApIHtcbiAgICBjb25zdHJ1Y3Rvci5SRVZFUlNFX01BUCA9IHt9XG4gICAgU1BFQ0lBTF9LRVlTX01BUCA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMvc3BlY2lhbC1rZXlzLW1hcCcpXG4gICAgZm9yICh2YXIga2V5IGluIFNQRUNJQUxfS0VZU19NQVApIHtcbiAgICAgIC8vIHB1bGwgb3V0IHRoZSBudW1lcmljIGtleXBhZCBmcm9tIGhlcmUgY2F1c2Uga2V5cHJlc3Mgc2hvdWxkXG4gICAgICAvLyBiZSBhYmxlIHRvIGRldGVjdCB0aGUga2V5cyBmcm9tIHRoZSBjaGFyYWN0ZXJcbiAgICAgIGlmIChrZXkgPiA5NSAmJiBrZXkgPCAxMTIpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKFNQRUNJQUxfS0VZU19NQVAuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBjb25zdHJ1Y3Rvci5SRVZFUlNFX01BUFtTUEVDSUFMX0tFWVNfTUFQW2tleV1dID0ga2V5XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBjb25zdHJ1Y3Rvci5SRVZFUlNFX01BUFxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBoYW5kbGVzIGEgY2hhcmFjdGVyIGtleSBldmVudFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAqIEBwYXJhbSB7QXJyYXl9IG1vZGlmaWVyc1xuICogQHBhcmFtIHtFdmVudH0gZVxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjaGFyYWN0ZXIsIG1vZGlmaWVycywgZSkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIGNhbGxiYWNrc1xuICB2YXIgalxuICB2YXIgZG9Ob3RSZXNldCA9IHt9XG4gIHZhciBtYXhMZXZlbCA9IDBcbiAgdmFyIHByb2Nlc3NlZFNlcXVlbmNlQ2FsbGJhY2sgPSBmYWxzZVxuICB2YXIgaXNNb2RpZmllclxuICB2YXIgaWdub3JlVGhpc0tleXByZXNzXG5cbiAgY2FsbGJhY2tzID0gc2VsZi5nZXRNYXRjaGVzKGNoYXJhY3RlciwgbW9kaWZpZXJzLCBlKVxuICAvLyBDYWxjdWxhdGUgdGhlIG1heExldmVsIGZvciBzZXF1ZW5jZXMgc28gd2UgY2FuIG9ubHkgZXhlY3V0ZSB0aGUgbG9uZ2VzdCBjYWxsYmFjayBzZXF1ZW5jZVxuICBmb3IgKGogPSAwOyBqIDwgY2FsbGJhY2tzLmxlbmd0aDsgKytqKSB7XG4gICAgaWYgKGNhbGxiYWNrc1tqXS5zZXEpIHtcbiAgICAgIG1heExldmVsID0gTWF0aC5tYXgobWF4TGV2ZWwsIGNhbGxiYWNrc1tqXS5sZXZlbClcbiAgICB9XG4gIH1cblxuICAvLyBsb29wIHRocm91Z2ggbWF0Y2hpbmcgY2FsbGJhY2tzIGZvciB0aGlzIGtleSBldmVudFxuICBmb3IgKGogPSAwOyBqIDwgY2FsbGJhY2tzLmxlbmd0aDsgKytqKSB7XG4gICAgLy8gZmlyZSBmb3IgYWxsIHNlcXVlbmNlIGNhbGxiYWNrc1xuICAgIC8vIHRoaXMgaXMgYmVjYXVzZSBpZiBmb3IgZXhhbXBsZSB5b3UgaGF2ZSBtdWx0aXBsZSBzZXF1ZW5jZXNcbiAgICAvLyBib3VuZCBzdWNoIGFzIFwiZyBpXCIgYW5kIFwiZyB0XCIgdGhleSBib3RoIG5lZWQgdG8gZmlyZSB0aGVcbiAgICAvLyBjYWxsYmFjayBmb3IgbWF0Y2hpbmcgZyBjYXVzZSBvdGhlcndpc2UgeW91IGNhbiBvbmx5IGV2ZXJcbiAgICAvLyBtYXRjaCB0aGUgZmlyc3Qgb25lXG4gICAgaWYgKGNhbGxiYWNrc1tqXS5zZXEpIHtcbiAgICAgIC8vIG9ubHkgZmlyZSBjYWxsYmFja3MgZm9yIHRoZSBtYXhMZXZlbCB0byBwcmV2ZW50XG4gICAgICAvLyBzdWJzZXF1ZW5jZXMgZnJvbSBhbHNvIGZpcmluZ1xuICAgICAgLy9cbiAgICAgIC8vIGZvciBleGFtcGxlICdhIG9wdGlvbiBiJyBzaG91bGQgbm90IGNhdXNlICdvcHRpb24gYicgdG8gZmlyZVxuICAgICAgLy8gZXZlbiB0aG91Z2ggJ29wdGlvbiBiJyBpcyBwYXJ0IG9mIHRoZSBvdGhlciBzZXF1ZW5jZVxuICAgICAgLy9cbiAgICAgIC8vIGFueSBzZXF1ZW5jZXMgdGhhdCBkbyBub3QgbWF0Y2ggaGVyZSB3aWxsIGJlIGRpc2NhcmRlZFxuICAgICAgLy8gYmVsb3cgYnkgdGhlIHJlc2V0U2VxdWVuY2VzIGNhbGxcbiAgICAgIGlmIChjYWxsYmFja3Nbal0ubGV2ZWwgIT09IG1heExldmVsKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3NlZFNlcXVlbmNlQ2FsbGJhY2sgPSB0cnVlXG5cbiAgICAgIC8vIGtlZXAgYSBsaXN0IG9mIHdoaWNoIHNlcXVlbmNlcyB3ZXJlIG1hdGNoZXMgZm9yIGxhdGVyXG4gICAgICBkb05vdFJlc2V0W2NhbGxiYWNrc1tqXS5zZXFdID0gMVxuICAgICAgc2VsZi5maXJlQ2FsbGJhY2soY2FsbGJhY2tzW2pdLmNhbGxiYWNrLCBlLCBjYWxsYmFja3Nbal0uY29tYm8sIGNhbGxiYWNrc1tqXS5zZXEpXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIC8vIGlmIHRoZXJlIHdlcmUgbm8gc2VxdWVuY2UgbWF0Y2hlcyBidXQgd2UgYXJlIHN0aWxsIGhlcmVcbiAgICAvLyB0aGF0IG1lYW5zIHRoaXMgaXMgYSByZWd1bGFyIG1hdGNoIHNvIHdlIHNob3VsZCBmaXJlIHRoYXRcbiAgICBpZiAoIXByb2Nlc3NlZFNlcXVlbmNlQ2FsbGJhY2spIHtcbiAgICAgIHNlbGYuZmlyZUNhbGxiYWNrKGNhbGxiYWNrc1tqXS5jYWxsYmFjaywgZSwgY2FsbGJhY2tzW2pdLmNvbWJvKVxuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBrZXkgeW91IHByZXNzZWQgbWF0Y2hlcyB0aGUgdHlwZSBvZiBzZXF1ZW5jZSB3aXRob3V0XG4gIC8vIGJlaW5nIGEgbW9kaWZpZXIgKGllIFwia2V5dXBcIiBvciBcImtleXByZXNzXCIpIHRoZW4gd2Ugc2hvdWxkXG4gIC8vIHJlc2V0IGFsbCBzZXF1ZW5jZXMgdGhhdCB3ZXJlIG5vdCBtYXRjaGVkIGJ5IHRoaXMgZXZlbnRcbiAgLy9cbiAgLy8gdGhpcyBpcyBzbywgZm9yIGV4YW1wbGUsIGlmIHlvdSBoYXZlIHRoZSBzZXF1ZW5jZSBcImggYSB0XCIgYW5kIHlvdVxuICAvLyB0eXBlIFwiaCBlIGEgciB0XCIgaXQgZG9lcyBub3QgbWF0Y2guICBpbiB0aGlzIGNhc2UgdGhlIFwiZVwiIHdpbGxcbiAgLy8gY2F1c2UgdGhlIHNlcXVlbmNlIHRvIHJlc2V0XG4gIC8vXG4gIC8vIG1vZGlmaWVyIGtleXMgYXJlIGlnbm9yZWQgYmVjYXVzZSB5b3UgY2FuIGhhdmUgYSBzZXF1ZW5jZVxuICAvLyB0aGF0IGNvbnRhaW5zIG1vZGlmaWVycyBzdWNoIGFzIFwiZW50ZXIgY3RybCtzcGFjZVwiIGFuZCBpbiBtb3N0XG4gIC8vIGNhc2VzIHRoZSBtb2RpZmllciBrZXkgd2lsbCBiZSBwcmVzc2VkIGJlZm9yZSB0aGUgbmV4dCBrZXlcbiAgLy9cbiAgLy8gYWxzbyBpZiB5b3UgaGF2ZSBhIHNlcXVlbmNlIHN1Y2ggYXMgXCJjdHJsK2IgYVwiIHRoZW4gcHJlc3NpbmcgdGhlXG4gIC8vIFwiYlwiIGtleSB3aWxsIHRyaWdnZXIgYSBcImtleXByZXNzXCIgYW5kIGEgXCJrZXlkb3duXCJcbiAgLy9cbiAgLy8gdGhlIFwia2V5ZG93blwiIGlzIGV4cGVjdGVkIHdoZW4gdGhlcmUgaXMgYSBtb2RpZmllciwgYnV0IHRoZVxuICAvLyBcImtleXByZXNzXCIgZW5kcyB1cCBtYXRjaGluZyB0aGUgbmV4dEV4cGVjdGVkQWN0aW9uIHNpbmNlIGl0IG9jY3Vyc1xuICAvLyBhZnRlciBhbmQgdGhhdCBjYXVzZXMgdGhlIHNlcXVlbmNlIHRvIHJlc2V0XG4gIC8vXG4gIC8vIHdlIGlnbm9yZSBrZXlwcmVzc2VzIGluIGEgc2VxdWVuY2UgdGhhdCBkaXJlY3RseSBmb2xsb3cgYSBrZXlkb3duXG4gIC8vIGZvciB0aGUgc2FtZSBjaGFyYWN0ZXJcbiAgaWdub3JlVGhpc0tleXByZXNzID0gZS50eXBlID09PSAna2V5cHJlc3MnICYmIHNlbGYuaWdub3JlTmV4dEtleXByZXNzXG4gIGlzTW9kaWZpZXIgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL2lzTW9kaWZpZXInKVxuICBpZiAoZS50eXBlID09PSBzZWxmLm5leHRFeHBlY3RlZEFjdGlvbiAmJiAhaXNNb2RpZmllcihjaGFyYWN0ZXIpICYmICFpZ25vcmVUaGlzS2V5cHJlc3MpIHtcbiAgICBzZWxmLnJlc2V0U2VxdWVuY2VzKGRvTm90UmVzZXQpXG4gIH1cblxuICBzZWxmLmlnbm9yZU5leHRLZXlwcmVzcyA9IHByb2Nlc3NlZFNlcXVlbmNlQ2FsbGJhY2sgJiYgZS50eXBlID09PSAna2V5ZG93bidcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogaGFuZGxlcyBhIGtleWRvd24gZXZlbnRcbiAqXG4gKiBAcGFyYW0ge0V2ZW50fSBlXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBjaGFyYWN0ZXJGcm9tRXZlbnRcbiAgdmFyIGV2ZW50TW9kaWZpZXJzXG5cbiAgLy8gbm9ybWFsaXplIGUud2hpY2ggZm9yIGtleSBldmVudHNcbiAgLy8gQHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQyODU2MjcvamF2YXNjcmlwdC1rZXljb2RlLXZzLWNoYXJjb2RlLXV0dGVyLWNvbmZ1c2lvblxuICBpZiAodHlwZW9mIGUud2hpY2ggIT09ICdudW1iZXInKSB7XG4gICAgZS53aGljaCA9IGUua2V5Q29kZVxuICB9XG4gIGNoYXJhY3RlckZyb21FdmVudCA9IHJlcXVpcmUoJy4uLy4uL2hlbHBlcnMvY2hhcmFjdGVyRnJvbUV2ZW50JylcbiAgdmFyIGNoYXJhY3RlciA9IGNoYXJhY3RlckZyb21FdmVudChlKVxuXG4gIC8vIG5vIGNoYXJhY3RlciBmb3VuZCB0aGVuIHN0b3BcbiAgaWYgKCFjaGFyYWN0ZXIpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIG5lZWQgdG8gdXNlID09PSBmb3IgdGhlIGNoYXJhY3RlciBjaGVjayBiZWNhdXNlIHRoZSBjaGFyYWN0ZXIgY2FuIGJlIDBcbiAgaWYgKGUudHlwZSA9PT0gJ2tleXVwJyAmJiBzZWxmLmlnbm9yZU5leHRLZXl1cCA9PT0gY2hhcmFjdGVyKSB7XG4gICAgc2VsZi5pZ25vcmVOZXh0S2V5dXAgPSBmYWxzZVxuICAgIHJldHVyblxuICB9XG5cbiAgZXZlbnRNb2RpZmllcnMgPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzL2V2ZW50TW9kaWZpZXJzJylcbiAgc2VsZi5oYW5kbGVLZXkoY2hhcmFjdGVyLCBldmVudE1vZGlmaWVycyhlKSwgZSlcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogY2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsXG4gKlxuICogQHBhcmFtIHtBcnJheX0gbW9kaWZpZXJzMVxuICogQHBhcmFtIHtBcnJheX0gbW9kaWZpZXJzMlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1vZGlmaWVyczEsIG1vZGlmaWVyczIpIHtcbiAgcmV0dXJuIG1vZGlmaWVyczEuc29ydCgpLmpvaW4oJywnKSA9PT0gbW9kaWZpZXJzMi5zb3J0KCkuam9pbignLCcpXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIHBpY2tzIHRoZSBiZXN0IGFjdGlvbiBiYXNlZCBvbiB0aGUga2V5IGNvbWJpbmF0aW9uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIGNoYXJhY3RlciBmb3Iga2V5XG4gKiBAcGFyYW0ge0FycmF5fSBtb2RpZmllcnNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYWN0aW9uIHBhc3NlZCBpblxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXksIG1vZGlmaWVycywgYWN0aW9uKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIC8vIGlmIG5vIGFjdGlvbiB3YXMgcGlja2VkIGluIHdlIHNob3VsZCB0cnkgdG8gcGljayB0aGUgb25lXG4gIC8vIHRoYXQgd2UgdGhpbmsgd291bGQgd29yayBiZXN0IGZvciB0aGlzIGtleVxuICBpZiAoIWFjdGlvbikge1xuICAgIGFjdGlvbiA9IHNlbGYuZ2V0UmV2ZXJzZU1hcCgpW2tleV0gPyAna2V5ZG93bicgOiAna2V5cHJlc3MnXG4gIH1cblxuICAvLyBtb2RpZmllciBrZXlzIGRvbid0IHdvcmsgYXMgZXhwZWN0ZWQgd2l0aCBrZXlwcmVzcyxcbiAgLy8gc3dpdGNoIHRvIGtleWRvd25cbiAgaWYgKGFjdGlvbiA9PT0gJ2tleXByZXNzJyAmJiBtb2RpZmllcnMubGVuZ3RoKSB7XG4gICAgYWN0aW9uID0gJ2tleWRvd24nXG4gIH1cblxuICByZXR1cm4gYWN0aW9uXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIHJlc2V0cyB0aGUgbGlicmFyeSBiYWNrIHRvIGl0cyBpbml0aWFsIHN0YXRlLiBUaGlzIGlzIHVzZWZ1bFxuICogaWYgeW91IHdhbnQgdG8gY2xlYXIgb3V0IHRoZSBjdXJyZW50IGtleWJvYXJkIHNob3J0Y3V0cyBhbmQgYmluZFxuICogbmV3IG9uZXMgLSBmb3IgZXhhbXBsZSBpZiB5b3Ugc3dpdGNoIHRvIGFub3RoZXIgcGFnZVxuICpcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBzZWxmLmNhbGxiYWNrcyA9IHt9XG4gIHNlbGYuZGlyZWN0TWFwID0ge31cbiAgcmV0dXJuIHRoaXNcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG4vKipcbiAqIGNhbGxlZCB0byBzZXQgYSAxIHNlY29uZCB0aW1lb3V0IG9uIHRoZSBzcGVjaWZpZWQgc2VxdWVuY2VcbiAqXG4gKiB0aGlzIGlzIHNvIGFmdGVyIGVhY2gga2V5IHByZXNzIGluIHRoZSBzZXF1ZW5jZSB5b3UgaGF2ZSAxIHNlY29uZFxuICogdG8gcHJlc3MgdGhlIG5leHQga2V5IGJlZm9yZSB5b3UgaGF2ZSB0byBzdGFydCBvdmVyXG4gKlxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgY2xlYXJUaW1lb3V0KHNlbGYucmVzZXRUaW1lcilcbiAgc2VsZi5yZXNldFRpbWVyID0gc2V0VGltZW91dChcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnJlc2V0U2VxdWVuY2VzKClcbiAgICB9LFxuICAgIDEwMDBcbiAgKVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiByZXNldHMgYWxsIHNlcXVlbmNlIGNvdW50ZXJzIGV4Y2VwdCBmb3IgdGhlIG9uZXMgcGFzc2VkIGluXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRvTm90UmVzZXRcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZG9Ob3RSZXNldCkge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICBkb05vdFJlc2V0ID0gZG9Ob3RSZXNldCB8fCB7fVxuXG4gIHZhciBhY3RpdmVTZXF1ZW5jZXMgPSBmYWxzZVxuICB2YXIga2V5XG5cbiAgZm9yIChrZXkgaW4gc2VsZi5zZXF1ZW5jZUxldmVscykge1xuICAgIGlmIChkb05vdFJlc2V0W2tleV0pIHtcbiAgICAgIGFjdGl2ZVNlcXVlbmNlcyA9IHRydWVcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIHNlbGYuc2VxdWVuY2VMZXZlbHNba2V5XSA9IDBcbiAgfVxuXG4gIGlmICghYWN0aXZlU2VxdWVuY2VzKSB7XG4gICAgc2VsZi5uZXh0RXhwZWN0ZWRBY3Rpb24gPSBmYWxzZVxuICB9XG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiogc2hvdWxkIHdlIHN0b3AgdGhpcyBldmVudCBiZWZvcmUgZmlyaW5nIG9mZiBjYWxsYmFja3NcbipcbiogQHBhcmFtIHtFdmVudH0gZVxuKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiogQHJldHVybiB7Ym9vbGVhbn1cbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCBlbGVtZW50KSB7XG4gIC8vIGlmIHRoZSBlbGVtZW50IGhhcyB0aGUgY2xhc3MgXCJjb21ib2tleXNcIiB0aGVuIG5vIG5lZWQgdG8gc3RvcFxuICBpZiAoKCcgJyArIGVsZW1lbnQuY2xhc3NOYW1lICsgJyAnKS5pbmRleE9mKCcgY29tYm9rZXlzICcpID4gLTEpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHZhciB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKClcblxuICAvLyBzdG9wIGZvciBpbnB1dCwgc2VsZWN0LCBhbmQgdGV4dGFyZWFcbiAgcmV0dXJuIHRhZ05hbWUgPT09ICdpbnB1dCcgfHwgdGFnTmFtZSA9PT0gJ3NlbGVjdCcgfHwgdGFnTmFtZSA9PT0gJ3RleHRhcmVhJyB8fCBlbGVtZW50LmlzQ29udGVudEVkaXRhYmxlXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuLyoqXG4gKiB0cmlnZ2VycyBhbiBldmVudCB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gYm91bmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5c1xuICogQHBhcmFtIHtzdHJpbmc9fSBhY3Rpb25cbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5cywgYWN0aW9uKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoc2VsZi5kaXJlY3RNYXBba2V5cyArICc6JyArIGFjdGlvbl0pIHtcbiAgICBzZWxmLmRpcmVjdE1hcFtrZXlzICsgJzonICsgYWN0aW9uXSh7fSwga2V5cylcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogdW5iaW5kcyBhbiBldmVudCB0byBDb21ib2tleXNcbiAqXG4gKiB0aGUgdW5iaW5kaW5nIHNldHMgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIG9mIHRoZSBzcGVjaWZpZWQga2V5IGNvbWJvXG4gKiB0byBhbiBlbXB0eSBmdW5jdGlvbiBhbmQgZGVsZXRlcyB0aGUgY29ycmVzcG9uZGluZyBrZXkgaW4gdGhlXG4gKiBkaXJlY3RNYXAgZGljdC5cbiAqXG4gKiBUT0RPOiBhY3R1YWxseSByZW1vdmUgdGhpcyBmcm9tIHRoZSBjYWxsYmFja3MgZGljdGlvbmFyeSBpbnN0ZWFkXG4gKiBvZiBiaW5kaW5nIGFuIGVtcHR5IGZ1bmN0aW9uXG4gKlxuICogdGhlIGtleWNvbWJvK2FjdGlvbiBoYXMgdG8gYmUgZXhhY3RseSB0aGUgc2FtZSBhc1xuICogaXQgd2FzIGRlZmluZWQgaW4gdGhlIGJpbmQgbWV0aG9kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXl9IGtleXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb25cbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5cywgYWN0aW9uKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIHJldHVybiBzZWxmLmJpbmQoa2V5cywgZnVuY3Rpb24gKCkge30sIGFjdGlvbilcbn1cbiIsIi8qIGVzbGludC1lbnYgbm9kZSwgYnJvd3NlciAqL1xuJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICBzZWxmLmluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChjb21ib2tleXMpIHtcbiAgICBjb21ib2tleXMucmVzZXQoKVxuICB9KVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiB0YWtlcyB0aGUgZXZlbnQgYW5kIHJldHVybnMgdGhlIGtleSBjaGFyYWN0ZXJcbiAqXG4gKiBAcGFyYW0ge0V2ZW50fSBlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHtcbiAgdmFyIFNQRUNJQUxfS0VZU19NQVAsXG4gICAgU1BFQ0lBTF9DSEFSQUNURVJTX01BUFxuICBTUEVDSUFMX0tFWVNfTUFQID0gcmVxdWlyZSgnLi9zcGVjaWFsLWtleXMtbWFwJylcbiAgU1BFQ0lBTF9DSEFSQUNURVJTX01BUCA9IHJlcXVpcmUoJy4vc3BlY2lhbC1jaGFyYWN0ZXJzLW1hcCcpXG5cbiAgLy8gZm9yIGtleXByZXNzIGV2ZW50cyB3ZSBzaG91bGQgcmV0dXJuIHRoZSBjaGFyYWN0ZXIgYXMgaXNcbiAgaWYgKGUudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgIHZhciBjaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpXG5cbiAgICAvLyBpZiB0aGUgc2hpZnQga2V5IGlzIG5vdCBwcmVzc2VkIHRoZW4gaXQgaXMgc2FmZSB0byBhc3N1bWVcbiAgICAvLyB0aGF0IHdlIHdhbnQgdGhlIGNoYXJhY3RlciB0byBiZSBsb3dlcmNhc2UuICB0aGlzIG1lYW5zIGlmXG4gICAgLy8geW91IGFjY2lkZW50YWxseSBoYXZlIGNhcHMgbG9jayBvbiB0aGVuIHlvdXIga2V5IGJpbmRpbmdzXG4gICAgLy8gd2lsbCBjb250aW51ZSB0byB3b3JrXG4gICAgLy9cbiAgICAvLyB0aGUgb25seSBzaWRlIGVmZmVjdCB0aGF0IG1pZ2h0IG5vdCBiZSBkZXNpcmVkIGlzIGlmIHlvdVxuICAgIC8vIGJpbmQgc29tZXRoaW5nIGxpa2UgJ0EnIGNhdXNlIHlvdSB3YW50IHRvIHRyaWdnZXIgYW5cbiAgICAvLyBldmVudCB3aGVuIGNhcGl0YWwgQSBpcyBwcmVzc2VkIGNhcHMgbG9jayB3aWxsIG5vIGxvbmdlclxuICAgIC8vIHRyaWdnZXIgdGhlIGV2ZW50LiAgc2hpZnQrYSB3aWxsIHRob3VnaC5cbiAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgIGNoYXJhY3RlciA9IGNoYXJhY3Rlci50b0xvd2VyQ2FzZSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYXJhY3RlclxuICB9XG5cbiAgLy8gZm9yIG5vbiBrZXlwcmVzcyBldmVudHMgdGhlIHNwZWNpYWwgbWFwcyBhcmUgbmVlZGVkXG4gIGlmIChTUEVDSUFMX0tFWVNfTUFQW2Uud2hpY2hdKSB7XG4gICAgcmV0dXJuIFNQRUNJQUxfS0VZU19NQVBbZS53aGljaF1cbiAgfVxuXG4gIGlmIChTUEVDSUFMX0NIQVJBQ1RFUlNfTUFQW2Uud2hpY2hdKSB7XG4gICAgcmV0dXJuIFNQRUNJQUxfQ0hBUkFDVEVSU19NQVBbZS53aGljaF1cbiAgfVxuXG4gIC8vIGlmIGl0IGlzIG5vdCBpbiB0aGUgc3BlY2lhbCBtYXBcblxuICAvLyB3aXRoIGtleWRvd24gYW5kIGtleXVwIGV2ZW50cyB0aGUgY2hhcmFjdGVyIHNlZW1zIHRvIGFsd2F5c1xuICAvLyBjb21lIGluIGFzIGFuIHVwcGVyY2FzZSBjaGFyYWN0ZXIgd2hldGhlciB5b3UgYXJlIHByZXNzaW5nIHNoaWZ0XG4gIC8vIG9yIG5vdC4gIHdlIHNob3VsZCBtYWtlIHN1cmUgaXQgaXMgYWx3YXlzIGxvd2VyY2FzZSBmb3IgY29tcGFyaXNvbnNcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiB0YWtlcyBhIGtleSBldmVudCBhbmQgZmlndXJlcyBvdXQgd2hhdCB0aGUgbW9kaWZpZXJzIGFyZVxuICpcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkge1xuICB2YXIgbW9kaWZpZXJzID0gW11cblxuICBpZiAoZS5zaGlmdEtleSkge1xuICAgIG1vZGlmaWVycy5wdXNoKCdzaGlmdCcpXG4gIH1cblxuICBpZiAoZS5hbHRLZXkpIHtcbiAgICBtb2RpZmllcnMucHVzaCgnYWx0JylcbiAgfVxuXG4gIGlmIChlLmN0cmxLZXkpIHtcbiAgICBtb2RpZmllcnMucHVzaCgnY3RybCcpXG4gIH1cblxuICBpZiAoZS5tZXRhS2V5KSB7XG4gICAgbW9kaWZpZXJzLnB1c2goJ21ldGEnKVxuICB9XG5cbiAgcmV0dXJuIG1vZGlmaWVyc1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBkZXRlcm1pbmVzIGlmIHRoZSBrZXljb2RlIHNwZWNpZmllZCBpcyBhIG1vZGlmaWVyIGtleSBvciBub3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXkgPT09ICdzaGlmdCcgfHwga2V5ID09PSAnY3RybCcgfHwga2V5ID09PSAnYWx0JyB8fCBrZXkgPT09ICdtZXRhJ1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBDb252ZXJ0cyBmcm9tIGEgc3RyaW5nIGtleSBjb21iaW5hdGlvbiB0byBhbiBhcnJheVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gY29tYmluYXRpb24gbGlrZSBcImNvbW1hbmQrc2hpZnQrbFwiXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29tYmluYXRpb24pIHtcbiAgaWYgKGNvbWJpbmF0aW9uID09PSAnKycpIHtcbiAgICByZXR1cm4gWycrJ11cbiAgfVxuXG4gIHJldHVybiBjb21iaW5hdGlvbi5zcGxpdCgnKycpXG59XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUsIGJyb3dzZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIHByZXZlbnRzIGRlZmF1bHQgZm9yIHRoaXMgZXZlbnRcbiAqXG4gKiBAcGFyYW0ge0V2ZW50fSBlXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHtcbiAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICByZXR1cm5cbiAgfVxuXG4gIGUucmV0dXJuVmFsdWUgPSBmYWxzZVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogdGhpcyBpcyBhIG1hcHBpbmcgb2Yga2V5cyB0aGF0IHJlcXVpcmUgc2hpZnQgb24gYSBVUyBrZXlwYWRcbiAqIGJhY2sgdG8gdGhlIG5vbiBzaGlmdCBlcXVpdmVsZW50c1xuICpcbiAqIHRoaXMgaXMgc28geW91IGNhbiB1c2Uga2V5dXAgZXZlbnRzIHdpdGggdGhlc2Uga2V5c1xuICpcbiAqIG5vdGUgdGhhdCB0aGlzIHdpbGwgb25seSB3b3JrIHJlbGlhYmx5IG9uIFVTIGtleWJvYXJkc1xuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICAnfic6ICdgJyxcbiAgJyEnOiAnMScsXG4gICdAJzogJzInLFxuICAnIyc6ICczJyxcbiAgJyQnOiAnNCcsXG4gICclJzogJzUnLFxuICAnXic6ICc2JyxcbiAgJyYnOiAnNycsXG4gICcqJzogJzgnLFxuICAnKCc6ICc5JyxcbiAgJyknOiAnMCcsXG4gICdfJzogJy0nLFxuICAnKyc6ICc9JyxcbiAgJzonOiAnOycsXG4gICdcIic6IFwiJ1wiLFxuICAnPCc6ICcsJyxcbiAgJz4nOiAnLicsXG4gICc/JzogJy8nLFxuICAnfCc6ICdcXFxcJ1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogdGhpcyBpcyBhIGxpc3Qgb2Ygc3BlY2lhbCBzdHJpbmdzIHlvdSBjYW4gdXNlIHRvIG1hcFxuICogdG8gbW9kaWZpZXIga2V5cyB3aGVuIHlvdSBzcGVjaWZ5IHlvdXIga2V5Ym9hcmQgc2hvcnRjdXRzXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICdvcHRpb24nOiAnYWx0JyxcbiAgJ2NvbW1hbmQnOiAnbWV0YScsXG4gICdyZXR1cm4nOiAnZW50ZXInLFxuICAnZXNjYXBlJzogJ2VzYycsXG4gICdtb2QnOiAvTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSA/ICdtZXRhJyA6ICdjdHJsJ1xufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogbWFwcGluZyBmb3Igc3BlY2lhbCBjaGFyYWN0ZXJzIHNvIHRoZXkgY2FuIHN1cHBvcnRcbiAqXG4gKiB0aGlzIGRpY3Rpb25hcnkgaXMgb25seSB1c2VkIGluY2FzZSB5b3Ugd2FudCB0byBiaW5kIGFcbiAqIGtleXVwIG9yIGtleWRvd24gZXZlbnQgdG8gb25lIG9mIHRoZXNlIGtleXNcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgMTA2OiAnKicsXG4gIDEwNzogJysnLFxuICAxMDk6ICctJyxcbiAgMTEwOiAnLicsXG4gIDExMTogJy8nLFxuICAxODY6ICc7JyxcbiAgMTg3OiAnPScsXG4gIDE4ODogJywnLFxuICAxODk6ICctJyxcbiAgMTkwOiAnLicsXG4gIDE5MTogJy8nLFxuICAxOTI6ICdgJyxcbiAgMjE5OiAnWycsXG4gIDIyMDogJ1xcXFwnLFxuICAyMjE6ICddJyxcbiAgMjIyOiBcIidcIlxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcbi8qKlxuICogbWFwcGluZyBvZiBzcGVjaWFsIGtleWNvZGVzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcga2V5c1xuICpcbiAqIGV2ZXJ5dGhpbmcgaW4gdGhpcyBkaWN0aW9uYXJ5IGNhbm5vdCB1c2Uga2V5cHJlc3MgZXZlbnRzXG4gKiBzbyBpdCBoYXMgdG8gYmUgaGVyZSB0byBtYXAgdG8gdGhlIGNvcnJlY3Qga2V5Y29kZXMgZm9yXG4gKiBrZXl1cC9rZXlkb3duIGV2ZW50c1xuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICA4OiAnYmFja3NwYWNlJyxcbiAgOTogJ3RhYicsXG4gIDEzOiAnZW50ZXInLFxuICAxNjogJ3NoaWZ0JyxcbiAgMTc6ICdjdHJsJyxcbiAgMTg6ICdhbHQnLFxuICAyMDogJ2NhcHNsb2NrJyxcbiAgMjc6ICdlc2MnLFxuICAzMjogJ3NwYWNlJyxcbiAgMzM6ICdwYWdldXAnLFxuICAzNDogJ3BhZ2Vkb3duJyxcbiAgMzU6ICdlbmQnLFxuICAzNjogJ2hvbWUnLFxuICAzNzogJ2xlZnQnLFxuICAzODogJ3VwJyxcbiAgMzk6ICdyaWdodCcsXG4gIDQwOiAnZG93bicsXG4gIDQ1OiAnaW5zJyxcbiAgNDY6ICdkZWwnLFxuICA5MTogJ21ldGEnLFxuICA5MzogJ21ldGEnLFxuICAxODc6ICdwbHVzJyxcbiAgMTg5OiAnbWludXMnLFxuICAyMjQ6ICdtZXRhJ1xufVxuXG4vKipcbiAqIGxvb3AgdGhyb3VnaCB0aGUgZiBrZXlzLCBmMSB0byBmMTkgYW5kIGFkZCB0aGVtIHRvIHRoZSBtYXBcbiAqIHByb2dyYW1hdGljYWxseVxuICovXG5mb3IgKHZhciBpID0gMTsgaSA8IDIwOyArK2kpIHtcbiAgbW9kdWxlLmV4cG9ydHNbMTExICsgaV0gPSAnZicgKyBpXG59XG5cbi8qKlxuICogbG9vcCB0aHJvdWdoIHRvIG1hcCBudW1iZXJzIG9uIHRoZSBudW1lcmljIGtleXBhZFxuICovXG5mb3IgKGkgPSAwOyBpIDw9IDk7ICsraSkge1xuICBtb2R1bGUuZXhwb3J0c1tpICsgOTZdID0gaVxufVxuIiwiLyogZXNsaW50LWVudiBub2RlLCBicm93c2VyICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBzdG9wcyBwcm9wb2dhdGlvbiBmb3IgdGhpcyBldmVudFxuICpcbiAqIEBwYXJhbSB7RXZlbnR9IGVcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkge1xuICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgcmV0dXJuXG4gIH1cblxuICBlLmNhbmNlbEJ1YmJsZSA9IHRydWVcbn1cbiIsInZhciByYW5kSW50ID0gcmVxdWlyZSgnLi9mYWIvcmFuZEludCcpO1xuXG52YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xudmFyIGMgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxudmFyIGltZ3MgPSB7XG5cdHRoaXNJc1lvdTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ3RoaXNJc1lvdScpXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0Z2V0U2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHsgeDogd2luZG93LmlubmVyV2lkdGgsIHk6IHdpbmRvdy5pbm5lckhlaWdodCB9O1xuXHR9LFxuXHRnZXRDZW50ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7IHg6IHdpbmRvdy5pbm5lcldpZHRoLzIsIHk6IHdpbmRvdy5pbm5lckhlaWdodC8yIH07XG5cdH0sXG5cdGdldFJhbmRvbUJvdW5kUG9pbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmKE1hdGgucmFuZG9tKCkgPj0gMC41KSB7XG5cdFx0XHRyZXR1cm4geyB4OiByYW5kSW50KDAsd2luZG93LmlubmVyV2lkdGgpLCB5OiAwIH07XG5cdFx0fVxuXHRcdHJldHVybiB7IHg6IDAsIHk6IHJhbmRJbnQoMCx3aW5kb3cuaW5uZXJIZWlnaHQpIH07XG5cdH0sXG5cblx0cmVzaXplOiBmdW5jdGlvbigpIHtcblx0XHRjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHR9LFxuXG5cdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHR9LFxuXG5cdGltZzogZnVuY3Rpb24oaW1nU3RyLCB4LHkpIHtcblx0XHRjLmRyYXdJbWFnZShpbWdzW2ltZ1N0cl0seCx5KTtcblx0fSxcblxuXHRjaXJjbGU6IGZ1bmN0aW9uKGVudGl0eSkge1xuXHRcdGMuZmlsbFN0eWxlID0gZW50aXR5LmNvbG9yO1xuXHRcdGMuYmVnaW5QYXRoKCk7XG5cdFx0Yy5hcmMoZW50aXR5LnBvcy54LCBlbnRpdHkucG9zLnksIGVudGl0eS5yYWRpdXMsIDAsIDIqTWF0aC5QSSk7XG5cdFx0Yy5maWxsKCk7XG5cdH0sXG5cblx0b3V0bGluZUNpcmNsZTogZnVuY3Rpb24oZW50aXR5KSB7XG5cdFx0Yy5maWxsU3R5bGUgPSBlbnRpdHkuY29sb3I7XG5cdFx0Yy5zdHJva2VTdHlsZSA9IGVudGl0eS5zdHJva2VDb2xvcjtcblx0XHRjLmJlZ2luUGF0aCgpO1xuXHRcdGMuYXJjKGVudGl0eS5wb3MueCwgZW50aXR5LnBvcy55LCBlbnRpdHkucmFkaXVzLCAwLCAyKk1hdGguUEkpO1xuXHRcdGMuZmlsbCgpO1xuXHRcdGMuc3Ryb2tlKCk7XG5cdH0sXG5cblx0Y2xlYXI6IGZ1bmN0aW9uKCkge1xuXHRcdGMuZmlsbFN0eWxlID0gJ3doaXRlJztcblx0XHRjLmZpbGxSZWN0KDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodCk7XG5cdH0sXG5cblx0dGV4dDogZnVuY3Rpb24ocG9zLHRleHQsc2l6ZSxjb2xvcikge1xuXHRcdGMuZmlsbFN0eWxlID0gY29sb3I7XG5cdFx0Yy5mb250ID0gc2l6ZS50b1N0cmluZygpICsgJ3B4IEhlbHZldGljYSc7XG5cdFx0Yy5maWxsU3R5bGUodGV4dCwgcG9zLngsIHBvcy55KTtcblx0fVxufTtcbiIsInZhciB2ZWMyID0gcmVxdWlyZSgnLi92ZWMyJyk7XG5cbnZhciBkaXN0YW5jZUNoZWNrID0gcmVxdWlyZSgnLi9mYWIvZGlzdGFuY2VDaGVjaycpO1xuXG52YXIgc3F1YXJlQ2hlY2sgPSByZXF1aXJlKCcuL2ZhYi9zcXVhcmVDaGVjaycpO1xuXG5mdW5jdGlvbiBsaW1pdDFEVmVsKHZlbCwgbWF4VmVsKSB7XG5cdGlmKHZlbCA+IDApIHtcblx0XHRyZXR1cm4gdmVsID49IG1heFZlbCA/IG1heFZlbCA6IHZlbDtcblx0fVxuXHRyZXR1cm4gdmVsIDw9IC1tYXhWZWwgPyAtbWF4VmVsOiB2ZWw7XG59XG5cbmZ1bmN0aW9uIGxpbWl0VmVsKGVudGl0eSkge1xuXHRyZXR1cm4ge1xuXHRcdHg6IGxpbWl0MURWZWwoZW50aXR5LnZlbC54LCBlbnRpdHkubWF4VmVsLngpLFxuXHRcdHk6IGxpbWl0MURWZWwoZW50aXR5LnZlbC55LCBlbnRpdHkubWF4VmVsLnkpXG5cdH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRjcmVhdGU6IGZ1bmN0aW9uKGZyYWcpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmFkaXVzOiBmcmFnLnJhZGl1cyB8fCA0LFxuXHRcdFx0Y29sb3I6IGZyYWcuY29sb3IgfHwgJ2JsYWNrJyxcblxuXHRcdFx0cG9zOiBmcmFnLnBvcyB8fCB7eDogMCwgeTogMH0sXG5cdFx0XHRwb3NPZmZzZXQ6IGZyYWcucG9zT2Zmc2V0IHx8IHt4OiAwLCB5OiAwfSxcblxuXHRcdFx0dmVsOiBmcmFnLnZlbCB8fCB7eDogMCwgeTogMH0sXG5cdFx0XHRtYXhWZWw6IGZyYWcubWF4VmVsIHx8IHt4OiAwLCB5OiAwfSxcblxuXHRcdFx0YWNlbDogZnJhZy5hY2VsIHx8IHt4OiAwLCB5OiAwfVxuXHRcdH07XG5cdH0sXG5cblx0YmFzZVBsYXllcjogZnVuY3Rpb24oY2VudGVyKSB7XG5cdFx0cmV0dXJuIHRoaXMuY3JlYXRlKHtcblx0XHRcdHJhZGl1czogNSxcblx0XHRcdGNvbG9yOiAnd2hpdGUnLFxuXHRcdFx0b3V0bGluZUNvbG9yOiAnYmxhY2snLFxuXG5cdFx0XHRwb3M6IGNlbnRlcixcblxuXHRcdFx0bWF4VmVsOiB7eDogMywgeTogM30sXG5cdFx0XHRhY2VsOiB7eDogMC40LCB5OiAwLjR9XG5cdFx0fSk7XG5cdH0sXG5cblx0Y2hlY2tDb2xsaXNpb246IGZ1bmN0aW9uKGVudDEsIGVudDIpIHtcblx0XHRyZXR1cm4gc3F1YXJlQ2hlY2soZW50MSwgZW50MikgJiYgZGlzdGFuY2VDaGVjayhlbnQxLCBlbnQyKTtcblx0fSxcblxuXHRhY2VsOiBmdW5jdGlvbihlbnRpdHkpIHtcblx0XHRlbnRpdHkudmVsLnkgKz0gZW50aXR5LmFjZWwueTtcblx0XHRlbnRpdHkudmVsLnggKz0gZW50aXR5LmFjZWwueDtcblx0fSxcblxuXHRtb3ZlOiBmdW5jdGlvbihlbnRpdHkpIHtcblx0XHRlbnRpdHkudmVsID0gbGltaXRWZWwoZW50aXR5KTtcblxuXHRcdGVudGl0eS5wb3MgPSB2ZWMyLmFkZChlbnRpdHkucG9zLCBlbnRpdHkudmVsKTtcblx0fSxcblxuXHRtb3ZlV2l0aEtleWJvYXJkOiBmdW5jdGlvbihlbnRpdHksIGtleWJvYXJkKSB7XG5cdFx0aWYoa2V5Ym9hcmQudXApIHtcblx0XHRcdGVudGl0eS52ZWwueSAtPSBlbnRpdHkuYWNlbC55O1xuXHRcdH1cblx0XHRpZihrZXlib2FyZC5kb3duKSB7XG5cdFx0XHRlbnRpdHkudmVsLnkgKz0gZW50aXR5LmFjZWwueTtcblx0XHR9XG5cdFx0aWYoa2V5Ym9hcmQubGVmdCkge1xuXHRcdFx0ZW50aXR5LnZlbC54IC09IGVudGl0eS5hY2VsLng7XG5cdFx0fVxuXHRcdGlmKGtleWJvYXJkLnJpZ2h0KSB7XG5cdFx0XHRlbnRpdHkudmVsLnggKz0gZW50aXR5LmFjZWwueDtcblx0XHR9XG5cblx0XHR0aGlzLm1vdmUoZW50aXR5KTtcblx0fSxcblxuXHRtb3ZlV2l0aFBsYXllcjogZnVuY3Rpb24oZW50aXR5LCBiYXNlUGxheWVyKSB7XG5cdFx0ZW50aXR5LnBvcyA9IHZlYzIuc3ViKGJhc2VQbGF5ZXIucG9zLCBlbnRpdHkucG9zT2Zmc2V0KTtcblx0fSxcblxuXHRzd2FwQXJvdW5kOiBmdW5jdGlvbihlbnRpdHksIGNhbnZhc1NpemUpIHtcblx0XHQvLyBZIEF4aXNcblx0XHRpZihlbnRpdHkucG9zLnkgPiBjYW52YXNTaXplLnkpIHtcblx0XHRcdGVudGl0eS5wb3MueSAtPSBjYW52YXNTaXplLnk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZW50aXR5LnBvcy55IDwgMCkge1xuXHRcdFx0ZW50aXR5LnBvcy55ICs9IGNhbnZhc1NpemUueTtcblx0XHR9XG5cblx0XHQvLyBYIEF4aXNcblx0XHRpZihlbnRpdHkucG9zLnggPiBjYW52YXNTaXplLngpIHtcblx0XHRcdGVudGl0eS5wb3MueCAtPSBjYW52YXNTaXplLng7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZW50aXR5LnBvcy54IDwgMCkge1xuXHRcdFx0ZW50aXR5LnBvcy54ICs9IGNhbnZhc1NpemUueDtcblx0XHR9XG5cdH1cbn07XG4iLCJ2YXIgcHl0aGEgPSByZXF1aXJlKCcuL3B5dGhhJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZW50MSwgZW50Mikge1xuXHR2YXIgcHl0aGFTb2wgPSBweXRoYShlbnQxLnBvcywgZW50Mi5wb3MpO1xuXHRyZXR1cm4gcHl0aGFTb2wgPCAoZW50MS5yYWRpdXMgKyBlbnQyLnJhZGl1cyk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb3MxLCBwb3MyKSB7XG5cdHJldHVybiBNYXRoLnNxcnQoXG5cdFx0KChwb3MxLnggLSBwb3MyLngpICogKHBvczEueCAtIHBvczIueCkpICtcblx0XHQoKHBvczEueSAtIHBvczIueSkgKiAocG9zMS55IC0gcG9zMi55KSlcblx0KTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gJyMnK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cigtNik7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtaW4sbWF4KSB7XG5cdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZW50MSwgZW50Mikge1xuXHRyZXR1cm4gIShcblx0XHQoZW50MS5wb3MueCArIGVudDEucmFkaXVzKSA8IChlbnQyLnBvcy54IC0gZW50Mi5yYWRpdXMpIHx8XG5cdFx0KGVudDEucG9zLnkgKyBlbnQxLnJhZGl1cykgPCAoZW50Mi5wb3MueSAtIGVudDIucmFkaXVzKSB8fFxuXHRcdChlbnQxLnBvcy54IC0gZW50MS5yYWRpdXMpID4gKGVudDIucG9zLnggKyBlbnQyLnJhZGl1cykgfHxcblx0XHQoZW50MS5wb3MueSAtIGVudDEucmFkaXVzKSA+IChlbnQyLnBvcy55ICsgZW50Mi5yYWRpdXMpXG5cdCk7XG59O1xuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcblx0dmFyIHVwZGF0ZSA9IHJlcXVpcmUoJy4vdXBkYXRlJyk7XG5cblx0dmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpO1xuXHR2YXIgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQnKTtcblx0dmFyIHNjb3JlQm9hcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlQm9hcmRzJyk7XG5cblx0c3RhcnRCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuXHRcdG1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRzY29yZUJvYXJkcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuXHRcdHVwZGF0ZS5yZW5kZXJMb29wKCk7XG5cdFx0dXBkYXRlLnNlY29uZHNMb29wKCk7XG5cdH07XG59KTtcbiIsInZhciBDb21ib2tleXMgPSByZXF1aXJlKCdjb21ib2tleXMnKTtcbnZhciBjYW52YXNJbnB1dCA9IG5ldyBDb21ib2tleXMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcblxudmFyIGtiID0ge1xuXHR1cDogZmFsc2UsIGRvd246IGZhbHNlLCBsZWZ0OiBmYWxzZSwgcmlnaHQ6IGZhbHNlXG59O1xuXG5jYW52YXNJbnB1dC5iaW5kKCd1cCcsIGZ1bmN0aW9uKCkgICAgeyBrYi51cCA9IHRydWU7ICAgICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgndXAnLCBmdW5jdGlvbigpICAgIHsga2IudXAgPSBmYWxzZTsgICAgfSwgJ2tleXVwJyk7XG5jYW52YXNJbnB1dC5iaW5kKCdkb3duJywgZnVuY3Rpb24oKSAgeyBrYi5kb3duID0gdHJ1ZTsgICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgnZG93bicsIGZ1bmN0aW9uKCkgIHsga2IuZG93biA9IGZhbHNlOyAgfSwgJ2tleXVwJyk7XG5jYW52YXNJbnB1dC5iaW5kKCdsZWZ0JywgZnVuY3Rpb24oKSAgeyBrYi5sZWZ0ID0gdHJ1ZTsgICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgnbGVmdCcsIGZ1bmN0aW9uKCkgIHsga2IubGVmdCA9IGZhbHNlOyAgfSwgJ2tleXVwJyk7XG5jYW52YXNJbnB1dC5iaW5kKCdyaWdodCcsIGZ1bmN0aW9uKCkgeyBrYi5yaWdodCA9IHRydWU7ICB9LCAna2V5ZG93bicpO1xuY2FudmFzSW5wdXQuYmluZCgncmlnaHQnLCBmdW5jdGlvbigpIHsga2IucmlnaHQgPSBmYWxzZTsgfSwgJ2tleXVwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ga2I7XG4iLCJ2YXIgZG9tID0ge1xuXHRzY29yZUJvYXJkczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlQm9hcmRzJyksXG5cdGF2b2lkaW5nU2Vjb25kczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY29uZHNBdm9pZGVkJyksXG5cdHNlY29uZHNMZWZ0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vjb25kc0xlZnQnKSxcblx0YW1vdW50Q29sbGVjdGVkOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW1vdW50Q29sbGVjdGVkJylcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRhdm9pZGluZ1NlY29uZHM6IDAsXG5cdHNlY29uZHNMZWZ0OiAyMCxcblx0YW1vdW50Q29sbGVjdGVkOiAwLFxuXG5cdHVwZGF0ZURPTTogZnVuY3Rpb24oKSB7XG5cdFx0ZG9tLmF2b2lkaW5nU2Vjb25kcy5pbm5lckhUTUwgPSB0aGlzLmF2b2lkaW5nU2Vjb25kcztcblx0XHRkb20uc2Vjb25kc0xlZnQuaW5uZXJIVE1MID0gdGhpcy5zZWNvbmRzTGVmdDtcblx0XHRkb20uYW1vdW50Q29sbGVjdGVkLmlubmVySFRNTCA9IHRoaXMuYW1vdW50Q29sbGVjdGVkO1xuXHR9LFxuXG5cdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdGRvbS5zY29yZUJvYXJkcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHR9XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIGF2b2lkaW5nOiB0cnVlLFxuICBmaW5pc2hlZDogZmFsc2UsXG5cbiAgaGFzTW92ZWQ6IGZhbHNlXG59O1xuIiwidmFyIHZlYzIgPSByZXF1aXJlKCcuL3ZlYzIuanMnKTtcbnZhciByYW5kSW50ID0gcmVxdWlyZSgnLi9mYWIvcmFuZEludCcpO1xudmFyIHJhbmRIZXggPSByZXF1aXJlKCcuL2ZhYi9yYW5kSGV4Jyk7XG5cbnZhciBlbnRpdHkgPSByZXF1aXJlKCcuL2VudGl0eScpO1xudmFyIGNhbnZhcyA9IHJlcXVpcmUoJy4vY2FudmFzJyk7XG52YXIga2V5Ym9hcmQgPSByZXF1aXJlKCcuL2tleWJvYXJkJyk7XG5cbnZhciBzdGF0ZSA9IHJlcXVpcmUoJy4vc3RhdGUnKTtcblxudmFyIHNjb3JlQm9hcmQgPSByZXF1aXJlKCcuL3Njb3JlQm9hcmQnKTtcblxudmFyIHBsYXllckFycmF5ID0gW107XG52YXIgYnVsbGV0QXJyYXkgPSBbXTtcblxudmFyIGZyYW1lID0gLTE7XG52YXIgc2Vjb25kcyA9IC0xO1xuXG5jYW52YXMucmVzaXplKCk7XG5cbnZhciBiYXNlUGxheWVyID0gZW50aXR5LmJhc2VQbGF5ZXIoY2FudmFzLmdldENlbnRlcigpKTtcblxuZnVuY3Rpb24gY2hlY2tDb2xsaXNpb24ocGxheWVyRW50aXR5KSB7XG5cdGZvcih2YXIgYj0wLCBiTGVuPWJ1bGxldEFycmF5Lmxlbmd0aDsgYiA8IGJMZW47IGIrKykge1xuXHRcdGlmKGJ1bGxldEFycmF5W2JdICYmIGVudGl0eS5jaGVja0NvbGxpc2lvbihwbGF5ZXJFbnRpdHksYnVsbGV0QXJyYXlbYl0pKSB7XG5cdFx0XHRsZXQgYnVsbGV0VG9Nb3ZlID0gYnVsbGV0QXJyYXlbYl07XG5cblx0XHRcdHBsYXllckFycmF5LnB1c2goZW50aXR5LmNyZWF0ZSh7XG5cdFx0XHRcdHJhZGl1czogYnVsbGV0VG9Nb3ZlLnJhZGl1cyxcblx0XHRcdFx0Y29sb3I6IGJ1bGxldFRvTW92ZS5jb2xvcixcblx0XHRcdFx0cG9zOiBidWxsZXRUb01vdmUucG9zLFxuXHRcdFx0XHRwb3NPZmZzZXQ6IHZlYzIuc3ViKGJhc2VQbGF5ZXIucG9zLCBidWxsZXRUb01vdmUucG9zKVxuXHRcdFx0fSkpO1xuXG5cdFx0XHRidWxsZXRBcnJheS5zcGxpY2UoYiwxKTtcblxuXHRcdFx0aWYoc3RhdGUuYXZvaWRpbmcpIHtcblx0XHRcdFx0c3RhdGUuYXZvaWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2b2lkQm9hcmQnKS5zdHlsZS5vcGFjaXR5ID0gJzAuMjUnO1xuXHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sbGVjdEJvYXJkJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0XHR9XG5cblx0XHRcdHNjb3JlQm9hcmQuYW1vdW50Q29sbGVjdGVkKys7XG5cdFx0XHRzY29yZUJvYXJkLnVwZGF0ZURPTSgpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiByZW5kZXJMb29wKCkge1xuXHRmcmFtZSsrO1xuXHRjYW52YXMuY2xlYXIoKTtcblxuXHR2YXIgY2FudmFzU2l6ZSA9IGNhbnZhcy5nZXRTaXplKCk7XG5cblx0aWYoIXN0YXRlLmhhc01vdmVkKSB7XG5cdFx0Y2FudmFzLmltZygndGhpc0lzWW91JyxjYW52YXNTaXplLnggLyAyIC0gKDcwKSxjYW52YXNTaXplLnkgLyAyIC0gKDEyMykpO1xuXHRcdGlmKGtleWJvYXJkLnVwIHx8IGtleWJvYXJkLmRvd24gfHwga2V5Ym9hcmQubGVmdCB8fCBrZXlib2FyZC5yaWdodCkge1xuXHRcdFx0c3RhdGUuaGFzTW92ZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdGZvcih2YXIgaT0wOyBpIDwgYnVsbGV0QXJyYXkubGVuZ3RoOyBpKyspIHtcblx0XHRpZihidWxsZXRBcnJheVtpXSkge1xuXHRcdFx0bGV0IGJ1bGxldEVudGl0eSA9IGJ1bGxldEFycmF5W2ldO1xuXG5cdFx0XHRlbnRpdHkubW92ZShidWxsZXRFbnRpdHkpO1xuXHRcdFx0ZW50aXR5LmFjZWwoYnVsbGV0RW50aXR5KTtcblx0XHRcdGVudGl0eS5zd2FwQXJvdW5kKGJ1bGxldEVudGl0eSwgY2FudmFzU2l6ZSk7XG5cblx0XHRcdGNhbnZhcy5jaXJjbGUoYnVsbGV0RW50aXR5KTtcblx0XHR9XG5cdH1cblxuXHRlbnRpdHkubW92ZVdpdGhLZXlib2FyZChiYXNlUGxheWVyLCBrZXlib2FyZCk7XG5cdGVudGl0eS5zd2FwQXJvdW5kKGJhc2VQbGF5ZXIsIGNhbnZhc1NpemUpO1xuXHRjYW52YXMub3V0bGluZUNpcmNsZShiYXNlUGxheWVyKTtcblx0Y2hlY2tDb2xsaXNpb24oYmFzZVBsYXllcik7XG5cblx0Zm9yKHZhciBwPTA7IHAgPCBwbGF5ZXJBcnJheS5sZW5ndGg7IHArKykge1xuXHRcdGxldCBwbGF5ZXJFbnRpdHkgPSBwbGF5ZXJBcnJheVtwXTtcblxuXHRcdGVudGl0eS5tb3ZlV2l0aFBsYXllcihwbGF5ZXJFbnRpdHksIGJhc2VQbGF5ZXIpO1xuXHRcdGVudGl0eS5zd2FwQXJvdW5kKHBsYXllckVudGl0eSwgY2FudmFzU2l6ZSk7XG5cblx0XHRjYW52YXMuY2lyY2xlKHBsYXllckVudGl0eSk7XG5cdFx0Y2hlY2tDb2xsaXNpb24ocGxheWVyRW50aXR5KTtcblx0fVxuXG5cdGlmKCFzdGF0ZS5maW5pc2hlZCkge1xuXHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyTG9vcCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2Vjb25kc0xvb3AoKSB7XG5cdHNlY29uZHMrKztcblxuXHRpZihzdGF0ZS5oYXNNb3ZlZCkge1xuXHRcdGlmKHN0YXRlLmF2b2lkaW5nKSB7XG5cdFx0XHRzY29yZUJvYXJkLmF2b2lkaW5nU2Vjb25kcysrO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzY29yZUJvYXJkLnNlY29uZHNMZWZ0LS07XG5cblx0XHRcdGlmKHNjb3JlQm9hcmQuc2Vjb25kc0xlZnQgPD0gMCkge1xuXHRcdFx0XHRzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0c2NvcmVCb2FyZC51cGRhdGVET00oKTtcblxuXHRcdGlmKGJ1bGxldEFycmF5Lmxlbmd0aCA8PSAxMzApIHtcblx0XHRcdGJ1bGxldEFycmF5LnB1c2goZW50aXR5LmNyZWF0ZSh7XG5cdFx0XHRcdHJhZGl1czogcmFuZEludCg3LDE0KSxcblx0XHRcdFx0Y29sb3I6IHJhbmRIZXgoKSxcblxuXHRcdFx0XHRwb3M6IGNhbnZhcy5nZXRSYW5kb21Cb3VuZFBvaW50KCksXG5cdFx0XHRcdG1heFZlbDoge1xuXHRcdFx0XHRcdHg6ICgoTWF0aC5yYW5kb20oKSAqIHNlY29uZHMvNykgKyAxKSxcblx0XHRcdFx0XHR5OiAoKE1hdGgucmFuZG9tKCkgKiBzZWNvbmRzLzcpICsgMSlcblx0XHRcdFx0fSxcblx0XHRcdFx0YWNlbDoge1xuXHRcdFx0XHRcdHg6IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtMC4wMDUgOiAwLjAwNSxcblx0XHRcdFx0XHR5OiBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTAuMDA1IDogMC4wMDVcblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXHRcdH1cblx0fVxuXG5cdGlmKCFzdGF0ZS5maW5pc2hlZCkge1xuXHRcdHNldFRpbWVvdXQoc2Vjb25kc0xvb3AsIDEwMDApO1xuXHRcdC8vZmluaXNoKCk7XG5cdH0gZWxzZSB7XG5cdFx0ZmluaXNoKCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gZmluaXNoKCkge1xuXHRzY29yZUJvYXJkLmhpZGUoKTtcblx0Y2FudmFzLmhpZGUoKTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmluaXNoJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRyZW5kZXJMb29wOiByZW5kZXJMb29wLFxuXHRzZWNvbmRzTG9vcDogc2Vjb25kc0xvb3Bcbn07XG4iLCJmdW5jdGlvbiBhZGQoZmlyc3RWZWMsIHNlY29uZFZlYykge1xuXHRyZXR1cm4geyB4OiBmaXJzdFZlYy54ICsgc2Vjb25kVmVjLngsIHk6IGZpcnN0VmVjLnkgKyBzZWNvbmRWZWMueSB9O1xufVxuXG5mdW5jdGlvbiBzdWIoZmlyc3RWZWMsIHNlY29uZFZlYykge1xuXHRyZXR1cm4geyB4OiBmaXJzdFZlYy54IC0gc2Vjb25kVmVjLngsIHk6IGZpcnN0VmVjLnkgLSBzZWNvbmRWZWMueSB9O1xufVxuXG5mdW5jdGlvbiBtdWx0aShmaXJzdFZlYywgc2Vjb25kVmVjKSB7XG5cdHJldHVybiB7IHg6IGZpcnN0VmVjLnggKiBzZWNvbmRWZWMueCwgeTogZmlyc3RWZWMueSAqIHNlY29uZFZlYy55IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRhZGQ6IGFkZCxcblx0c3ViOiBzdWIsXG5cdG11bHRpOiBtdWx0aVxufTtcbiJdfQ=="}